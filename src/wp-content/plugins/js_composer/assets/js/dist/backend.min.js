window.vc||(window.vc={}),function(){"use strict";function e(e){return"\\"+a[e]}vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var t=/(.)^/,a={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};vc.template=function(a,n){function o(e){return r.call(this,e,_)}n=_.defaults({},n,vc.templateOptions.default);var i=RegExp([(n.escape||t).source,(n.interpolate||t).source,(n.evaluate||t).source].join("|")+"|$","g"),s=0,l="__p+='",r;a.replace(i,function(t,n,o,i,r){return l+=a.slice(s,r).replace(/\\|'|\r|\n|\u2028|\u2029/g,e),s=r+t.length,n?l+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?l+="'+\n((__t=("+o+"))==null?'':__t)+\n'":i&&(l+="';\n"+i+"\n__p+='"),t}),l+="';\n",l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(l=n.variable?l:"with(obj||{}){\n"+l+"}\n")+"return __p;\n";try{r=new Function(n.variable||"obj","_",l)}catch(t){throw t.source=l,t}return i=n.variable||"obj",o.source="function("+i+"){\n"+l+"}",o}}(),function(e){"use strict";_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"",mode:"",is_focused:!1,ace_enabled:!1,initialize:function(e){e&&0<e.length&&(this.sel=e),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(e){if(!this.missingUnfilteredHtml())return this.aceEnabled()?this.setEditorAce(e):this.setEditorTextarea(e),this.$editor},missingUnfilteredHtml:function(){return e("#"+this.sel).hasClass("wpb_missing_unfiltered_html")},focus:function(){var e;this.is_focused&&(this.aceEnabled()?(this.$editor.focus(),e=this.$editor.session.getLength(),this.$editor.gotoLine(e,this.$editor.session.getLine(e-1).length)):this.$editor.focus())},setEditorAce:function(e){return this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/"+this.mode),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(e),this.$editor.clearSelection(),this.is_focused&&this.$editor.focus(),e=this.$editor.getSession().getLength(),(this.$editor.gotoLine(e,this.$editor.getSession().getLine(e-1).length),this.$editor)},setEditorTextarea:function(t){return this.$editor||(this.$editor=e("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),e("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(t),this.is_focused&&this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var t=e(window).height()-380;this.aceEnabled()?e("#"+this.sel).css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var t=e("#"+this.sel);this.aceEnabled()?t.css({height:"30vh",minHeight:"30vh"}):(this.$editor.parent().css({height:"30vh",minHeight:"30vh"}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(){"use strict";window.Backbone.View.vcExtendUI=function(e){var t=this.extend(e);return t.prototype._vcUIEventsHooks||(t.prototype._vcUIEventsHooks=[]),e.uiEvents&&t.prototype._vcUIEventsHooks.push(e.uiEvents),t},window.vc.View=Backbone.View.extend({delegateEvents:function(){vc.View.__super__.delegateEvents.call(this),this._vcUIEventsHooks&&this._vcUIEventsHooks.length&&_.each(this._vcUIEventsHooks,function(e){_.isObject(e)&&_.each(e,function(t,a){_.isString(t)&&_.each(t.split(/\s+/),function(e){this.on(a,this[e],this)},this)},this)},this)}})}(),window.vc||(window.vc={}),function(e){window.vc.seo_utils={getTextContent:function(e){e=e.replace(/\s*\bdata-vcv-[^"<>]+"[^"<>]+"+/g,"").replace(/<!--\[vcvSourceHtml]/g,"").replace(/\[\/vcvSourceHtml]-->/g,"").replace(/<\//g," </");for(var t=document.createRange().createContextualFragment(e),a=t.querySelector("style, script, noscript, meta, title, #vc_no-content-helper, .vc_controls");a;)a.parentNode.removeChild(a),a=t.querySelector("style, script, noscript, meta, title, #vc_no-content-helper, .vc_controls");return t&&t.textContent&&t.textContent.trim()},createMeasurementElement:function(){var e=document.createElement("div");return e.id="vc-measurement-element",e.style.position="absolute",e.style.left="-9999em",e.style.top=0,e.style.height=0,e.style.overflow="hidden",e.style.fontFamily="arial, sans-serif",e.style.fontSize="20px",e.style.fontWeight="400",document.body.appendChild(e),e},measureTextWidth:function(e){var t=document.getElementById("vc-measurement-element");return(t=t||this.createMeasurementElement()).innerHTML=e,t.offsetWidth},findKeyphrase:function(e,t){return e=e.toLowerCase(),t=(t=t.trim().toLowerCase()).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=new RegExp("\\b"+t+"\\b","gi"),e=Array.from(e.matchAll(t)),e.length?{found:!0,count:e.length,positions:e.map(function(e){return e.index})}:{found:!1,count:0,positions:[]}},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},findKeyphraseInSlug:function(e,t){return t=this.slugify(t),e=this.slugify(e),t=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=new RegExp("\\b"+t.split("-").join("\\b-\\b")+"\\b","gi"),e=Array.from(e.matchAll(t)),0<e.length?{found:!0,count:e.length,positions:e.map(function(e){return e.index})}:{found:!1,count:0,positions:[]}},findKeyphraseInAltTag:function(t,a){var n=t.length,o=0;return a=a.trim().toLowerCase(),t.each(function(){var t=e(this).attr("alt");t&&t.toLowerCase().includes(a)&&o++}),{percentage:100*(o/n),imagesWithKeyphrase:o}},findKeyphraseDensity:function(e,t){t=t.trim().toLowerCase();var a=e.trim().split(/\s+/).length,t=new RegExp("\\b"+t+"\\b","gi");return{keyphraseOccurrences:e.match(t)||[],advisedMinOccurrences:Math.ceil(.005*a),advisedMaxOccurrences:Math.ceil(.03*a)}},getParagraphs:function(t){var t=t.find("p"),a=[".vc_ui-help-block"];return t=(t=(t=t.filter(function(t,n){var o=e(n);return!a.some(function(e){return o.is(e)})})).filter(function(t,a){return 0<e(a).text().trim().length})).filter(function(t,a){return 1!==e(a).contents().length||1!==e(a).children("a").length})},getSentences:function(e){return e.split(/(?<!\w\.\w.)(?<![A-Z][a-z]\.)(?<=\.|\?)\s/)},hasConsecutiveSentences:function(e){for(var t=this.getSentences(e),a=1,n=1;n<t.length;n++)if(!(t[n].split(" ")[0]===t[n-1].split(" ")[0]))a=1;else if(3<=++a)return{consecutiveCount:a,state:!0};return{consecutiveCount:a,state:!1}},getPassiveVoicePercentage:function(t){var a=0,n=0,o;return t.length&&(o=this,t.each(function(t,i){i=o.getSentences(e(i).text()),a+=i.length,i.forEach(function(e){o.hasPassiveVoice(e)&&n++})})),(a?100*(n/a):0).toFixed(2)},hasPassiveVoice:function(e){return /\b(am|are|is|was|were|been|being)\s+[^.!?]*\b(by)\b/.test(e)},getWordsCount:function(e){return e=e.split(/\s/g),(e=(e=e.reduce(function(e,t){return t=t.replace(/([ \–\-\(\)_\[\]’‘“”〝〞〟‟„"'.?!:;,¿¡«»‹›—×+&۔؟،؛。｡！‼？⁇⁉⁈‥…・ー、〃〄〆〇〈〉《》「」『』【】〒〓〔〕〖〗〘〙〚〛〜〝〞〟〠〶〼〽｛｝｜～｟｠｢｣､［］･￥＄％＠＆＇（）＊／：；＜＞＼\<>])/g," $1 "),e.concat(t.split(" "))},[])).filter(function(e){return""!==e.trim()})).length},getTextSectionCount:function(e){var e=new DOMParser().parseFromString(e,"text/html").body.childNodes,t=[];return e.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&(e=function(e){var t=e.querySelectorAll("p"),a=0,e=function(e){return e.querySelectorAll("h1, h2, h3, h4, h5, h6").length}(e);return t.forEach(function(e){return a+=(e.textContent||"").trim().split(/\s+/).length}),{wordCount:a,subheadingCount:e}}(e),t.push(e))}),t}}}(window.jQuery),window.vc||(window.vc={}),function(e){"use strict";var t=Backbone.Model.extend({defaults:{formData:{keyphrase:"",title:"",description:"",slug:"",isUsedKeyphrase:""},results:[]},setResults:function(t,a,n){var o=this.get(n),i,s;"focus-keyphrase"===a&&(a="keyphrase",t)&&t!==this.get(n).keyphrase&&(i=this,s={action:"wpb_seo_check_key_phrase",key_phrase:t,post_id:window.vc_post_id,_vcnonce:window.vcAdminNonce},e.ajax({type:"POST",url:window.ajaxurl,data:s}).done(function(e){e.success&&(o.isUsedKeyphrase=e.data,i.set(n,o),i.trigger("formData","change",o))}).fail(function(e){console.error("Failed to get the previously used keyphrase response: "+e)})),o[a]=t,this.set(n,o),"formData"===n&&this.trigger("formData","change",o)},updateResult:function(e,t,a){var n={state:e,title:t,description:a},e=this.get("results").slice(),t=e.findIndex(function(e){return e.title===n.title});-1===t?(e.push(n),this.trigger("resultChanged","add",n)):(e[t]=n,this.trigger("resultChanged","update",n)),this.set("results",e)},resetResult:function(e){var t=this.get("results").filter(function(t){return t.title!==e});this.set("results",t)}});vc.seo_storage=new t}(window.jQuery),window.vc||(window.vc={}),function(e){"use strict";var t=vc.seo_utils,a={focusKeyphrase:{title:i18nLocale.focusKeywordTitle,checkMethod:"checkFocusKeyphrase",conditions:[]},descriptionLength:{title:i18nLocale.seoDescription,checkMethod:"checkDescriptionLength",conditions:[]},titleWidth:{title:i18nLocale.seoTitle,checkMethod:"checkTitleWidth",conditions:[]},postTextLength:{title:i18nLocale.textLength,checkMethod:"checkPostTextLength",conditions:[]},images:{title:i18nLocale.images,checkMethod:"checkImages",conditions:["content"]},inboundLinks:{title:i18nLocale.internalLinks,checkMethod:"checkInboundLinks",conditions:["content"]},outboundLinks:{title:i18nLocale.outboundLinks,checkMethod:"checkOutboundLinks",conditions:["content"]},consecutiveSentences:{title:i18nLocale.consecutiveSentences,checkMethod:"checkForConsecutiveSentences",conditions:["text","content"]},subheadingDistribution:{title:i18nLocale.subheadingDistribution,checkMethod:"checkSubheadingDistribution",conditions:["text","content"]},paragraphLength:{title:i18nLocale.paragraphLength,checkMethod:"checkParagraphLength",conditions:["text","content"]},passiveVoicePercentage:{title:i18nLocale.passiveVoice,checkMethod:"checkPassiveVoicePercentage",conditions:["text","content"]},checkSentenceLength:{title:i18nLocale.sentenceLength,checkMethod:"checkSentenceLength",conditions:["text","content"]},keyphraseInTitle:{title:i18nLocale.keyphraseInTitleText,checkMethod:"checkKeyphraseInTitle",conditions:["title","keyphrase"]},keyphraseInDescription:{title:i18nLocale.keyphraseInDescriptionText,checkMethod:"checkKeyphraseInDescription",conditions:["description","keyphrase"]},keyphraseInSlug:{title:i18nLocale.keyphraseInSlug,checkMethod:"checkKeyphraseInSlug",conditions:["slug","keyphrase"]},keyphraseInImages:{title:i18nLocale.imageKeyphrase,checkMethod:"checkKeyphraseInImages",conditions:["content","keyphrase","images"]},keyphraseDensity:{title:i18nLocale.keyphraseDensity,checkMethod:"checkKeyphraseDensity",conditions:["content","keyphrase","text"]},keyphraseInIntroduction:{title:i18nLocale.keyphraseInIntroductionText,checkMethod:"checkKeyphraseInIntroduction",conditions:["content","keyphrase","text"]},previouslyUsedKeyphrase:{title:i18nLocale.previouslyUsedKeyphrase,checkMethod:"checkPreviouslyUsedKeyphrase",conditions:["keyphrase"]}};vc.seo_checks={$wpbContentWrapper:null,analyzeContent:function(e){this.$wpbContentWrapper=e;var e=this.$wpbContentWrapper.find(">div:not(#vc_no-content-helper)"),t=e.find("p"),n=e.find("img"),o=vc.seo_storage.get("formData"),i={content:e.length,text:t.length,images:n.length,keyphrase:o.keyphrase,title:o.title,description:o.description,slug:o.slug},s;for(s in a)a[s]&&(function(e){return a[e].conditions.every(function(e){return i[e]})}(s)?this[a[s].checkMethod](a[s].title):vc.seo_storage.resetResult(a[s].title))},checkTitleWidth:function(e){var a="problems",n=i18nLocale.seoTitleWidthTooLong,o=t.measureTextWidth(vc.seo_storage.get("formData").title);o?600>o&&(a="success",n=i18nLocale.goodJob):n=i18nLocale.seoTitleEmpty,vc.seo_storage.updateResult(a,e,n,"results")},checkFocusKeyphrase:function(e){var t="problems",a=i18nLocale.noFocusKeyword;vc.seo_storage.get("formData").keyphrase&&(t="success",a=i18nLocale.goodJob),vc.seo_storage.updateResult(t,e,a,"results")},checkDescriptionLength:function(e){var t="problems",a="";vc.seo_storage.get("formData").description.length?120>vc.seo_storage.get("formData").description.length?(t="warnings",a=i18nLocale.seoDescriptionTooShort):120<vc.seo_storage.get("formData").description.length&&156>=vc.seo_storage.get("formData").description.length?(t="success",a=i18nLocale.wellDone):156<vc.seo_storage.get("formData").description.length&&(t="warnings",a=i18nLocale.seoDescriptionTooLong):a=i18nLocale.seoDescriptionEmpty,vc.seo_storage.updateResult(t,e,a,"results")},checkKeyphraseInTitle:function(e){var a="problems",n=i18nLocale.keyphraseInTitleEmpty.replace("%1$s",vc.seo_storage.get("formData").keyphrase),o=vc.seo_storage.get("formData").title.toLowerCase(),i=vc.seo_storage.get("formData").keyphrase.trim().toLowerCase(),s=t.findKeyphrase(vc.seo_storage.get("formData").title,vc.seo_storage.get("formData").keyphrase),o=0===o.indexOf(i);s.found&&(n=o?(a="success",i18nLocale.goodJob):(a="warnings",i18nLocale.keyphraseInTitleWarn)),vc.seo_storage.updateResult(a,e,n,"results")},checkKeyphraseInDescription:function(e){var a="problems",n=i18nLocale.keyphraseInDescriptionEmpty;t.findKeyphrase(vc.seo_storage.get("formData").description,vc.seo_storage.get("formData").keyphrase).found&&(a="success",n=i18nLocale.keyphraseInDescriptionSuccess),vc.seo_storage.updateResult(a,e,n,"results")},checkKeyphraseInSlug:function(e){var a="warnings",n=i18nLocale.keyphraseInSlugProblem;t.findKeyphraseInSlug(vc.seo_storage.get("formData").slug,vc.seo_storage.get("formData").keyphrase).found&&(a="success",n=i18nLocale.greatWork),vc.seo_storage.updateResult(a,e,n,"results")},checkKeyphraseInImages:function(e){var a="success",n="",o=t.findKeyphraseInAltTag(this.images,vc.seo_storage.get("formData").keyphrase),i=o.percentage,o=o.imagesWithKeyphrase,n=4<this.images.length?30<=i&&70>=i?i18nLocale.goodJob:(70<i?(a="warnings",i18nLocale.imageKeyphraseTooMuch):(a="warnings",i18nLocale.imageKeyphraseNotEnough)).replace("%1$s",this.images.length).replace("%2$s",o):0<o?i18nLocale.goodJob:(a="warnings",i18nLocale.imageKeyphraseMissing);vc.seo_storage.updateResult(a,e,n,"results")},checkKeyphraseDensity:function(e){var a="success",n="",o=t.findKeyphraseDensity(this.textContent,vc.seo_storage.get("formData").keyphrase),i=o.keyphraseOccurrences,s=o.advisedMinOccurrences,o=o.advisedMaxOccurrences,n=i.length<s?(a="problems",i18nLocale.keyphraseDensityNotEnough.replace("%1$s",i.length).replace("%2$s",s)):i.length>=s&&i.length<=o?i18nLocale.keyphraseDensitySuccess.replace("%1$s",i.length):(a="problems",i18nLocale.keyphraseDensityTooMuch.replace("%1$s",i.length).replace("%2$s",o));vc.seo_storage.updateResult(a,e,n,"results")},checkInboundLinks:function(t){var a=[],n=i18nLocale.goodJob,o=i18nLocale.noInternalLinks,i=this.$wpbContentWrapper.find(">div:not(#vc_no-content-helper) a:not([class*='vc_control'])"),s="success";e.each(i,function(e,t){window.location.host===t.host&&a.push(t)}),a.length||(s="problems",n=o),vc.seo_storage.updateResult(s,t,n,"results")},checkOutboundLinks:function(t){var a=[],n=i18nLocale.goodJob,o=i18nLocale.noOutboundLinks,i=this.$wpbContentWrapper.find(">div:not(#vc_no-content-helper) a:not([class*='vc_control'])"),s="success";e.each(i,function(e,t){window.location.host!==t.host&&a.push(t)}),a.length||(s="problems",n=o),vc.seo_storage.updateResult(s,t,n,"results")},checkImages:function(e){var t="problems",a=i18nLocale.noImages,n=this.$wpbContentWrapper.find(">div:not(#vc_no-content-helper) img");(this.images=n).length&&(t="success",a=i18nLocale.goodJob),vc.seo_storage.updateResult(t,e,a,"results")},checkPostTextLength:function(e){var a="problems",n=i18nLocale.textLengthLess,o=this.$wpbContentWrapper.html(),i=t.getTextContent(o),i=(this.textContent=i).split(/\s+/).length;200>(i=1===i&&""===t.getTextContent(o).split(/\s+/)[0]?0:i)?n=n.replace("%1$s",i).replace("%2$s","far below"):200<=i&&250>i?n=n.replace("%1$s",i).replace("%2$s","below"):250<=i&&300>i?(n=n.replace("%1$s",i).replace("%2$s","slightly below"),a="warnings"):300<=i&&(n=window.sprintf(i18nLocale.textLengthSuccess,i),a="success"),vc.seo_storage.updateResult(a,e,n,"results")},checkKeyphraseInIntroduction:function(e){var a="problems",n=i18nLocale.keyphraseInIntroductionEmpty,o=t.getParagraphs(this.$wpbContentWrapper).first().text();t.findKeyphrase(o,vc.seo_storage.get("formData").keyphrase).found&&(a="success",n=i18nLocale.wellDone),vc.seo_storage.updateResult(a,e,n,"results")},checkPassiveVoicePercentage:function(e){var a=t.getParagraphs(this.$wpbContentWrapper),a=t.getPassiveVoicePercentage(a),n="problems",o=window.sprintf(i18nLocale.passiveVoiceError,a+"%");10>a&&(n="success",o=i18nLocale.passiveVoiceSuccess),vc.seo_storage.updateResult(n,e,o,"results")},checkForConsecutiveSentences:function(e){var a=t.hasConsecutiveSentences(this.textContent),n=a.state?"problems":"success",o=i18nLocale.consecutiveSentencesSuccess;a.state&&(o=i18nLocale.consecutiveSentencesFail.replace("%1$s",a.consecutiveCount)),vc.seo_storage.updateResult(n,e,o,"results")},checkParagraphLength:function(a){var n="success",o=i18nLocale.paragraphLengthSuccess,i=t.getParagraphs(this.$wpbContentWrapper),s=0;i.each(function(a,n){n=e(n).text(),150<t.getWordsCount(n)&&s++}),0<s&&(o=window.sprintf(i18nLocale.paragraphLengthError,s),n="problems"),vc.seo_storage.updateResult(n,a,o,"results")},checkSentenceLength:function(a){var n="success",o=i18nLocale.great,i=t.getParagraphs(this.$wpbContentWrapper),s=0,l=0,i=(i.each(function(a,n){n=t.getSentences(e(n).text()),s+=n.length,n.forEach(function(e){20<t.getWordsCount(e)&&l++})}),100*(l/s));1!==s&&25<i&&(o=window.sprintf(i18nLocale.sentenceLengthError,i.toFixed()),n="problems"),vc.seo_storage.updateResult(n,a,o,"results")},checkSubheadingDistribution:function(e){var a=this.$wpbContentWrapper.html(),a=t.getTextSectionCount(a),n="success",o=i18nLocale.goodJob,i=a.filter(function(e){return!e.subheadingCount&&300<e.wordCount}),a=a.filter(function(e){return 1===e.subheadingCount&&300<e.wordCount});i.length?(n="problems",o=i18nLocale.subheadingDistributionFail):a.length&&(n="warnings",o=i18nLocale.subheadingDistributionWarn.replace("%s",a.length)),vc.seo_storage.updateResult(n,e,o,"results")},checkPreviouslyUsedKeyphrase:function(e){var t="success",a=i18nLocale.previouslyUsedKeyphraseSuccess;vc.seo_storage.get("formData").isUsedKeyphrase&&(t="warnings",a=i18nLocale.previouslyUsedKeyphraseWarn),vc.seo_storage.updateResult(t,e,a,"results")}}}(window.jQuery),function(t){"use strict";_.isUndefined(window.vc)&&(window.vc={}),t.ajaxSetup({beforeSend:function(e,t){"script"===t.dataType&&!0===t.cache&&(t.cache=!1),"script"===t.dataType&&!1===t.async&&(t.async=!0)}}),vc.showSpinner=function(){t("#vc_logo").addClass("vc_ui-wp-spinner")},vc.hideSpinner=function(){t("#vc_logo").removeClass("vc_ui-wp-spinner")},t(document).ajaxSend(function(t,e,a){a&&a.data&&"string"==typeof a.data&&a.data.match(/vc_inline=true/)&&vc.showSpinner()}).ajaxStop(function(){vc.hideSpinner()}),vc.active_panel=!1,vc.closeActivePanel=function(e){return!!this.active_panel&&void((e&&vc.active_panel.model&&vc.active_panel.model.get("id")===e.get("id")||!e)&&(vc.active_panel.model=null,this.active_panel.hide()))},vc.activePanelName=function(){return this.active_panel&&this.active_panel.panelName?this.active_panel.panelName:null},vc.updateSettingsBadge=function(){var e=t("#vc_post-settings-badge");vc.isShowBadge()?e.show():e.hide()},vc.isShowBadge=function(){var e=!1;return["css","js_header","js_footer"].forEach(function(t){t=vc["$custom_"+t].val(),t&&""!==t.trim()&&(e=!0)}),e},vc.ModalView=Backbone.View.extend({message_box_timeout:!1,events:{"hidden.bs.modal":"hide","shown.bs.modal":"shown"},initialize:function(){_.bindAll(this,"setSize","hide")},setSize:function(){var e=t(window).height()-150;this.$content.css("maxHeight",e),this.trigger("setSize")},render:function(){return t(window).on("resize.ModalView",this.setSize),this.setSize(),vc.closeActivePanel(),this.$el.modal("show"),this},showMessage:function(e,a){this.message_box_timeout&&this.$el.find(".vc_message").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var n=t("<div class=\"vc_message type-"+a+"\"></div>");this.$el.find(".vc_modal-body").prepend(n),n.text(e).fadeIn(),this.message_box_timeout=window.setTimeout(function(){n.remove()},6e3)},hide:function(){t(window).off("resize.ModalView")},shown:function(){}}),vc.element_start_index=0,vc.AddElementBlockView=vc.ModalView.extend({el:t("#vc_add-element-dialog"),prepend:!1,builder:"",events:{"click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","hidden.bs.modal":"hide","show.bs.modal":"buildFiltering","click .wpb-content-layouts-container [data-filter]":"filterElements","shown.bs.modal":"shown"},buildFiltering:function(){this.do_render=!1,n="[data-vc-ui-element=\"add-element-button\"]",o=this.model?this.model.get("shortcode"):"vc_column",i=this._getNotIn(o),t("#vc_elements_name_filter").val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*");var e=vc.getMapped(o),a=o&&!_.isUndefined(e.as_parent)&&e.as_parent,n,o,i,s;_.isObject(a)?(s=[],_.isString(a.only)&&s.push(_.reduce(a.only.replace(/\s/,"").split(","),function(e,t){return e+(_.isEmpty(e)?"":",")+"[data-element=\""+t.trim()+"\"]"},"")),_.isString(a.except)&&s.push(_.reduce(a.except.replace(/\s/,"").split(","),function(e,t){return e+":not([data-element=\""+t.trim()+"\"])"},"")),n+=s.join(",")):i&&(n=i),o&&!_.isUndefined(e.allowed_container_element)&&(e.allowed_container_element?_.isString(e.allowed_container_element)&&(n+=":not([data-is-container=true]), [data-element="+e.allowed_container_element+"]"):n+=":not([data-is-container=true])"),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),t(n,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){this.$el.find(".vc_filter-content-elements .active").removeClass("active"),this.$el.find(".vc_filter-content-elements > :first").addClass("active");var e=this;this.$el.find("[data-filter]").each(function(){t(t(this).data("filter")+".vc_visible:not(.vc_inappropriate)",e.$content).length?t(this).parent().show():t(this).parent().hide()})},render:function(e,a){return this.builder=new vc.ShortcodesBuilder,this.prepend=!!_.isBoolean(a)&&a,this.place_after_id=!!_.isString(a)&&a,this.model=!!_.isObject(e)&&e,this.$content=this.$el.find("[data-vc-ui-element=\"panel-add-element-list\"]"),this.$buttons=t("[data-vc-ui-element=\"add-element-button\"]",this.$content),this.preventDoubleExecution=!1,vc.AddElementBlockView.__super__.render.call(this)},hide:function(){this.do_render&&(this.show_settings&&this.showEditForm(),this.exit())},showEditForm:function(){vc.edit_element_block_view.render(this.builder.last())},exit:function(){this.builder.render()},createElement:function(a){var n,o,s;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0,this.do_render=!0,a.preventDefault(),a=t(a.currentTarget).data("tag"),l={},!(n={width:"1/1"})===this.model&&"vc_row"!==a?(this.builder.create({shortcode:"vc_row",params:{}}).create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:n}),this.model=this.builder.last()):!1!==this.model&&"vc_row"===a&&(a+="_inner");var l={shortcode:a,parent_id:!!this.model&&this.model.get("id"),params:"vc_row_inner"===a?l:{}};for(this.prepend?(l.order=0,(r=vc.shortcodes.findWhere({parent_id:this.model.get("id")}))&&(l.order=r.get("order")-1),vc.activity="prepend"):this.place_after_id&&(l.place_after_id=this.place_after_id),this.builder.create(l),s=this.builder.models.length-1;0<=s;s--)this.builder.models[s].get("shortcode");"vc_row"===a?this.builder.create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:n}):"vc_row_inner"===a&&(n={width:"1/1"},this.builder.create({shortcode:"vc_column_inner",parent_id:this.builder.lastID(),params:n}));var r=vc.getMapped(a);_.isString(r.default_content)&&r.default_content.length&&(l=this.builder.parse({},r.default_content,this.builder.last().toJSON()),_.each(l,function(e){e.default_content=!0,this.builder.create(e)},this)),this.show_settings=!(_.isBoolean(r.show_settings_on_create)&&!1===r.show_settings_on_create),(o=this).$el.one("hidden.bs.modal",function(){o.preventDoubleExecution=!1}).modal("hide")}},_getNotIn:_.memoize(function(e){return"[data-vc-ui-element=\"add-element-button\"]:not("+_.reduce(vc.map,function(t,a){var n=_.isEmpty(t)?"":",";return _.isObject(a.as_child)?(_.isString(a.as_child.only)&&!_.contains(a.as_child.only.replace(/\s/,"").split(","),e)&&(t+=n+"[data-element="+a.base+"]"),_.isString(a.as_child.except)&&_.contains(a.as_child.except.replace(/\s/,"").split(","),e)&&(t+=n+"[data-element="+a.base+"]")):!1===a.as_child&&(t+=n+"[data-element="+a.base+"]"),t},"")+")"}),filterElements:function(a){a.stopPropagation(),a.preventDefault();var a=t(a.currentTarget),n="[data-vc-ui-element=\"add-element-button\"]",o=t("#vc_elements_name_filter").val();this.$content.removeClass("vc_filter-all"),a.is("[data-filter]")?(t(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),a.parent().addClass("active"),n+=a=a.data("filter"),"*"===a?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",a.replace(".js-category-","")),t("#vc_elements_name_filter").val("")):0<o.length?(n+=":containsi('"+o+"'):not('.vc_element-deprecated')",t(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),this.$content.attr("data-vc-ui-filter","name:"+o)):o.length||(t(".wpb-content-layouts-container .isotope-filter [data-filter=\"*\"]").parent().addClass("active"),this.$content.attr("data-vc-ui-filter","*"),this.$content.addClass("vc_filter-all")),t(".vc_visible",this.$content).removeClass("vc_visible"),t(n,this.$content).addClass("vc_visible")},shown:function(){vc.is_mobile||t("#vc_elements_name_filter").trigger("focus")}}),vc.AddElementBlockViewBackendEditor=vc.AddElementBlockView.extend({render:function(e,a){return this.prepend=!!_.isBoolean(a)&&a,this.place_after_id=!!_.isString(a)&&a,this.model=!!_.isObject(e)&&e,this.$content=this.$el.find("[data-vc-ui-element=\"panel-add-element-list\"]"),this.$buttons=t("[data-vc-ui-element=\"add-element-button\"]",this.$content),vc.AddElementBlockView.__super__.render.call(this)},createElement:function(a){var n,o,i;this.preventDoubleExecution||(this.preventDoubleExecution=!0,a&&a.preventDefault&&a.preventDefault(),this.do_render=!0,a=t(a.currentTarget).data("tag"),i=!(i={width:"1/1"})===this.model?(o=vc.shortcodes.create({shortcode:"vc_row",params:{}}),i=vc.shortcodes.create({shortcode:"vc_column",params:i,parent_id:o.id,root_id:o.id}),"vc_row"===a?o:vc.shortcodes.create({shortcode:a,parent_id:i.id,root_id:o.id})):"vc_row"===a?(i={width:"1/1"},o=vc.shortcodes.create({shortcode:"vc_row_inner",params:{},parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column_inner",params:i,parent_id:o.id,root_id:o.id})):vc.shortcodes.create({shortcode:a,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")}),this.show_settings=!(_.isBoolean(vc.getMapped(a).show_settings_on_create)&&!1===vc.getMapped(a).show_settings_on_create),this.model=i,this.model.get("shortcode"),(n=this).$el.one("hidden.bs.modal",function(){n.preventDoubleExecution=!1}).modal("hide"))},showEditForm:function(){vc.edit_element_block_view.render(this.model)},exit:function(){},getFirstPositionIndex:function(){return--vc.element_start_index,vc.element_start_index}}),vc.PanelView=vc.View.extend({mediaSizeClassPrefix:"vc_media-",customMediaQuery:!0,panelName:"panel",draggable:!1,$body:!1,$tabs:!1,$content:!1,events:{"click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_panel-tabs-link":"changeTab"},_vcUIEventsHooks:[{resize:"setResize"}],options:{startTab:0},clicked:!1,showMessageDisabled:!0,initialize:function(){this.clicked=!1,this.$el.removeClass("vc_panel-opacity"),this.$body=t("body"),this.$content=this.$el.find(".vc_panel-body"),_.bindAll(this,"setSize","fixElContainment","changeTab","setTabsSize"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this)},toggleOpacity:function(){this.clicked=!this.clicked},addOpacity:function(){this.clicked||this.$el.addClass("vc_panel-opacity")},removeOpacity:function(){this.clicked||this.$el.removeClass("vc_panel-opacity")},message_box_timeout:!1,init:function(){},render:function(){return this.trigger("render"),this.trigger("afterRender"),this},show:function(){var e;this.$el.hasClass("vc_active")||(vc.closeActivePanel(),this.init(),(vc.active_panel=this).clicked=!1,this.$el.removeClass("vc_panel-opacity"),(e=this.$el.find(".vc_panel-tabs")).length&&(this.$tabs=e,this.setTabs()),this.$el.addClass("vc_active"),this.draggable?this.initDraggable():t(window).trigger("resize"),this.fixElContainment(),this.trigger("show"))},hide:function(t){t&&t.preventDefault&&t.preventDefault(),this.model&&(this.model=null),vc.active_panel=!1,this.$el.removeClass("vc_active")},content:function(){return this.$el.find(".panel-body")},setResize:function(){this.customMediaQuery&&this.setMediaSizeClass()},setMediaSizeClass:function(){var e=this.$el.width(),t={xs:!0,sm:!1,md:!1,lg:!1};525<=e&&(t.sm=!0),745<=e&&(t.md=!0),945<=e&&(t.lg=!0),_.each(t,function(e,t){e?this.$el.addClass(this.mediaSizeClassPrefix+t):this.$el.removeClass(this.mediaSizeClassPrefix+t)},this)},fixElContainment:function(){this.$body||(this.$body=t("body"));var e=[20-this.$el.width(),0,this.$body.width()-20,this.$body.height()-30],a=this.$el.position(),n={};a.left<e[0]&&(n.left=e[0]),0>a.top&&(n.top=0),a.left>e[2]&&(n.left=e[2]),a.top>e[3]&&(n.top=e[3]),this.$el.css(n),this.trigger("fixElContainment"),this.setSize()},initDraggable:function(){this.$el.draggable({iframeFix:!0,handle:".vc_panel-heading",start:this.fixElContainment,stop:this.fixElContainment}),this.draggable=!0},setSize:function(){this.trigger("setSize")},setTabs:function(){this.$tabs.length&&(this.$tabs.find(".vc_panel-tabs-control").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),this.$tabs.find(".vc_panel-tab").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabs&&this.$tabs.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabs.find(".vc_panel-tabs-menu").outerHeight())},changeTab:function(a){a&&a.preventDefault&&a.preventDefault(),a.target&&this.$tabs&&(a=t(a.target),this.$tabs.find(".vc_active").removeClass("vc_active"),a.parent().addClass("vc_active"),this.$el.find(a.data("target")).addClass("vc_active"),window.setTimeout(this.setTabsSize,100))},showMessage:function(e,a){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find(".vc_panel-message").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var n=t("<div class=\"vc_panel-message type-"+a+"\"></div>").appendTo(this.$el.find(".vc_ui-panel-content-container"));n.text(e).fadeIn(),this.message_box_timeout=window.setTimeout(function(){n.remove()},6e3)},isVisible:function(){return this.$el.is(":visible")},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")}}),vc.PostSettingsPanelView=vc.PanelView.extend({events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity"},saved_css_data:"",saved_js_header_data:"",saved_js_footer_data:"",saved_title:"",$title:!1,editor_css:!1,editor_js_header:!1,editor_js_footer:!1,post_settings_editor:!1,initialize:function(){vc.$custom_css=t("#vc_post-custom-css"),vc.$custom_js_header=t("#vc_post-custom-js-header"),vc.$custom_js_footer=t("#vc_post-custom-js-footer"),this.saved_css_data=vc.$custom_css.val(),this.saved_js_header_data=vc.$custom_js_header.val(),this.saved_js_footer_data=vc.$custom_js_footer.val(),this.saved_title=vc.title,this.initEditor(),this.$body=t("body"),_.bindAll(this,"setSize","fixElContainment"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this)},initEditor:function(){this.editor_css=new Vc_postSettingsEditor,this.editor_css.sel="wpb_css_editor",this.editor_css.mode="css",this.editor_css.is_focused=!0,this.editor_js_header=new Vc_postSettingsEditor,this.editor_js_header.sel="wpb_js_header_editor",this.editor_js_header.mode="javascript",this.editor_js_footer=new Vc_postSettingsEditor,this.editor_js_footer.sel="wpb_js_footer_editor",this.editor_js_footer.mode="javascript"},render:function(){return this.trigger("render"),this.$title=this.$el.find("#vc_page-title-field"),this.$title.val(vc.title),this.setEditor(),this.trigger("afterRender"),this},setEditor:function(){this.editor_css.setEditor(vc.$custom_css.val()),this.editor_js_header.setEditor(vc.$custom_js_header.val()),this.editor_js_footer.setEditor(vc.$custom_js_footer.val())},setSize:function(){this.editor_css.setSize(),this.editor_js_header.setSize(),this.editor_js_footer.setSize(),this.trigger("setSize")},save:function(){var e;this.$title&&(e=this.$title.val())!==vc.title&&vc.frame.setTitle(e),this.setAlertOnDataChange(),vc.$custom_css.val(this.editor_css.getValue()),vc.$custom_js_header.val(this.editor_js_header.getValue()),vc.$custom_js_footer.val(this.editor_js_footer.getValue()),vc.frame_window&&(vc.frame_window.vc_iframe.loadCustomCss(vc.$custom_css.val()),vc.frame_window.vc_iframe.loadCustomJsHeader(vc.$custom_js_header.val()),vc.frame_window.vc_iframe.loadCustomJsFooter(vc.$custom_js_footer.val())),vc.updateSettingsBadge(),this.showMessage(window.i18nLocale.page_settings_updated,"success"),this.trigger("save")},setAlertOnDataChange:function(){0<=[this.saved_css_data!==this.editor_css.getValue(),this.saved_js_header_data!==this.editor_js_header.getValue(),this.saved_js_footer_data!==this.editor_js_footer.getValue(),this.$title&&this.saved_title!==this.$title.val()].indexOf(!0)&&vc.setDataChanged()}}),vc.PostSettingsSeoUIPanelView=vc.PanelView.extend({save:function(){for(var e=t("#vc_setting-seo-form").serializeArray(),a={},n=0;n<e.length;n++)a[e[n].name]=e[n].value;t("#vc_post-custom-seo-settings").val(JSON.stringify(a)),this.trigger("save"),this.hide()}}),vc.PostSettingsPanelViewBackendEditor=vc.PostSettingsPanelView.extend({render:function(){return this.trigger("render"),this.setEditor(),this.trigger("afterRender"),this},setAlertOnDataChange:function(){vc.saved_custom_css!==this.editor_css.getValue()&&window.tinymce&&(window.switchEditors.go("content","tmce"),window.setTimeout(function(){window.tinymce.get("content").isNotDirty=!1},1e3))},save:function(){vc.PostSettingsPanelViewBackendEditor.__super__.save.call(this),vc.storage.isChanged=!0,this.hide()}}),vc.TemplatesEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .wpb_remove_template":"removeTemplate","click [data-template_id]":"loadTemplate","click [data-template_name]":"loadDefaultTemplate","click #vc_template-save":"saveTemplate"},render:function(){this.trigger("render"),this.$name=t("#vc_template-name"),this.$list=t("#vc_template-list");var a=t("#vc_tabs-templates");return a.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),a.find("[data-vc-ui-element=\"panel-edit-element-tab\"]").removeClass("vc_active").eq(0).addClass("vc_active"),a.find(".vc_edit-form-link").on("click",function(n){n.preventDefault(),n=t(this),a.find(".vc_active").removeClass("vc_active"),n.parent().addClass("vc_active"),t(n.attr("href")).addClass("vc_active")}),this.trigger("afterRender"),this},removeTemplate:function(a){a&&a.preventDefault&&a.preventDefault();var a=t(a.currentTarget),n=a.closest("[data-vc-ui-element=\"template-title\"]").text();confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",n))&&(a.closest("[data-vc-ui-element=\"template\"]").remove(),this.$list.html(window.i18nLocale.loading),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_delete_template",template_id:a.attr("rel"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(e){this.$list.html(e)}))},loadTemplate:function(a){a&&a.preventDefault&&a.preventDefault(),a=t(a.currentTarget),t.ajax({type:"POST",url:vc.frame_window.location.href,data:{action:"vc_frontend_template",template_id:a.data("template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(e){var a,n;_.each(t(e),function(e){if("vc_template-data"===e.id)try{n=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("loadTemplate json error",e)}"vc_template-html"===e.id&&(a=e.innerHTML)}),a&&n&&vc.builder.buildFromTemplate(a,n),this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()})},ajaxData:function(e){return{action:"vc_frontend_default_template",template_name:e.data("template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadDefaultTemplate:function(a){a&&a.preventDefault&&a.preventDefault(),a=t(a.currentTarget),t.ajax({type:"POST",url:vc.frame_window.location.href,data:this.ajaxData(a),context:this}).done(function(e){var a,n;_.each(t(e),function(e){if("vc_template-data"===e.id)try{n=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("loadDefaultTemplate json error",e)}"vc_template-html"===e.id&&(a=e.innerHTML)}),a&&n&&vc.builder.buildFromTemplate(a,n),this.showMessage(window.i18nLocale.template_added,"success")})},saveTemplate:function(t){t&&t.preventDefault&&t.preventDefault();var t=this.$name.val(),a;if(_.isString(t)&&t.length){if(!(a=this.getPostContent()).trim().length)return this.showMessage(window.i18nLocale.template_is_empty,"error"),!1;a={action:"wpb_save_template",template:a,template_name:t,frontend:!0,vc_inline:!0,_vcnonce:window.vcAdminNonce},this.$name.val(""),this.showMessage(window.i18nLocale.template_save,"success"),this.reloadTemplateList(a)}else this.showMessage(window.i18nLocale.please_enter_templates_name,"error")},reloadTemplateList:function(e){this.$list.html(window.i18nLocale.loading).load(window.ajaxurl,e)},getPostContent:function(){return vc.builder.getContent()}}),vc.TemplatesEditorPanelViewBackendEditor=vc.TemplatesEditorPanelView.extend({ajaxData:function(e){return{action:"vc_backend_template",template_id:e.attr("data-template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadTemplate:function(a){a&&a.preventDefault&&a.preventDefault(),a=t(a.currentTarget),t.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(a),context:this}).done(function(e){_.each(vc.filters.templates,function(t){e=t(e)}),vc.storage.append(e),vc.shortcodes.fetch({reset:!0}),vc.closeActivePanel()})},loadDefaultTemplate:function(a){a&&a.preventDefault&&a.preventDefault(),a=t(a.currentTarget),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_backend_default_template",template_name:a.attr("data-template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(e){_.each(vc.filters.templates,function(t){e=t(e)}),vc.storage.append(e),vc.shortcodes.fetch({reset:!0})})},getPostContent:function(){return vc.storage.getContent()}}),vc.TemplatesPanelViewBackend=vc.PanelView.extend({$name:!1,$list:!1,template_load_action:"vc_backend_load_template",templateLoadPreviewAction:"vc_load_template_preview",save_template_action:"vc_save_template",delete_template_action:"vc_delete_template",appendedTemplateType:"my_templates",appendedTemplateCategory:"my_templates",appendedCategory:"my_templates",appendedClass:"my_templates",loadUrl:window.ajaxurl,events:t.extend(vc.PanelView.prototype.events,{"click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate","click .vc_template-delete-icon":"removeTemplate"}),initialize:function(){_.bindAll(this,"checkInput","saveTemplate"),vc.TemplatesPanelViewBackend.__super__.initialize.call(this)},render:function(){return this.$el.css("left",(t(window).width()-this.$el.width())/2),this.$name=this.$el.find("[data-js-element=\"vc-templates-input\"]"),this.$name.off("keypress").on("keypress",this.checkInput),this.$list=this.$el.find(".vc_templates-list-my_templates"),vc.TemplatesPanelViewBackend.__super__.render.call(this)},saveTemplate:function(t){var a,n;return t&&t.preventDefault&&t.preventDefault(),t=this.$name.val(),n=this,_.isString(t)&&t.length?(a=this.getPostContent()).trim().length?(a={action:this.save_template_action,template:a,template_name:t,vc_inline:!0,_vcnonce:window.vcAdminNonce},void this.setButtonMessage(void 0,void 0,!0).reloadTemplateList(a,function(){n.$name.val("").trigger("change")},function(){n.showMessage(window.i18nLocale.template_save_error,"error"),n.clearButtonMessage()})):(this.showMessage(window.i18nLocale.template_is_empty,"error"),!1):(this.showMessage(window.i18nLocale.please_enter_templates_name,"error"),!1)},checkInput:function(t){if(13===t.which)return this.saveTemplate(),!1},removeTemplate:function(a){a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation();var a=t(a.target).closest("[data-template_id]"),n=a.find("[data-vc-ui-element=\"template-title\"]").text(),o,i;confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",n))&&(o=a.data("template_id"),i=a.data("template_type"),n=a.data("template_action"),a.remove(),t.ajax({type:"POST",url:window.ajaxurl,data:{action:n||this.delete_template_action,template_id:o,template_type:i,vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(function(){this.showMessage(window.i18nLocale.template_removed,"success"),vc.events.trigger("templates:delete",{id:o,type:i})}))},reloadTemplateList:function(e,a,n){var o=this;t.ajax({type:"POST",url:window.ajaxurl,data:e,context:this}).done(function(e){o.filter=!1,o.$list||(o.$list=o.$el.find(".vc_templates-list-my_templates")),o.$list.prepend(t(e)),"function"==typeof a&&a(e)}).fail("function"==typeof n?n:function(){})},getPostContent:function(){return vc.shortcodes.stringify("template")},loadTemplate:function(a){a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),a=t(a.target).closest("[data-template_id][data-template_type]"),t.ajax({type:"POST",url:this.loadUrl,data:{action:this.template_load_action,template_unique_id:a.data("template_id"),template_type:a.data("template_type"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(this.renderTemplate)},renderTemplate:function(e){var t;_.each(vc.filters.templates,function(t){e=t(e)}),t=vc.storage.parseContent({},e),_.each(t,function(e){vc.shortcodes.create(e)}),vc.closeActivePanel()},buildTemplatePreview:function(a){a&&a.preventDefault&&a.preventDefault();try{var e=t(a.currentTarget),n=e.closest("[data-template_id]"),o;if(n.hasClass("vc_active")||n.hasClass("vc_loading"))e.vcAccordion("collapseTemplate");else{var i=n.find("[data-js-content]"),s=0<i.children().length;if(this.$content=i,this.$content.find("iframe").length)return e.vcAccordion("collapseTemplate"),!0;var l=this;e.vcAccordion("collapseTemplate",function(){var a=n.data("template_id"),i=n.data("template_type"),r;a&&!s&&(r="?",-1<window.ajaxurl.indexOf("?")&&(r="&"),o=window.ajaxurl+r+t.param({action:l.templateLoadPreviewAction,template_unique_id:a,template_type:i,vc_inline:!0,post_id:vc_post_id,_vcnonce:window.vcAdminNonce}),e.find("i").addClass("vc_ui-wp-spinner"),l.$content.html("<iframe style=\"width: 100%;\" data-vc-template-preview-frame=\""+a+"\"></iframe>"),(r=l.$content.find("[data-vc-template-preview-frame]")).attr("src",o),n.addClass("vc_loading"),r.on("load",function(){n.removeClass("vc_loading"),e.find("i").removeClass("vc_ui-wp-spinner")}))})}}catch(e){window.console&&window.console.warn&&window.console.warn("buildTemplatePreview error",e),this.showMessage("Failed to build preview","error")}},setTemplatePreviewSize:function(e){var t=this.$content.find("iframe");0<t.length&&(t=t[0],void 0===e&&(t.height=t.contentWindow.document.body.offsetHeight,e=t.contentWindow.document.body.scrollHeight),t.height=e+"px")}}),vc.TemplatesPanelViewFrontend=vc.TemplatesPanelViewBackend.extend({template_load_action:"vc_frontend_load_template",loadUrl:!1,initialize:function(){this.loadUrl=vc.$frame.attr("src"),vc.TemplatesPanelViewFrontend.__super__.initialize.call(this)},render:function(){return vc.TemplatesPanelViewFrontend.__super__.render.call(this)},renderTemplate:function(e){var a,n;_.each(t(e),function(e){if("vc_template-data"===e.id)try{n=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("renderTemplate error",e)}"vc_template-html"===e.id&&(a=e.innerHTML)}),a&&n&&vc.builder.buildFromTemplate(a,n)?this.showMessage(window.i18nLocale.template_added_with_id,"error"):this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()}}),vc.RowLayoutEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_layout-btn":"setLayout","click #vc_row-layout-update":"updateFromInput"},_builder:!1,render:function(e){return this.$input=t("#vc_row-layout"),e&&(this.model=e),this.addCurrentLayout(),this.resetMinimize(),vc.column_trig_changes=!0,this},builder:function(){return this._builder||(this._builder=new vc.ShortcodesBuilder),this._builder},addCurrentLayout:function(){vc.shortcodes.sort();var e=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){return e=e.getParam("width"),e||"1/1"},"",this).join(" + ");this.$input.val(e)},isBuildComplete:function(){return this.builder().isBuildComplete()},setLayout:function(a){return(a&&a.preventDefault&&a.preventDefault(),!!this.isBuildComplete())&&void(a=t(a.currentTarget).attr("data-cells"),a=this.model.view.convertRowColumns(a,this.builder()),this.$input.val(a.join(" + ")))},updateFromInput:function(t){if(t&&t.preventDefault&&t.preventDefault(),!this.isBuildComplete())return!1;var t=this.$input.val();!1===(t=this.validateCellsList(t))?window.alert(window.i18nLocale.wrong_cells_layout):this.model.view.convertRowColumns(t,this.builder())},validateCellsList:function(e){var t=[],e=e.replace(/\s/g,"").split("+"),a,n,o;return!(1e3<=_.reduce(_.map(e,function(e){var i;return e.match(/^[vc\_]{0,1}span\d{1,2}$/)?!1===(i=vc_convert_column_span_size(e))?1e3:(a=i.split(/\//),t.push(a[0]+""+a[1]),12*parseInt(a[0],10)/parseInt(a[1],10)):!e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)||(a=e.split(/\//),n=parseInt(a[0],10),5!==(o=parseInt(a[1],10))&&0!=12%o)||o<n?1e3:(t.push(n+""+o),5===o?n:12*n/o)}),function(e,t){return t+=e},0))&&t.join("_")}}),vc.RowLayoutEditorPanelViewBackend=vc.RowLayoutEditorPanelView.extend({builder:function(){return this.builder||(this.builder=vc.storage),this.builder},isBuildComplete:function(){return!0},setLayout:function(a){a&&a.preventDefault&&a.preventDefault(),a=t(a.currentTarget).attr("data-cells"),a=this.model.view.convertRowColumns(a),this.$input.val(a.join(" + "))}}),t(window).on("orientationchange",function(){vc.active_panel&&vc.active_panel.$el.css({top:"",left:"auto",height:"auto",width:"auto"})}),t(window).on("resize.fixElContainment",function(){vc.active_panel&&vc.active_panel.fixElContainment&&vc.active_panel.fixElContainment()}),t("body").on("keyup change input","[data-vc-disable-empty]",function(){var e=t(this),a=t(e.data("vcDisableEmpty"));e.val().length?a.prop("disabled",!1):a.prop("disabled",!0)})}(window.jQuery),function(e){"use strict";var t=function(t,a){var n=this;this.options=a,this.$element=e(t),this.$dropdownContainer=this.$element.find(this.options.dropdownContainerSelector),this.$dropdown=this.$dropdownContainer.find(this.options.dropdownSelector),this.options.delayInit?(n.$element.addClass(this.options.initializingClass),setTimeout(function(){n.options.autoRefresh||n.refresh(),n.moveTabs(),n.$element.removeClass(n.options.initializingClass)},n.options.delayInitTime)):(this.options.autoRefresh||this.refresh(),this.moveTabs()),e(window).on("resize",e.proxy(this.moveTabs,this)),this.$dropdownContainer.on("click.vc.tabsLine",e.proxy(this.checkDropdownContainerActive,this))},a,n;t.DEFAULTS={initializingClass:"vc_initializing",delayInit:!1,delayInitTime:1e3,activeClass:"vc_active",visibleClass:"vc_visible",dropdownContainerSelector:"[data-vc-ui-element=\"panel-tabs-line-toggle\"]",dropdownSelector:"[data-vc-ui-element=\"panel-tabs-line-dropdown\"]",tabSelector:">li:not([data-vc-ui-element=\"panel-tabs-line-toggle\"])",dropdownTabSelector:"li",freeSpaceOffset:5,autoRefresh:!1,showDevInfo:!1},t.prototype.refresh=function(){var t=this,a;return t.tabs=[],t.dropdownTabs=[],t.$element.find(t.options.tabSelector).each(function(){t.tabs.push({$tab:e(this),width:e(this).outerWidth()})}),t.$dropdown.find(t.options.dropdownTabSelector).each(function(){var a=e(this).clone().css({visibility:"hidden",position:"fixed"});a.appendTo(t.$element),t.dropdownTabs.push({$tab:e(this),width:a.outerWidth()}),a.remove(),e(this).on("click",t.options.onTabClick)}),"function"==typeof this.options.onTabClick&&(t.tabs.map(a=function(a){void 0===a.$tab.data("tabClickSet")&&(a.$tab.on("click",e.proxy(t.options.onTabClick,a.$tab)),a.$tab.data("tabClickSet",!0))}),t.dropdownTabs.map(a)),this},t.prototype.moveLastToDropdown=function(){var e;return this.tabs.length&&((e=this.tabs.pop()).$tab.prependTo(this.$dropdown),this.dropdownTabs.unshift(e)),this.checkDropdownContainer(),this},t.prototype.moveFirstToContainer=function(){var e;return this.dropdownTabs.length&&((e=this.dropdownTabs.shift()).$tab.appendTo(this.$element),this.tabs.push(e)),this.checkDropdownContainer(),this},t.prototype.getTabsWidth=function(){var e=0;return this.tabs.forEach(function(t){e+=t.width}),e},t.prototype.isDropdownContainerVisible=function(){return this.$dropdownContainer.hasClass(this.options.visibleClass)},t.prototype.getFreeSpace=function(){var e=this.$element.width()-this.getTabsWidth()-this.options.freeSpaceOffset;return this.isDropdownContainerVisible()&&(e-=this.$dropdownContainer.outerWidth(),1===this.dropdownTabs.length)&&0<=e-this.dropdownTabs[0].width+this.$dropdownContainer.outerWidth()&&(e+=this.$dropdownContainer.outerWidth()),e},t.prototype.moveTabsToDropdown=function(){for(var e=this.tabs.length-1;0<=e;e--){if(!(0>this.getFreeSpace()))return this;this.moveLastToDropdown()}return this},t.prototype.moveDropdownToTabs=function(){for(var e=this.dropdownTabs.length,t=0;t<e;t++){if(!(0<=this.getFreeSpace()-this.dropdownTabs[0].width))return this;this.moveFirstToContainer()}return this},t.prototype.showDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.visibleClass),this},t.prototype.hideDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.visibleClass),this},t.prototype.activateDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.activeClass),this},t.prototype.deactivateDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.activeClass),this},t.prototype.checkDropdownContainerActive=function(){return this.$dropdown.find("."+this.options.activeClass+":first").length?this.activateDropdownContainer():this.deactivateDropdownContainer(),this},t.prototype.checkDropdownContainer=function(){return this.dropdownTabs.length?this.showDropdownContainer():this.hideDropdownContainer(),this.checkDropdownContainerActive(),this},t.prototype.moveTabs=function(){return this.options.autoRefresh&&this.refresh(),this.checkDropdownContainer(),this.moveTabsToDropdown(),this.moveDropdownToTabs(),this.options.showDevInfo&&this.showDevInfo(),this},t.prototype.showDevInfo=function(){var t=e("#vc-ui-tabs-line-dev-info");t.length&&(this.$devBlock=t),void 0===this.$devBlock&&(this.$devBlock=e("<div id=\"vc-ui-tabs-line-dev-info\" />").css({position:"fixed",right:"40px",top:"40px",padding:"7px 12px",border:"1px solid rgba(0, 0, 0, 0.2)",background:"rgba(0, 0, 0, 0.7)",color:"#0a0","border-radius":"5px","font-family":"tahoma","font-size":"12px","z-index":1100}),this.$devBlock.appendTo("body")),void 0===this.$devInfo&&(this.$devInfo=e("<div />").css({"margin-bottom":"7px","padding-bottom":"7px","border-bottom":"1px dashed rgba(0, 200, 0, .35)"}),this.$devInfo.appendTo(this.$devBlock)),this.$devInfo.empty(),this.$devInfo.append(e("<div />").text("Tabs count: "+this.tabs.length)),this.$devInfo.append(e("<div />").text("Dropdown count: "+this.dropdownTabs.length)),this.$devInfo.append(e("<div />").text("El width: "+this.$element.width())),this.$devInfo.append(e("<div />").text("Tabs width: "+this.getTabsWidth())),this.$devInfo.append(e("<div />").text("Tabs width with dots: "+(this.getTabsWidth()+this.$dropdownContainer.outerWidth()))),this.$devInfo.append(e("<div />").text("Free space: "+this.getFreeSpace())),this.tabs.length&&this.$devInfo.append(e("<div />").text("Last tab width: "+this.tabs[this.tabs.length-1].width)),this.dropdownTabs.length&&this.$devInfo.append(e("<div />").text("First dropdown tab width: "+this.dropdownTabs[0].width))},n=e.fn.vcTabsLine,e.fn.vcTabsLine=a=function(a){return this.each(function(){var n=e(this),o=n.data("vcUiTabsLine"),i=n.data("vc.tabsLine"),o=e.extend(!0,{},t.DEFAULTS,n.data(),o,"object"==typeof a&&a),s="string"==typeof a?a:o.action;i||n.data("vc.tabsLine",i=new t(this,o)),s&&i[s]()})},e.fn.vcTabsLine.Constructor=t,e.fn.vcTabsLine.noConflict=function(){return e.fn.vcTabsLine=n,this},e(window).on("load",function(){e("[data-vc-ui-tabs-line]").each(function(){var t=e(this);a.call(t,t.data())})})}(window.jQuery),function(){"use strict";window.vc.HelperAjax={ajax:!1,checkAjax:function(){this.ajax&&this.ajax.abort()},resetAjax:function(){this.ajax=!1}}}(),function(){"use strict";window.vc.HelperPrompts={uiEvents:{render:"removeAllPrompts"},removeAllPrompts:function(){this.$el.find(".vc_ui-panel-content-container").removeClass("vc_ui-content-hidden"),this.$el.find(".vc_ui-prompt").remove()}}}(),function(){"use strict";window.vc.HelperPanelViewDraggable={draggable:!0,draggableOptions:{iframeFix:!0,handle:"[data-vc-ui-element=\"panel-heading\"]"},uiEvents:{show:"initDraggable"},initDraggable:function(){this.$el.draggable(_.extend({},this.draggableOptions,{start:this.fixElContainment,stop:this.fixElContainment}))}}}(),function(t){"use strict";window.vc.HelperPanelViewResizable={sizeInitialized:!1,uiEvents:{show:"setSavedSize initResize",tabChange:"setDefaultHeightSettings",afterMinimize:"setupOnMinimize",afterUnminimize:"initResize",fixElContainment:"saveUIPanelSizes"},setDefaultHeightSettings:function(){this.$el.css("height","auto"),this.$el.css("maxHeight","75vh")},initResize:function(){var a=this;this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minHeight:240,minWidth:380,resize:function(){a.trigger("resize")},handles:"n, e, s, w, ne, se, sw, nw",start:function(n,e){a.trigger("beforeResizeStart"),a.$el.css("maxHeight","none"),a.$el.css("height",e.size.height),t("iframe").css("pointerEvents","none"),a.trigger("afterResizeStart")},stop:function(){a.trigger("beforeResizeStop"),t("iframe").css("pointerEvents",""),a.saveUIPanelSizes(),a.trigger("afterResizeStop")}}),this.content().addClass("vc_properties-list-init"),this.trigger("resize")},setSavedSize:function(){if(this.setDefaultHeightSettings(),vc.is_mobile)return!1;var e={width:getUserSetting(this.panelName+"_vcUIPanelWidth"),left:getUserSetting(this.panelName+"_vcUIPanelLeft").replace("minus","-"),top:getUserSetting(this.panelName+"_vcUIPanelTop").replace("minus","-")};_.isEmpty(e.width)||this.$el.width(e.width),_.isEmpty(e.left)||this.$el.css("left",e.left),_.isEmpty(e.top)||this.$el.css("top",e.top),this.sizeInitialized=!0},saveUIPanelSizes:function(){if(!1===this.sizeInitialized)return!1;var e={width:this.$el.width(),left:parseInt(this.$el.css("left"),10),top:parseInt(this.$el.css("top"),10)};setUserSetting(this.panelName+"_vcUIPanelWidth",e.width),setUserSetting(this.panelName+"_vcUIPanelLeft",e.left.toString().replace("-","minus")+"px"),setUserSetting(this.panelName+"_vcUIPanelTop",e.top.toString().replace("-","minus")+"px")},setupOnMinimize:function(){this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minWidth:380,handles:"w, e",start:function(){t("iframe").css("pointerEvents","none")},stop:function(){t("iframe").css("pointerEvents","")}})}}}(window.jQuery),function(t){"use strict";window.vc.HelperTemplatesPanelViewSearch={searchSelector:"[data-vc-templates-name-filter]",events:{"keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate"},uiEvents:{show:"focusToSearch"},focusToSearch:function(){vc.is_mobile||t(this.searchSelector,this.$el).trigger("focus")},searchTemplate:function(a){a=t(a.currentTarget),a.val().length?this.searchByName(a.val()):this.clearSearch()},clearSearch:function(){this.$el.find("[data-vc-templates-name-filter]").val(""),this.$el.find("[data-template_name]").css("display","block"),this.$el.removeAttr("data-vc-template-search"),this.$el.find(".vc-search-result-empty").removeClass("vc-search-result-empty");var e=new jQuery.Event("click");e.isClearSearch=!0,this.$el.find(".vc_panel-tabs-control:first [data-vc-ui-element=\"panel-tab-control\"]").trigger(e)},searchByName:function(e){this.$el.find(".vc_panel-tabs-control.vc_active").removeClass("vc_active"),this.$el.attr("data-vc-template-search","true"),this.$el.find("[data-template_name]").css("display","none"),this.$el.find("[data-template_name*=\""+vc_slugify(e)+"\"]").css("display","block"),this.$el.find("[data-vc-ui-element=\"panel-edit-element-tab\"]").each(function(){var e=t(this);e.removeClass("vc-search-result-empty"),e.find("[data-template_name]:visible").length||e.addClass("vc-search-result-empty")})}}}(window.jQuery),function(t){"use strict";window.vc.HelperPanelViewHeaderFooter={buttonMessageTimeout:!1,events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity"},uiEvents:{save:"setButtonMessage",render:"clearButtonMessage"},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity"),this.$el.removeClass("vc_minimized")},toggleOpacity:function(a){a.preventDefault();var n=this,o=this.$el,i=o.find(o.data("vcPanel")),s=i.closest(i.data("vcPanelContainer")),l=t(a.currentTarget),r;void 0===o.data("vcHasHeight")&&o.data("vcHasHeight",(a=o.attr("style"),r=!1,a&&a.split(";").forEach(function(a){a=a.split(":"),"height"===t.trim(a[0])&&(r=!0)}),r)),o.hasClass("vc_minimized")?(void 0===o.data("vcMinimizeHeight")&&o.data("vcMinimizeHeight",t(window).height()-.2*t(window).height()),o.animate({height:o.data("vcMinimizeHeight")},{duration:400,start:function(){l.prop("disabled",!0),o.addClass("vc_animating"),n.tabsMenu&&n.tabsMenu()&&n.tabsMenu().vcTabsLine("moveTabs")},complete:function(){o.removeClass("vc_minimized"),o.removeClass("vc_animating"),o.data("vcHasHeight")||o.css({height:""}),n.trigger("afterUnminimize"),l.prop("disabled",!1)}})):(o.data("vcMinimizeHeight",o.height()),o.animate({height:i.outerHeight()+s.outerHeight()-s.height()},{duration:400,start:function(){l.prop("disabled",!0),o.addClass("vc_animating")},complete:function(){o.addClass("vc_minimized"),o.removeClass("vc_animating"),o.css({height:""}),n.trigger("afterMinimize"),l.prop("disabled",!1)}}))},setButtonMessage:function(e,t,a){var n;return void 0===a&&(a=!1),this.clearButtonMessage=_.bind(this.clearButtonMessage,this),!a&&!vc.frame_window||this.buttonMessageTimeout||(void 0===e&&(e=window.i18nLocale.ui_saved),void 0===t&&(t="success"),n=(a=this.$el.find("[data-vc-ui-element=\"button-save\"]")).html(),a.addClass("vc_ui-button-"+t+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",n).data("vcCurrentTextType",t).html(e),_.delay(this.clearButtonMessage,5e3),this.buttonMessageTimeout=!0),this},clearButtonMessage:function(){var e,t,a;this.buttonMessageTimeout&&(window.clearTimeout(this.buttonMessageTimeout),t=(a=this.$el.find("[data-vc-ui-element=\"button-save\"]")).data("vcCurrentTextHtml")||"Save",e=a.data("vcCurrentTextType"),a.html(t).removeClass("vc_ui-button-"+e+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.buttonMessageTimeout=!1)}}}(window.jQuery),function(t){"use strict";window.vc.HelperPanelSettingsPostCustomLayout={events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","click .vc_post-custom-layout":"changePostCustomLayout"},changePostCustomLayout:function(a){var n;a&&a.preventDefault&&(a.preventDefault(),n=(a=t(a.currentTarget)).attr("data-post-custom-layout"),a.addClass("vc-active-post-custom-layout"),a.siblings().removeClass("vc-active-post-custom-layout"),t("input[name=vc_post_custom_layout]").val(n))}}}(window.jQuery),function(t){"use strict";window.vc.TemplateWindowUIPanelBackendEditor=vc.TemplatesPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,initialize:function(){window.vc.TemplateWindowUIPanelBackendEditor.__super__.initialize.call(this),this.trigger("show",this.initTemplatesTabs,this)},show:function(){this.clearSearch(),window.vc.TemplateWindowUIPanelBackendEditor.__super__.show.call(this)},initTemplatesTabs:function(){this.$el.find("[data-vc-ui-element=\"panel-tabs-controls\"]").vcTabsLine("moveTabs")},showMessage:function(e,a){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var n=vc.template("<div class=\"vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>\"><div class=\"vc_message_box-icon\"><i class=\"fa fa fa-<%- icon %>\"></i></div><p><%- text %></p></div>"),o;"error"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"danger",icon:"times",text:e})):"warning"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"warning",icon:"exclamation-triangle",text:e})):"success"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"success",icon:"check",text:e})):void 0;o.prependTo(this.$el.find("[data-vc-ui-element=\"panel-edit-element-tab\"].vc_row.vc_active")),o.fadeIn(),this.message_box_timeout=window.setTimeout(function(){o.remove()},6e3)},changeTab:function(a){a&&a.preventDefault&&a.preventDefault(),a&&!a.isClearSearch&&this.clearSearch(),a=t(a.currentTarget),a.parent().hasClass("vc_active")||(this.$el.find("[data-vc-ui-element=\"panel-tabs-controls\"] .vc_active:not([data-vc-ui-element=\"panel-tabs-line-dropdown\"])").removeClass("vc_active"),a.parent().addClass("vc_active"),this.$el.find("[data-vc-ui-element=\"panel-edit-element-tab\"].vc_active").removeClass("vc_active"),this.$el.find(a.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))},setPreviewFrameHeight:function(e,a){100>parseInt(a,10)&&(a=100),t("data-vc-template-preview-frame=\""+e+"\"").height(a)}}),window.vc.TemplateWindowUIPanelBackendEditor.prototype.events=t.extend(!0,window.vc.TemplateWindowUIPanelBackendEditor.prototype.events,{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate","click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate",'click [data-vc-container=".vc_ui-list-bar"][data-vc-preview-handler]':"buildTemplatePreview",'click [data-vc-ui-delete="template-title"]':"removeTemplate",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"}),window.vc.TemplateWindowUIPanelFrontendEditor=vc.TemplatesPanelViewFrontend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,show:function(){this.clearSearch(),window.vc.TemplateWindowUIPanelFrontendEditor.__super__.show.call(this)},showMessage:function(e,a){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var n=vc.template("<div class=\"vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>\"><div class=\"vc_message_box-icon\"><i class=\"fa fa fa-<%- icon %>\"></i></div><p><%- text %></p></div>"),o;"error"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"danger",icon:"times",text:e})):"warning"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"warning",icon:"exclamation-triangle",text:e})):"success"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"success",icon:"check",text:e})):void 0;o.prependTo(this.$el.find("[data-vc-ui-element=\"panel-edit-element-tab\"].vc_row.vc_active")),o.fadeIn(),this.message_box_timeout=window.setTimeout(function(){o.remove()},6e3)},changeTab:function(a){a&&a.preventDefault&&a.preventDefault(),a&&!a.isClearSearch&&this.clearSearch(),a=t(a.currentTarget),a.parent().hasClass("vc_active")||(this.$el.find("[data-vc-ui-element=\"panel-tabs-controls\"] .vc_active:not([data-vc-ui-element=\"panel-tabs-line-dropdown\"])").removeClass("vc_active"),a.parent().addClass("vc_active"),this.$el.find("[data-vc-ui-element=\"panel-edit-element-tab\"].vc_active").removeClass("vc_active"),this.$el.find(a.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))}}),t.fn.vcAccordion.Constructor.prototype.collapseTemplate=function(e){var a=this.$element,n=0,o=this.getContainer().find("[data-vc-preview-handler]").each(function(){var e=t(this),a=e.data("vc.accordion");void 0===a&&(e.vcAccordion(),a=e.data("vc.accordion")),a&&a.setIndex&&a.setIndex(n++)}).filter(function(){var e=t(this).data("vc.accordion");return e.getTarget().hasClass(e.activeClass)}).filter(function(){return a[0]!==this}),s,l,r;o.length&&t.fn.vcAccordion.call(o,"hide"),this.isActive()?t.fn.vcAccordion.call(a,"hide"):(t.fn.vcAccordion.call(a,"show"),s=a.closest(".vc_ui-list-bar-item"),l=a.closest("[data-template_id]"),r=l.closest("[data-vc-ui-element=panel-content]").parent(),setTimeout(function(){var t;0>Math.round(l.offset().top-r.offset().top)&&(t=Math.round(l.offset().top-r.offset().top+r.scrollTop()-s.height()),r.animate({scrollTop:t},400)),"function"==typeof e&&e(l,r)},400))}}(window.jQuery),function(t){"use strict";window.vc.element_start_index=0,window.vc.AddElementUIPanelBackendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({el:"#vc_ui-panel-add-element",searchSelector:"#vc_elements_name_filter",prepend:!1,builder:"",events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","search #vc_elements_name_filter":"filterElements","click [data-vc-manage-elements]":"openPresetWindow"},initialize:function(){window.vc.AddElementUIPanelBackendEditor.__super__.initialize.call(this),window.vc.events.on("shortcodes:add",this.addCustomCssStyleTag.bind(this)),window.vc.events.on("vc:savePreset",this.updateAddElementPopUp.bind(this)),window.vc.events.on("vc:deletePreset",this.removePresetFromAddElementPopUp.bind(this))},render:function(e,a){return _.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),this.$el.is(":hidden")&&window.vc.closeActivePanel(),(window.vc.active_panel=this).prepend=!!_.isBoolean(a)&&a,this.place_after_id=!!_.isString(a)&&a,this.model=!!_.isObject(e)&&e,this.$content=this.$el.find("[data-vc-ui-element=\"panel-add-element-list\"]"),this.$buttons=t("[data-vc-ui-element=\"add-element-button\"]",this.$content),this.buildFiltering(),this.$el.find("[data-vc-ui-element=\"panel-tab-control\"]").eq(0).click(),this.show(),this.$el.find("[data-vc-ui-element=\"panel-tabs-controls\"]").vcTabsLine("moveTabs"),vc.is_mobile||t(this.searchSelector).trigger("focus"),vc.AddElementUIPanelBackendEditor.__super__.render.call(this)},buildFiltering:function(){var e="[data-vc-ui-element=\"add-element-button\"]",a=this._getNotIn(this.model?this.model.get("shortcode"):""),n,o,i;t(this.searchSelector).val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*"),o=(n=this.model?this.model.get("shortcode"):"vc_column")&&!_.isUndefined(vc.getMapped(n).as_parent)&&vc.getMapped(n).as_parent,_.isObject(o)?(i=[],_.isString(o.only)&&i.push(_.reduce(o.only.replace(/\s/,"").split(","),function(e,t){return e+(_.isEmpty(e)?"":",")+"[data-element=\""+t.trim()+"\"]"},"")),_.isString(o.except)&&i.push(_.reduce(o.except.replace(/\s/,"").split(","),function(e,t){return e+":not([data-element=\""+t.trim()+"\"])"},"")),e+=i.join(",")):a&&(e=a),!1===n||_.isUndefined(vc.getMapped(n).allowed_container_element)||(!1===vc.getMapped(n).allowed_container_element?e+=":not([data-is-container=true])":_.isString(vc.getMapped(n).allowed_container_element)&&(e+=":not([data-is-container=true]), [data-element="+vc.getMapped(n).allowed_container_element+"]")),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),t(e,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){var e=this;this.$el.find("[data-vc-ui-element=\"panel-add-element-tab\"].vc_active").removeClass("vc_active"),this.$el.find("[data-vc-ui-element=\"panel-add-element-tab\"]:first").addClass("vc_active"),this.$el.find("[data-filter]").each(function(){t(t(this).data("filter")+".vc_visible:not(.vc_inappropriate)",e.$content).length?t(this).parent().show():t(this).parent().hide()})},_getNotIn:_.memoize(function(e){return"[data-vc-ui-element=\"add-element-button\"]:not("+_.reduce(vc.map,function(t,a){var n=_.isEmpty(t)?"":",";return _.isObject(a.as_child)?(_.isString(a.as_child.only)&&!_.contains(a.as_child.only.replace(/\s/,"").split(","),e)&&(t+=n+"[data-element="+a.base+"]"),_.isString(a.as_child.except)&&_.contains(a.as_child.except.replace(/\s/,"").split(","),e)&&(t+=n+"[data-element="+a.base+"]")):!1===a.as_child&&(t+=n+"[data-element="+a.base+"]"),t},"")+")"}),filterElements:function(a){var n,o,i;a?(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()):a=window.event,n=t(a.currentTarget),o="[data-vc-ui-element=\"add-element-button\"]",i=t(this.searchSelector).val(),this.$content.removeClass("vc_filter-all"),t("[data-vc-ui-element=\"panel-add-element-tab\"].vc_active").removeClass("vc_active"),n.is("[data-filter]")?(n.parent().addClass("vc_active"),o+=n=n.data("filter"),"*"===n?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",n.replace(".js-category-","")),t(this.searchSelector).val("")):i.length?(o+=":containsi('"+i+"'):not('.vc_element-deprecated')",this.$content.attr("data-vc-ui-filter","name:"+i)):i.length||(t("[data-vc-ui-element=\"panel-tab-control\"][data-filter=\"*\"]").parent().addClass("vc_active"),this.$content.attr("data-vc-ui-filter","*").addClass("vc_filter-all")),t(".vc_visible",this.$content).removeClass("vc_visible"),t(o,this.$content).addClass("vc_visible"),i.length&&13===(a.keyCode||a.which)&&1===(n=t(".vc_visible:not(.vc_inappropriate)",this.$content)).length&&n.find("[data-vc-clickable]").click()},createElement:function(a){var n,o,i,s,l,r,c,d,p;a&&a.preventDefault&&a.preventDefault(),c=(a=t(a.currentTarget)).data("tag"),r={},l={width:"1/1"},(a=a.closest("[data-preset]"))&&(d=a.data("preset"),p=a.data("element")),!1===this.model?(window.vc.storage.lock(),"vc_section"===c?(a={shortcode:c},d&&"vc_section"===p&&(a.preset=d),o=vc.shortcodes.create(a)):(a={shortcode:"vc_row",params:r},d&&p===c&&(a.preset=d),a={shortcode:"vc_column",params:l,parent_id:(s=vc.shortcodes.create(a)).id,root_id:s.id},d&&"vc_column"===p&&(a.preset=d),i=vc.shortcodes.create(a),o=s,"vc_row"!==c&&(n={shortcode:c,parent_id:i.id,root_id:s.id},d&&p===c&&(n.preset=d),o=vc.shortcodes.create(n)))):o="vc_row"===c?(i="vc_section"===this.model.get("shortcode")?(window.vc.storage.lock(),s=vc.shortcodes.create({shortcode:"vc_row",params:r,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column",params:l,parent_id:s.id,root_id:s.id})):(a={},r={width:"1/1"},window.vc.storage.lock(),s=vc.shortcodes.create({shortcode:"vc_row_inner",params:a,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column_inner",params:r,parent_id:s.id,root_id:s.id})),s):(n={shortcode:c,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")},d&&p===c&&(n.preset=d),vc.shortcodes.create(n)),this.model=o,l=!(_.isBoolean(vc.getMapped(c).show_settings_on_create)&&!1===vc.getMapped(c).show_settings_on_create),this.model.get("shortcode"),this.hide(),l&&this.showEditForm()},getFirstPositionIndex:function(){return--window.vc.element_start_index,vc.element_start_index},show:function(){this.$el.addClass("vc_active"),this.trigger("show")},hide:function(){this.$el.removeClass("vc_active"),window.vc.active_panel=!1,this.trigger("hide")},showEditForm:function(){window.vc.edit_element_block_view.render(this.model)},addCustomCssStyleTag:function(e){e&&e.getParam&&(e=e.getParam("css"))&&vc.frame_window&&window.vc.frame_window.vc_iframe.setCustomShortcodeCss(e)},updateAddElementPopUp:function(e,t,a,n){var o=this.$el.find("[data-element=\""+t+"\"]:first").clone(!0);vc_all_presets[e]=n,o.find("[data-vc-shortcode-name]").text(a),o.find(".vc_element-description").text(""),o.attr("data-preset",e),o.addClass("js-category-_my_elements_"),o.insertAfter(this.$el.find("[data-element=\""+t+"\"]:last")),this.$el.find("[data-filter=\"js-category-_my_elements_\"]").show(),n=this.$body.find("[data-vc-ui-element=\"panel-preset\"] [data-vc-presets-list-content] .vc_ui-template:first").clone(!0),n.find("[data-vc-ui-element=\"template-title\"]").attr("title",a).text(a),n.find("[data-vc-ui-delete=\"preset-title\"]").attr("data-preset",e).attr("data-preset-parent",t),n.find("[data-vc-ui-add-preset]").attr("data-preset",e).attr("id",t).attr("data-tag",t),n.show(),n.insertAfter(this.$body.find("[data-vc-ui-element=\"panel-preset\"] [data-vc-presets-list-content] .vc_ui-template:last"))},removePresetFromAddElementPopUp:function(e){this.$el.find("[data-preset=\""+e+"\"]").remove()},openPresetWindow:function(t){t&&t.preventDefault&&t.preventDefault(),window.vc.preset_panel_view.render().show()}}),window.vc.AddElementUIPanelFrontendEditor=vc.AddElementUIPanelBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements"},createElement:function(a){var n,o,s,l,r,c,d;for(a&&a.preventDefault&&a.preventDefault(),r=(a=t(a.currentTarget)).data("tag"),l={},s={width:"1/1"},(a=a.closest("[data-preset]"))&&(c=a.data("preset"),d=a.data("element")),this.prepend&&(window.vc.activity="prepend"),0==this.model?"vc_section"===r?(a={shortcode:r},c&&"vc_section"===d&&(a.preset=c),this.builder.create(a)):(a={shortcode:"vc_row",params:l},c&&"vc_row"===d&&(a.preset=c),this.builder.create(a),a={shortcode:"vc_column",parent_id:this.builder.lastID(),params:s},c&&"vc_column"===d&&(a.preset=c),this.builder.create(a),"vc_row"!==r&&(n={shortcode:r,parent_id:this.builder.lastID()},c&&d===r&&(n.preset=c),this.builder.create(n))):"vc_row"===r?"vc_section"===this.model.get("shortcode")?this.builder.create({shortcode:"vc_row",params:l,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column",params:s,parent_id:this.builder.lastID()}):(a={width:"1/1"},this.builder.create({shortcode:"vc_row_inner",params:{},parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column_inner",params:a,parent_id:this.builder.lastID()})):(n={shortcode:r,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()},c&&d===r&&(n.preset=c),this.builder.create(n)),this.model=this.builder.last(),o=this.builder.models.length-1;0<=o;o--)this.builder.models[o].get("shortcode");_.isString(vc.getMapped(r).default_content)&&vc.getMapped(r).default_content.length&&(l=this.builder.parse({},window.vc.getMapped(r).default_content,this.builder.last().toJSON()),_.each(l,function(e){e.default_content=!0,this.builder.create(e)},this)),this.model=this.builder.last(),s=!(_.isBoolean(vc.getMapped(r).show_settings_on_create)&&!1===vc.getMapped(r).show_settings_on_create),this.hide(),s&&this.showEditForm(),this.builder.render()}})}(window.jQuery),function(t){"use strict";window.vc.ExtendPresets={settingsMenuSelector:"[data-vc-ui-element=\"settings-dropdown-list\"]",settingsButtonSelector:"[data-vc-ui-element=\"settings-dropdown-button\"]",settingsDropdownSelector:"[data-vc-ui-element=\"settings-dropdown\"]",settingsPresetId:null,uiEvents:{init:"addEvents",render:"hideDropdown",afterRender:"afterRenderActions"},afterRenderActions:function(){this.untaintSettingsPresetData(),this.showDropdown()},hideDropdown:function(){this.$el.find("[data-vc-ui-element=\"settings-dropdown\"]").hide()},showDropdown:function(){var e=this.model.get("shortcode");window.vc_settings_show&&"vc_column"!==e&&this.$el.find("[data-vc-ui-element=\"settings-dropdown\"]").show()},showDropdownMenu:function(){var e=this.model.get("shortcode"),a=t(this);a.data("vcSettingsMenuLoaded")&&e===a.data("vcShortcodeName")||this.reloadSettingsMenuContent()},addEvents:function(){var e=this.$el.find(".vc_edit-form-tab.vc_active"),a=this.model.get("shortcode"),n=this;t(document).off("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector).on("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector,function(){e.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")}),t(document).off("close.vc.paramWindow",this.closeButtonSelector).on("beforeClose.vc.paramWindow",this.closeButtonSelector,function(){e.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")}),t(document).off("show.vc.accordion",this.settingsButtonSelector).on("show.vc.accordion",this.settingsButtonSelector,function(){var e=t(this);e.data("vcSettingsMenuLoaded")&&a===e.data("vcShortcodeName")||n.reloadSettingsMenuContent()})},saveSettingsAjaxData:function(e,t,a,n){return{action:"vc_action_save_settings_preset",shortcode_name:e,is_default:a?1:0,vc_inline:!0,title:t,data:n,_vcnonce:window.vcAdminNonce}},saveSettings:function(e,a){var n=this.model.get("shortcode"),o=JSON.stringify(this.getParamsForSettingsPreset());if(void 0!==e&&e.length)return void 0===a&&(a=!1),this.checkAjax(),this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveSettingsAjaxData(n,e,a,o),context:this}).done(function(e){e.success&&(this.setSettingsMenuContent(e.html),this.settingsPresetId=e.id,this.untaintSettingsPresetData())}).always(this.resetAjax),this.ajax},fetchSaveSettingsDialogAjaxData:function(){return{action:"vc_action_render_settings_preset_title_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveSettingsDialog:function(e){var a=this.$el.find(".vc_ui-panel-content-container");a.find(".vc_ui-prompt-presets").length?void 0!==e&&e(!1):(this.checkAjax(),this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveSettingsDialogAjaxData()}).done(function(t){t.success&&(a.prepend(t.html),void 0!==e)&&e(!0)}).fail(function(){void 0!==e&&e(!1)}).always(this.resetAjax))},showSaveSettingsDialog:function(e){var t=this;this.isSettingsPresetDefault=!!e,this.fetchSaveSettingsDialog(function(e){var a=t.$el.find(".vc_ui-panel-content-container"),n=a.find(".vc_ui-prompt-presets"),o=n.find(".textfield"),i=(a.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),n.find("[data-vc-view-settings-preset]")),s,l;"undefined"===window.vc_vendor_settings_presets[t.model.get("shortcode")]?i.attr("disabled","disabled"):i.removeAttr("disabled"),n.addClass("vc_visible"),o.trigger("focus"),a.addClass("vc_ui-content-hidden"),e&&(s=n.find("#vc_ui-save-preset-btn"),l=0,n.on("submit",function(){var i=o.val();return i.length&&t.saveSettings(i,t.isSettingsPresetDefault).done(function(r){var e=this.getParamsForSettingsPreset();o.val(""),t.setCustomButtonMessage(s,void 0,void 0,!0),vc.events.trigger("vc:savePreset",r.id,t.model.get("shortcode"),i,e),l=_.delay(function(){n.removeClass("vc_visible"),a.removeClass("vc_ui-content-hidden")},5e3)}).fail(function(){t.setCustomButtonMessage(s,window.i18nLocale.ui_danger,"danger",!0)}),!1}),n.on("click",".vc_ui-prompt-close",function(){return t.checkAjax(),n.removeClass("vc_visible"),a.removeClass("vc_ui-content-hidden"),t.clearCustomButtonMessage.call(this,s),l&&(window.clearTimeout(l),l=0),!1}))})},loadSettingsAjaxData:function(e){return{action:"vc_action_get_settings_preset",vc_inline:!0,id:e,_vcnonce:window.vcAdminNonce}},loadSettings:function(e){return this.panelInit=!1,this.checkAjax(),this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.loadSettingsAjaxData(e),context:this}).done(function(t){t.success&&(this.settingsPresetId=e,this.applySettingsPreset(t.data))}).always(this.resetAjax),this.ajax},saveAsDefaultSettingsAjaxData:function(e,t){return{action:"vc_action_set_as_default_settings_preset",shortcode_name:e,id:t,vc_inline:!0,_vcnonce:window.vcAdminNonce}},saveAsDefaultSettings:function(e,a){var n=this.model.get("shortcode"),e=e||this.settingsPresetId;e?(this.checkAjax(),this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveAsDefaultSettingsAjaxData(n,e),context:this}).done(function(e){e.success&&(this.setSettingsMenuContent(e.html),this.untaintSettingsPresetData(),a)&&a()}).always(this.resetAjax)):this.showSaveSettingsDialog(!0)},restoreDefaultSettingsAjaxData:function(e){return{action:"vc_action_restore_default_settings_preset",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},restoreDefaultSettings:function(){var e=this.model.get("shortcode");this.checkAjax(),this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.restoreDefaultSettingsAjaxData(e),context:this}).done(function(e){e.success&&this.setSettingsMenuContent(e.html)}).always(this.resetAjax)},setSettingsMenuContent:function(e){var t=this.$el.find(this.settingsButtonSelector),a=this.$el.find(this.settingsMenuSelector),n=this.model.get("shortcode"),o=this;t.data("vcShortcodeName",n),a.html(e),window.vc_presets_data&&0<window.vc_presets_data.presetsCount?a.find("[data-vc-view-settings-preset]").removeAttr("disabled"):a.find("[data-vc-view-settings-preset]").attr("disabled","disabled"),a.find("[data-vc-view-settings-preset]").on("click",function(){o.showViewSettingsList(),o.closeSettings()}),a.find("[data-vc-save-settings-preset]").on("click",function(){o.showSaveSettingsDialog(),o.closeSettings()}),a.find("[data-vc-save-template]").on("click",function(){o.showSaveTemplateDialog(),o.closeSettings()}),a.find("[data-vc-save-default-settings-preset]").on("click",function(){o.saveAsDefaultSettings(),o.closeSettings()}),a.find("[data-vc-restore-default-settings-preset]").on("click",function(){o.restoreDefaultSettings(),o.closeSettings()})},reloadSettingsMenuContentAjaxData:function(e){return{action:"vc_action_render_settings_preset_popup",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},showViewSettingsList:function(){var e=this.$el.find(".vc_ui-panel-content-container"),a,n,o;e.find(".vc_ui-prompt-view-presets:not(.vc_visible)").remove(),e.find(".vc_ui-prompt-view-presets").length||(e.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),a=this,n=jQuery("<form class=\"vc_ui-prompt vc_ui-prompt-view-presets\"><div class=\"vc_ui-prompt-controls\"><button type=\"button\" class=\"vc_general vc_ui-control-button vc_ui-prompt-close\"><i class=\"vc-composer-icon vc-c-icon-close\"></i></button></div><div class=\"vc_ui-prompt-title\"><label for=\"prompt_title\" class=\"wpb_element_label\">Elements</label></div><div class=\"vc_ui-prompt-content\"><div class=\"vc_ui-prompt-column\"><div class=\"vc_ui-template-list vc_ui-list-bar\" data-vc-action=\"collapseAll\" style=\"margin-top: 20px;\" data-vc-presets-list-content></div></div></div>"),this.buildsettingsListContent(n),n.appendTo(e),n.addClass("vc_visible"),e.addClass("vc_ui-content-hidden"),o=function(){return n.remove(),e.removeClass("vc_ui-content-hidden"),!1},n.off("click.vc1").on("click.vc1","[data-vc-load-settings-preset]",function(n){a.loadSettings(t(n.currentTarget).data("vcLoadSettingsPreset")),o()}),n.off("click.vc4").on("click.vc4","[data-vc-set-default-settings-preset]",function(){a.saveAsDefaultSettings(t(this).data("vcSetDefaultSettingsPreset"),function(){a.buildsettingsListContent(n)})}),n.off("click.vc3").on("click.vc3",".vc_ui-prompt-close",function(){o(),a.checkAjax()}))},buildsettingsListContent:function(e){var t=vc.template("<div class=\"vc_ui-template\"><div class=\"vc_ui-list-bar-item\"><button class=\"vc_ui-list-bar-item-trigger\" title=\"Apply Element\" type=\"button\" data-vc-load-settings-preset=\"<%- id %>\"><%- title %></button><div class=\"vc_ui-list-bar-item-actions\"><button class=\"vc_general vc_ui-control-button\" title=\"Apply Element\" type=\"button\" data-vc-load-settings-preset=\"<%- id %>\"><i class=\"vc-composer-icon vc-c-icon-add\"></i></button><button class=\"vc_general vc_ui-control-button\" title=\"Delete Element\" type=\"button\" data-vc-delete-settings-preset=\"<%- id %>\"><i class=\"vc-composer-icon vc-c-icon-delete_empty\"></i></button></div></div></div>"),a=e.find("[data-vc-presets-list-content]");a.empty(),_.each(window.vc_presets_data.presets[0],function(e,n){var o=e;0<window.vc_presets_data.defaultId&&parseInt(n,10)===window.vc_presets_data.defaultId&&(o=e+" (default)"),a.append(t({title:o,id:n}))}),_.each(window.vc_presets_data.presets[1],function(e,n){var o=e;0<window.vc_presets_data.defaultId&&parseInt(n,10)===window.vc_presets_data.defaultId&&(o=e+" (default)"),a.append(t({title:o,id:n}))})},reloadSettingsMenuContent:function(){var e=this.model.get("shortcode"),a=this.$el.find(this.settingsButtonSelector),n=!1;return this.setSettingsMenuContent(""),this.checkAjax(),this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.reloadSettingsMenuContentAjaxData(e),context:this}).done(function(e){e.success&&(n=!0,this.setSettingsMenuContent(e.html),a.data("vcSettingsMenuLoaded",!0))}).always(function(){n||this.closeSettings(),this.resetAjax()}),this.ajax},closeSettings:function(e){void 0===e&&(e=!1);var t=this.$el.find(this.settingsMenuSelector),a=this.$el.find(this.settingsButtonSelector);e&&(a.data("vcSettingsMenuLoaded",!1),t.html("")),a.vcAccordion("hide")},isSettingsPresetDataTainted:function(){var e=(e=JSON.stringify(this.getParamsForSettingsPreset())).replace(/vc_custom_\d+/,"");return this.$el.data("vcSettingsPresetHash")!==vc_globalHashCode(e)},untaintSettingsPresetData:function(){var e=(e=JSON.stringify(this.getParamsForSettingsPreset())).replace(/vc_custom_\d+/,"");this.$el.data("vcSettingsPresetHash",vc_globalHashCode(e))},applySettingsPresetAjaxData:function(e){var t=this.model.get("parent_id");return{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:t?vc.shortcodes.get(t).get("shortcode"):null,post_id:vc_post_id,params:e,_vcnonce:window.vcAdminNonce}},applySettingsPreset:function(e){return this.currentModelParams=e,vc.events.trigger("presets:apply",this.model,e),this._killEditor(),this.trigger("render"),this.show(),this.checkAjax(),this.ajax=t.ajax({type:"POST",url:window.ajaxurl,data:this.applySettingsPresetAjaxData(e),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},getParamsForSettingsPreset:function(){var e=this.model.get("shortcode"),t=this.getParams();return"vc_column"!==e&&"vc_column_inner"!==e||(delete t.width,delete t.offset),t}},vc.events.on("presets.apply",function(e,t){return"vc_tta_section"===e.get("shortcode")&&void 0!==t.tab_id&&(t.tab_id=vc_guid()+"-cl"),t})}(window.jQuery),function(e){"use strict";window.vc.ExtendTemplates={fetchSaveTemplateDialogAjaxData:function(){return{action:"vc_action_render_settings_templates_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveTemplateDialog:function(t){var a=this.$el.find(".vc_ui-panel-content-container");return a.find(".vc_ui-prompt-templates").length?void(void 0!==t&&t(!1)):(this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveTemplateDialogAjaxData()}).done(function(e){e.success&&(a.prepend(e.html),void 0!==t)&&t(!0)}).always(this.resetAjax),this.ajax)},showSaveTemplateDialog:function(){var e=this;this.fetchSaveTemplateDialog(function(t){var a=e.$el.find(".vc_ui-panel-content-container"),n=a.find(".vc_ui-prompt-templates"),o=n.find(".textfield"),i,s;a.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),n.addClass("vc_visible"),o.trigger("focus"),a.addClass("vc_ui-content-hidden"),t&&(i=0,s=n.find("#vc_ui-save-templates-btn"),n.on("submit",function(){var t=o.val();return e.$el.find(e.settingsButtonSelector),t.length&&(t={action:vc.templates_panel_view.save_template_action,template:vc.shortcodes.singleStringify(e.model.get("id"),"template"),template_name:t,vc_inline:!0,_vcnonce:window.vcAdminNonce},vc.templates_panel_view.reloadTemplateList(t,function(){o.val(""),e.setCustomButtonMessage(s,void 0,void 0,!0),i=_.delay(function(){n.removeClass("vc_visible"),a.removeClass("vc_ui-content-hidden")},5e3)},function(){e.setCustomButtonMessage(s,window.i18nLocale.ui_danger,"danger")})),!1}),n.on("click",".vc_ui-prompt-close",function(){return e.checkAjax(),n.removeClass("vc_visible"),a.removeClass("vc_ui-content-hidden"),e.clearCustomButtonMessage.call(this,s),i&&(window.clearTimeout(i),i=0),!1}))})}}}(window.jQuery),function(t){"use strict";window.vc.EditElementPanelView=vc.PanelView.vcExtendUI(vc.HelperAjax).vcExtendUI(vc.ExtendPresets).vcExtendUI(vc.ExtendTemplates).vcExtendUI(vc.HelperPrompts).extend({panelName:"edit_element",el:"#vc_properties-panel",contentSelector:".vc_ui-panel-content.vc_properties-list",minimizeButtonSelector:"[data-vc-ui-element=\"button-minimize\"]",closeButtonSelector:"[data-vc-ui-element=\"button-close\"]",titleSelector:".vc_panel-title",tabsInit:!1,doCheckTabs:!0,$tabsMenu:!1,dependent_elements:{},mapped_params:{},draggable:!1,panelInit:!1,$spinner:!1,active_tab_index:0,buttonMessageTimeout:!1,notRequestTemplate:!1,requiredParamsInitialized:!1,currentModelParams:!1,customButtonMessageTimeout:!1,events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity"},initialize:function(){_.bindAll(this,"setSize","setTabsSize","fixElContainment","hookDependent","resetAjax","removeAllPrompts"),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),this.on("render",this.setTitle,this),this.on("render",this.prepareContentBlock,this)},setCustomButtonMessage:function(e,t,a,n){return void 0===e&&(e=this.$el.find("[data-vc-ui-element=\"button-save\"]")),void 0===n&&(n=!1),this.clearCustomButtonMessage=_.bind(this.clearCustomButtonMessage,this),!n&&!vc.frame_window||this.customButtonMessageTimeout||(void 0===t&&(t=window.i18nLocale.ui_saved),void 0===a&&(a="success"),n=e.html(),e.addClass("vc_ui-button-"+a+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",n).data("vcCurrentTextType",a).html(t),_.delay(this.clearCustomButtonMessage.bind(this,e),5e3),this.customButtonMessageTimeout=!0),this},clearCustomButtonMessage:function(e){var t,a;this.customButtonMessageTimeout&&(window.clearTimeout(this.customButtonMessageTimeout),a=e.data("vcCurrentTextHtml")||"Save",t=e.data("vcCurrentTextType"),e.html(a).removeClass("vc_ui-button-"+t+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.customButtonMessageTimeout=!1)},render:function(e,a){return this.$el.is(":hidden")&&vc.closeActivePanel(),a&&(this.notRequestTemplate=!0),this.model=e,this.currentModelParams=this.model.get("params"),(vc.active_panel=this).resetMinimize(),this.clicked=!1,this.$el.css("height","auto"),this.$el.css("maxHeight","75vh"),a=this.model.setting("params")||[],this.$el.attr("data-vc-shortcode",this.model.get("shortcode")),this.tabsInit=!1,this.panelInit=!1,this.active_tab_index=0,this.requiredParamsInitialized=!1,this.mapped_params={},this.dependent_elements={},_.each(a,function(e){this.mapped_params[e.param_name]=e},this),this.trigger("render"),this.show(),this.checkAjax(),this.ajax=t.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},prepareContentBlock:function(){this.$content=this.notRequestTemplate?this.$el:this.$el.find(this.contentSelector).removeClass("vc_with-tabs"),this.$content.empty(),this.$spinner=t("<span class=\"vc_ui-wp-spinner vc_ui-wp-spinner-lg vc_ui-wp-spinner-dark\"></span>"),this.$content.prepend(this.$spinner)},buildParamsContent:function(e){var e=t(e),a=e.find("[data-vc-ui-element=\"panel-tabs-controls\"]"),n=(a.find(".vc_edit-form-tab-control:first-child").addClass("vc_active"),s=this.$el.find("[data-vc-ui-element=\"panel-header-content\"]"),(l=e.find("[data-vc-ui-element=\"panel-edit-element-tab\"]"))&&l.addClass("visually-hidden"),s&&s.addClass("visually-hidden"),this.$content.html(e).append("<script async>window.setTimeout(function(){window.wpb_edit_form_loaded=true;},100);</script>"),this.$content.prepend(this.$spinner),a.prependTo(s),this),o=0,i=function(){!window.wpb_edit_form_loaded&&10>o?(o++,setTimeout(i,100)):(n.$content.removeAttr("data-vc-param-initialized"),n.active_tab_index=0,n.tabsInit=!1,n.panelInit=!1,n.dependent_elements={},n.requiredParamsInitialized=!1,n.$content.find("[data-vc-param-initialized]").removeAttr("data-vc-param-initialized"),l.removeClass("visually-hidden"),n.$content.find(".vc_ui-wp-spinner").remove(),n.init(),n.$content.parent().scrollTop(1).scrollTop(0),n.$content.removeClass("vc_properties-list-init"),n.$el.trigger("vcPanel.shown"),n.trigger("afterRender"))},s,l;window.setTimeout(i,800)},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")},ajaxData:function(){var e=this.model.get("parent_id"),e=e?this.model.collection.get(e).get("shortcode"):null,t=this.model.get("params"),t=_.extend({},vc.getDefaults(this.model.get("shortcode")),t);return{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:e,post_id:vc_post_id,params:t,_vcnonce:window.vcAdminNonce}},init:function(){vc.EditElementPanelView.__super__.init.call(this),this.$el.find("[data-vc-ui-element=\"panel-header-content\"]").removeClass("visually-hidden"),this.initParams(),this.initDependency(),t(".wpb_edit_form_elements .textarea_html").each(function(){window.init_textarea_html(t(this))}),this.trigger("init"),this.panelInit=!0},initParams:function(){var e=this,a=this.content().find("#vc_edit-form-tabs [data-vc-ui-element=\"panel-edit-element-tab\"]:eq("+this.active_tab_index+")");(a=a.length?a:this.content()).attr("data-vc-param-initialized")||(t("[data-vc-ui-element=\"panel-shortcode-param\"]",a).each(function(){var a=t(this),n;a.data("vcInitParam")||(n=a.data("param_settings"),vc.atts.init.call(e,n,a),a.data("vcInitParam",!0))}),a.attr("data-vc-param-initialized",!0)),this.requiredParamsInitialized||_.isUndefined(vc.required_params_to_init)||(t("[data-vc-ui-element=\"panel-shortcode-param\"]",this.content()).each(function(){var a=t(this),n;!a.data("vcInitParam")&&-1<_.indexOf(vc.required_params_to_init,a.data("param_type"))&&(n=a.data("param_settings"),vc.atts.init.call(e,n,a),a.data("vcInitParam",!0))}),this.requiredParamsInitialized=!0)},initDependency:function(){var e={};_.each(this.mapped_params,function(a){var n,o,i;_.isObject(a)&&_.isObject(a.dependency)&&(n=a.dependency,_.isString(a.dependency.element)&&(o=t("[name="+a.dependency.element+"].wpb_vc_param_value",this.$content),i=t("[name= "+a.param_name+"].wpb_vc_param_value",this.$content),_.each(o,function(a){var a=t(a),n=a.attr("name");_.isArray(this.dependent_elements[a.attr("name")])||(this.dependent_elements[a.attr("name")]=[]),this.dependent_elements[a.attr("name")].push(i),a.data("dependentSet")||(a.attr("data-dependent-set","true"),a.off("keyup change",this.hookDependent).on("keyup change",this.hookDependent)),e[n]||(e[n]=a)},this)),_.isString(n.callback))&&window[n.callback].call(this)},this),this.doCheckTabs=!1,_.each(e,function(e){this.hookDependent({currentTarget:e})},this),this.doCheckTabs=!0,this.checkTabs(),e=null},hookDependent:function(a){var n=t(a.currentTarget),o=n.closest(".vc_column"),i=this.dependent_elements[n.attr("name")],s=n.is(":checkbox")?_.map(this.$content.find("[name="+t(a.currentTarget).attr("name")+"].wpb_vc_param_value:checked"),function(e){return t(e).val()}):n.val(),a=this.doCheckTabs,l;return this.doCheckTabs=!1,l=n.is(":checkbox")?!this.$content.find("[name="+n.attr("name")+"].wpb_vc_param_value:checked").length:!s.length,o.hasClass("vc_dependent-hidden")?_.each(i,function(e){var t=jQuery.Event("change");t.extra_type="vcHookDepended",e.closest(".vc_column").addClass("vc_dependent-hidden"),e.trigger(t)}):_.each(i,function(e){var t=e.attr("name"),t=_.isObject(this.mapped_params[t])&&_.isObject(this.mapped_params[t].dependency)?this.mapped_params[t].dependency:{},a=e.closest(".vc_column"),t=(_.isBoolean(t.not_empty)&&!0===t.not_empty&&!l||_.isBoolean(t.is_empty)&&!0===t.is_empty&&l||t.value&&_.intersection(_.isArray(t.value)?t.value:[t.value],_.isArray(s)?s:[s]).length||t.value_not_equal_to&&!_.intersection(_.isArray(t.value_not_equal_to)?t.value_not_equal_to:[t.value_not_equal_to],_.isArray(s)?s:[s]).length?a.removeClass("vc_dependent-hidden"):a.addClass("vc_dependent-hidden"),jQuery.Event("change"));t.extra_type="vcHookDepended",e.trigger(t)},this),a&&(this.checkTabs(),this.doCheckTabs=!0),this},checkTabs:function(){var e=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$content.hasClass("vc_with-tabs"))&&(this.$tabsMenu=this.$content.find(".vc_edit-form-tabs-menu")),this.$tabsMenu&&(this.$content.find("[data-vc-ui-element=\"panel-edit-element-tab\"]").each(function(a){var n=e.$tabsMenu.find("> [data-tab-index=\""+a+"\"]");t(this).find("[data-vc-ui-element=\"panel-shortcode-param\"]:not(\".vc_dependent-hidden\")").length?n.hasClass("vc_dependent-hidden")&&(n.removeClass("vc_dependent-hidden").removeClass("vc_tab-color-animated").addClass("vc_tab-color-animated"),window.setTimeout(function(){n.removeClass("vc_tab-color-animated")},200)):n.addClass("vc_dependent-hidden")}),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabsMenu.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabsMenu.outerHeight())},setActive:function(){this.$el.prev().addClass("active")},window:function(){return window},getParams:function(){var e=this.mapped_params;return this.params=_.extend({},this.model.get("params")),_.each(e,function(e){var t=vc.atts.parseFrame.call(this,e);this.params[e.param_name]=t},this),_.each(vc.edit_form_callbacks,function(e){e.call(this)},this),this.params},content:function(){return this.$content},save:function(){var e,t,a;this.panelInit&&(e=this.model.get("shortcode"),t=this.getParams(),a=_.extend({},vc.getDefaults(e),vc.getMergedParams(e,t)),_.isUndefined(t.content)||(a.content=t.content),this.model.save({params:a}),this.showMessage(window.sprintf(window.i18nLocale.inline_element_saved,vc.getMapped(e).name),"success"),vc.frame_window||this.hide(),this.trigger("save"))},show:function(){this.$el.hasClass("vc_active")||(this.$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"))},hide:function(t){t&&t.preventDefault&&t.preventDefault(),this.checkAjax(),this.ajax=!1,this.model&&(this.model=null),vc.active_panel=!1,this.currentModelParams=!1,this._killEditor(),this.$el.removeClass("vc_active"),this.$el.find(".vc_properties-list").removeClass("vc_with-tabs").css("margin-top","auto"),this.$content.empty(),this.trigger("hide")},setTitle:function(){return this.$el.find(this.titleSelector).html(vc.getMapped(this.model.get("shortcode")).name+" "+window.i18nLocale.settings),this},_killEditor:function(){_.isUndefined(window.tinyMCE)||t("textarea.textarea_html",this.$el).each(function(){var e=t(this).attr("id");"4"===tinymce.majorVersion?window.tinyMCE.execCommand("mceRemoveEditor",!0,e):window.tinyMCE.execCommand("mceRemoveControl",!0,e)}),jQuery("body").off("click.wpcolorpicker")}}),window.vc.EditElementUIPanel=vc.EditElementPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({el:"#vc_ui-panel-edit-element",events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},titleSelector:"[data-vc-ui-element=\"panel-title\"]",initialize:function(){vc.EditElementUIPanel.__super__.initialize.call(this),this.on("afterResizeStart",function(){this.$el.css("maxHeight","none")})},show:function(){vc.EditElementUIPanel.__super__.show.call(this),t("[data-vc-ui-element=\"panel-tabs-controls\"]",this.$el).remove(),this.$el.css("maxHeight","75vh")},tabsMenu:function(){var e;return!1===this.tabsInit&&(this.tabsInit=!0,(e=this.$el.find("[data-vc-ui-element=\"panel-tabs-controls\"]")).length)&&(this.$tabsMenu=e),this.$tabsMenu},buildTabs:function(){this.content().find("[data-vc-ui-element=\"panel-tabs-controls\"]").prependTo("[data-vc-ui-element=\"panel-header-content\"]")},changeTab:function(a){a&&a.preventDefault&&a.preventDefault(),a=t(a.currentTarget),a.parent().hasClass("vc_active")||(this.$el.find("[data-vc-ui-element=\"panel-tabs-controls\"] .vc_active:not([data-vc-ui-element=\"panel-tabs-line-dropdown\"])").removeClass("vc_active"),a.parent().addClass("vc_active"),this.$el.find("[data-vc-ui-element=\"panel-edit-element-tab\"].vc_active").removeClass("vc_active"),this.active_tab_index=this.$el.find(a.data("vcUiElementTarget")).addClass("vc_active").index(),this.initParams(),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"),this.$content.parent().scrollTop(1).scrollTop(0),this.trigger("tabChange"))},checkTabs:function(){var e=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$tabsMenu=this.$el.find("[data-vc-ui-element=\"panel-tabs-controls\"]")),this.tabsMenu()&&(this.content().find("[data-vc-ui-element=\"panel-edit-element-tab\"]").each(function(a){var n=e.$tabsMenu.find("> [data-tab-index=\""+a+"\"]");t(this).find("[data-vc-ui-element=\"panel-shortcode-param\"]:not(\".vc_dependent-hidden\")").length?n.hasClass("vc_dependent-hidden")&&(n.removeClass("vc_dependent-hidden"),window.setTimeout(function(){n.removeClass("vc_tab-color-animated")},200)):window.setTimeout(function(){n.addClass("vc_dependent-hidden")},0)}),this.$tabsMenu.vcTabsLine("refresh"),this.$tabsMenu.vcTabsLine("moveTabs"))}})}(window.jQuery),function(t){"use strict";window.vc.TemplateLibraryView=vc.PanelView.vcExtendUI(vc.HelperAjax).extend({myTemplates:[],$mainPopup:!1,$loadingPage:!1,$gridContainer:!1,$errorMessageContainer:!1,$myTemplateContainer:!1,$popupItems:!1,$previewImage:!1,$previewTitle:!1,$previewUpdate:!1,$previewDownload:!1,$previewUpdateBtn:!1,$previewDownloadBtn:!1,$templatePreview:!1,$templatePage:!1,$downloadPage:!1,$updatePage:!1,$content:!1,$filter:!1,compiledGridTemplate:!1,compiledTemplate:!1,loaded:!1,data:!1,events:{"click [data-dismiss=panel]":"hide","click .vc_ui-panel-close-button":"closePopupButton","click .vc_ui-access-library-btn":"accessLibrary","click #vc_template-library-template-grid .vc_ui-panel-template-preview-button":"previewButton","click .vc_ui-panel-back-button":"backToTemplates","click .vc_ui-panel-template-download-button, #vc_template-library-download-btn":"downloadButton","click .vc_ui-panel-template-update-button, #vc_template-library-update-btn":"updateButton","keyup #vc_template_lib_name_filter":"filterTemplates","search #vc_template_lib_name_filter":"filterTemplates"},initialize:function(){_.bindAll(this,"loadLibrary","addTemplateStatus","loadMyTemplates","deleteTemplate"),this.$mainPopup=this.$el.find(".vc_ui-panel-popup"),this.$loadingPage=this.$el.find(".vc_ui-panel-loading"),this.$gridContainer=this.$el.find("#vc_template-library-template-grid"),this.$errorMessageContainer=this.$el.find("#vc_template-library-panel-error-message"),this.$myTemplateContainer=this.$el.find("#vc_template-library-shared_templates"),this.$popupItems=this.$el.find(".vc_ui-panel-popup-item"),this.$previewImage=this.$el.find(".vc_ui-panel-preview-image"),this.$previewTitle=this.$el.find(".vc_ui-panel-template-preview .vc_ui-panel-title"),this.$previewUpdate=this.$el.find("#vc_template-library-update"),this.$previewDownload=this.$el.find("#vc_template-library-download"),this.$previewUpdateBtn=this.$previewUpdate.find("#vc_template-library-update-btn"),this.$previewDownloadBtn=this.$previewUpdate.find("#vc_template-library-download-btn"),this.$templatePreview=this.$el.find(".vc_ui-panel-template-preview"),this.$templatePage=this.$el.find(".vc_ui-panel-template-content"),this.$downloadPage=this.$el.find(".vc_ui-panel-download"),this.$updatePage=this.$el.find(".vc_ui-panel-update"),this.$filter=this.$el.find("#vc_template_lib_name_filter"),this.$content=this.$el.find(".vc_ui-templates-content");var e=t("#vc_template-grid-item").html(),e=(this.compiledGridTemplate=vc.template(e),t("#vc_template-item").html());this.compiledTemplate=vc.template(e),window.vc.events.on("templates:delete",this.deleteTemplate)},getLibrary:function(){var e,a;this.loaded?this.showLibrary():(this.checkAjax(),e=this.getStorage("templates"),a=this,e&&"object"==typeof e&&!_.isEmpty(e)?(this.loaded=!0,this.loadLibrary(e),this.showLibrary()):this.ajax=t.getJSON("https://vc-cc-templates.wpbakery.com/templates.json").done(function(e){a.setStorage("templates",e),a.loaded=!0,a.loadLibrary(e),a.showLibrary()}).always(this.resetAjax))},removeStorage:function(e){try{localStorage.removeItem("vc4-"+e),localStorage.removeItem("vc4-"+e+"_expiresIn")}catch(t){return!1}return!0},getStorage:function(e){var t=Date.now(),a=localStorage.getItem("vc4-"+e+"_expiresIn");if((a=null==a?0:a)<t)return this.removeStorage(e),null;try{return JSON.parse(localStorage.getItem("vc4-"+e))}catch(t){return null}},setStorage:function(e,t,a){a=null==a?86400:Math.abs(a),a=Date.now()+1e3*a;try{localStorage.setItem("vc4-"+e,JSON.stringify(t)),localStorage.setItem("vc4-"+e+"_expiresIn",a)}catch(e){return window.console&&window.console.warn&&window.console.warn("template setStorage error",e),!1}return!0},loadLibrary:function(e){var t,a;e&&(t="",(a=this).loaded=!0,this.data=e,this.$filter.val(""),e.forEach(function(e){e=a.addTemplateStatus(e),t+=a.compiledGridTemplate({id:e.id,title:e.title,thumbnailUrl:e.thumbnailUrl,previewUrl:e.previewUrl,status:e.status,downloaded:_.find(a.myTemplates,{id:e.id}),version:e.version})}),this.$gridContainer.html(t))},showLibrary:function(){this.$loadingPage.addClass("vc_ui-hidden"),this.$mainPopup.removeClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},addTemplateStatus:function(e){var t="",a=_.find(this.myTemplates,{id:e.id}),n;return a&&(n=window.i18nLocale.ui_template_downloaded,t="<span class=\"vc_ui-panel-template-item-info\"><span>"+(n=e.version>a.version?window.i18nLocale.ui_template_fupdate:n)+"</span></span>"),e.status=t,e},loadMyTemplates:function(){var e="",t=this;this.myTemplates.forEach(function(a){e+=t.compiledTemplate({post_id:a.post_id,title:a.title})}),this.$myTemplateContainer.html(e)},closePopupButton:function(t){t&&t.preventDefault&&t.preventDefault(),this.$mainPopup.toggleClass("vc_ui-hidden"),this.$popupItems.addClass("vc_ui-hidden"),this.$content.removeClass("vc_ui-hidden")},accessLibrary:function(){this.$loadingPage.removeClass("vc_ui-hidden"),this.$content.addClass("vc_ui-hidden"),this.getLibrary()},previewButton:function(a){var a=t(a.currentTarget),n=a.data("preview-url"),o=a.data("title"),i=a.data("template-id"),a=a.data("template-version"),n=(this.$previewImage.attr("src",n),this.$previewTitle.text(o),_.find(this.myTemplates,{id:i}));this.$previewUpdate.toggleClass("vc_ui-hidden",!(n&&n.version<a)),this.$previewDownload.toggleClass("vc_ui-hidden",!!n),this.$previewUpdateBtn.data("template-id",i),this.$previewDownloadBtn.data("template-id",i),this.$popupItems.addClass("vc_ui-hidden"),this.$templatePreview.removeClass("vc_ui-hidden"),this.$templatePreview.attr("data-template-id",i)},backToTemplates:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},deleteTemplate:function(e){"shared_templates"===e.type&&-1!==(e=_.findIndex(this.myTemplates,{post_id:e.id}))&&(this.myTemplates.splice(e,1),this.loaded)&&this.loadLibrary(this.data)},downloadButton:function(t){t&&t.preventDefault&&t.preventDefault(),t=jQuery(t.currentTarget).closest("[data-template-id]").data("templateId"),t&&(this.showDownloadOverlay(),this.downloadTemplate(t))},updateButton:function(t){t&&t.preventDefault&&t.preventDefault(),jQuery(t.currentTarget).closest("[data-template-id]").data("templateId")&&this.showUpdateOverlay()},showDownloadOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$downloadPage.removeClass("vc_ui-hidden")},hideDownloadOverlay:function(e){e?(this.$errorMessageContainer.html(e),this.$errorMessageContainer.removeClass("vc_ui-hidden")):this.$errorMessageContainer.addClass("vc_ui-hidden"),this.$downloadPage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},showUpdateOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$updatePage.removeClass("vc_ui-hidden")},hideUpdateOverlay:function(){this.$updatePage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},downloadTemplate:function(e){this.checkAjax();var a=!0;this.ajax=t.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_shared_templates_download",id:e,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done(function(t){var n;t&&t.success&&(n=_.find(this.data,{id:e}))&&(a=!1,n.post_id=t.data.post_id,this.myTemplates.unshift(n),this.loadMyTemplates(),this.loadLibrary(this.data),this.showLibrary())}).always(function(e,t){var n="";("success"!==t||a)&&(n=e&&e.data&&e.data.message?e.data.message:window.i18nLocale.ui_templates_failed_to_download),this.hideDownloadOverlay(n),this.resetAjax()})},filterTemplates:function(){var e=".vc_ui-panel-template-item .vc_ui-panel-template-item-name:containsi('"+this.$filter.val()+"')";t(".vc_ui-panel-template-item.vc_ui-visible",this.$gridContainer).removeClass("vc_ui-visible"),t(e,this.$gridContainer).closest(".vc_ui-panel-template-item").addClass("vc_ui-visible")}}),t(function(){window.vcTemplatesLibraryData&&(window.vc.templatesLibrary=new vc.TemplateLibraryView({el:"[data-vc-ui-element=\"panel-edit-element-tab\"][data-tab=\"shared_templates\"]"}),window.vc.templatesLibrary.myTemplates=window.vcTemplatesLibraryData.templates||[],window.vc.templatesLibrary.loadMyTemplates())})}(window.jQuery),function(e){"use strict";vc.PostSettingsUIPanelFrontendEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"post_settings",uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},setEditorSize:function(){this.editor_css.setSizeResizable(),this.editor_js_header.setSizeResizable(),this.editor_js_footer.setSizeResizable()}}),vc.PostSettingsUIPanelBackendEditor=vc.PostSettingsPanelViewBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI(vc.HelperPanelSettingsPostCustomLayout).vcExtendUI({uiEvents:{setSize:"setEditorSize",show:"setEditorSize",render:"removeChangeTitleField"},setSize:function(){this.trigger("setSize")},setEditorSize:function(){this.editor_css.setSizeResizable(),this.editor_js_header.setSizeResizable(),this.editor_js_footer.setSizeResizable()},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},removeChangeTitleField:function(){e("#vc_settings-title-container").remove()}})}(window.jQuery),function(){"use strict";var e={'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="button-layout"]':"setLayout",'click [data-vc-ui-element="button-update-layout"]':"updateFromInput"};vc.RowLayoutUIPanelFrontendEditor=vc.RowLayoutEditorPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:e}),vc.RowLayoutUIPanelBackendEditor=vc.RowLayoutEditorPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:e})}(window.jQuery),function(t){"use strict";window.vc.PresetSettingsUIPanelFrontendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperAjax).vcExtendUI({panelName:"preset_settings",showMessageDisabled:!1,events:{'click [data-vc-ui-delete="preset-title"]':"removePreset",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","click [data-vc-ui-add-preset]":"createPreset"},initialize:function(e){this.frontEnd=e&&e.frontEnd},createPreset:function(a){var n,o,i,s,l;_.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),i=(a=t(a.currentTarget)).data("preset"),a=a.data("tag"),s={width:"1/1"},l={shortcode:"vc_row",params:{}},this.frontEnd?(this.builder.create(l),o={shortcode:"vc_column",params:s,parent_id:this.builder.lastID()},this.builder.create(o),n={shortcode:a,parent_id:this.builder.lastID()},i&&(n.preset=i),window.vc.closeActivePanel(),this.builder.create(n),this.model=this.builder.last(),this.builder.render()):(o={shortcode:"vc_column",params:s,parent_id:(s=vc.shortcodes.create(l)).id,root_id:s.id},n={shortcode:a,parent_id:vc.shortcodes.create(o).id,root_id:s.id},i&&(n.preset=i),l=vc.shortcodes.create(n),window.vc.closeActivePanel(),this.model=l),_.isBoolean(vc.getMapped(a).show_settings_on_create)&&!1===vc.getMapped(a).show_settings_on_create||this.showEditForm()},showEditForm:function(){window.vc.edit_element_block_view.render(this.model)},render:function(){return this.$el.css("left",(t(window).width()-this.$el.width())/2),this},removePreset:function(t){t&&t.preventDefault&&t.preventDefault();var e=jQuery(t.currentTarget).closest("[data-vc-ui-delete=\"preset-title\"]"),a=e.data("preset"),e=e.data("preset-parent");this.deleteSettings(a,e,t)},deleteSettings:function(e,a){var n=this;return!!confirm(window.i18nLocale.delete_preset_confirmation)&&(this.checkAjax(),this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.deleteSettingsAjaxData(a,e),context:this}).done(function(t){t&&t.success&&(this.showMessage(window.i18nLocale.preset_removed,"success"),n.$el.find("[data-preset=\""+e+"\"]").closest(".vc_ui-template").remove(),window.vc.events.trigger("vc:deletePreset",e))}).always(this.resetAjax),this.ajax)},deleteSettingsAjaxData:function(e,t){return{action:"vc_action_delete_settings_preset",shortcode_name:e,vc_inline:!0,id:t,_vcnonce:window.vcAdminNonce}},showMessage:function(e,a){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var n=vc.template("<div class=\"vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>\"><div class=\"vc_message_box-icon\"><i class=\"fa fa fa-<%- icon %>\"></i></div><p><%- text %></p></div>"),o;"error"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"danger",icon:"times",text:e})):"warning"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"warning",icon:"exclamation-triangle",text:e})):"success"===a?o=t("<div class=\"vc_col-xs-12 wpb_element_wrapper\" data-vc-panel-message>").html(n({color:"success",icon:"check",text:e})):void 0;o.prependTo(this.$el.find(".vc_properties-list")),o.fadeIn(),this.message_box_timeout=window.setTimeout(function(){o.remove()},6e3)}})}(window.jQuery),window.vc||(window.vc={}),function(t){"use strict";window.vc.PostSettingsSeoUIPanel=vc.PostSettingsSeoUIPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({el:"#vc_ui-panel-post-seo",panelName:"post_seo",events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"changeTab",'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","click .vc_icon-remove":"removeImage","change #vc_ui-seo-social .gallery_widget_attached_images_ids":"updateImagePreview","input #social-title-x, #social-title-facebook":"updateTitlePreview","input #social-description-x, #social-description-facebook":"updateDescriptionPreview","click #preview-dots, #vc_seo-title, #vc_description-container":"focusTarget",'change .vc-preview-radio input[type="radio"]':"changePreviewMode","input #vc_seo-title-field, #vc_seo-description-field, #vc_seo-slug-field":"updateGeneralPreviewText","blur #vc_seo-title-field, #vc_seo-description-field":"fillSocialInputs","change #vc_focus-keyphrase-field, #vc_seo-title-field, #vc_seo-description-field, #vc_seo-slug-field, #social-title-facebook, #social-description-facebook, #social-title-x, #social-description-x":"handleInputChange"},initialize:function(){_.bindAll(this,"fixElContainment","setSize"),this.on("setSize",this.setResize,this),this.setFormDataState()},render:function(){this.$el.is(":hidden")&&vc.closeActivePanel(),(vc.active_panel=this).show()},show:function(){var e;this.$el.hasClass("vc_active")||(this.$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"),(e=this.$el.find(".vc_panel-tab")).length&&(this.$tabs=e))},changeTab:function(a){a.preventDefault(),a=t(a.currentTarget).parent(),t("[data-vc-ui-element=\"panel-add-element-tab\"].vc_active").removeClass("vc_active"),a.addClass("vc_active"),this.$tabs.filter(".vc_active").removeClass("vc_active"),a=a.data("tabIndex"),this.$tabs.filter("[data-tab-index=\""+a+"\"]").addClass("vc_active")},removeImage:function(a){var e=t(a.currentTarget),n=e.closest(".edit_form_line"),o=n.attr("data-social-net-preview-slug"),o=t("#"+o);o.find(".wpb-social-placeholder-image").show(),o.find("img").attr("src",""),n.find(".gallery_widget_attached_images_ids").val(""),a&&a.preventDefault&&a.preventDefault(),e.parent().remove()},updateImagePreview:function(a){var a=t(a.currentTarget).closest(".edit_form_line"),n=a.find(".inner img").attr("src"),a=a.attr("data-social-net-preview-slug"),o;a&&n&&(n=n.replace("-150x150",""),(o=(a=t("#"+a)).find("img")).attr("src",n),o.show(),a.find(".wpb-social-placeholder-image").hide())},updateTitlePreview:function(a){a=t(a.currentTarget),a.closest(".vc_seo-social-block").find(".wpb-social-net-preview .vc_social-title").text(a.val())},updateDescriptionPreview:function(a){var a=t(a.currentTarget),n=a.closest(".vc_seo-social-block"),a=a.val();n.find(".wpb-social-net-preview .vc_social-description").text(a),n.find(".vc_social-description-counter").text(a.length)},focusTarget:function(a){a=t(a.currentTarget).data("focus"),t("#"+a).focus()},changePreviewMode:function(a){var e=this.$el.find(".page-preview");"mobile"===t(a.currentTarget).val()?e.removeClass("desktop-view"):e.addClass("desktop-view")},createSlug:function(e){return e=e.toLowerCase(),e=(e=(e=e.replace(/\s+/g,"-")).replace(/[^a-zA-Z0-9\-]/g,"")).replace(/^[.,!?()[]{}<>:;]+|[.,!?()[]{}<>:;]+$/g,"")},updateGeneralPreviewText:function(a){var n=t(a.currentTarget).val(),a=("vc_seo-slug-field"===t(a.currentTarget).attr("id")&&(n=this.createSlug(n)),t(a.currentTarget).data("preview")),a=this.$el.find("#"+a);a&&a.text(n)},handleInputChange:function(t){var e=t.target.value.trim();vc.seo_storage.setResults(e,t.target.name,"formData")},setFormDataState:function(){this.$el.find("#vc_ui-seo-general").find("input[type=\"text\"], textarea").each(function(e,a){var n=t(a).attr("name"),a=t(a).val();vc.seo_storage.setResults(a,n,"formData")}),this.$el.find("#vc_ui-seo-social").find("input[type=\"text\"], textarea").each(function(e,a){var n=t(a).attr("name"),a=t(a).val();vc.seo_storage.setResults(a,n,"formData")})},fillSocialInputs:function(a){var n=t(a.currentTarget).val(),a=t(a.currentTarget).attr("name"),o=vc.seo_storage.get("formData"),i={title:["social-title-x","social-title-facebook"],description:["social-description-x","social-description-facebook"]};i[a]&&i[a].forEach(function(e){o[e]||t("#"+e).val(n).trigger("input")})}})}(window.jQuery),window.vc||(window.vc={}),function(e){"use strict";vc.SeoAnalysisView=Backbone.View.extend({$wpbContentWrapper:null,$navbarIcon:null,currentBadge:"",initialize:function(){this.$wpbContentWrapper=this.getContentWrapper(),this.$navbarIcon=e("#vc_seo-button"),vc.seo_utils.createMeasurementElement(),vc.seo_checks.analyzeContent(this.$wpbContentWrapper),this.render(),this.setIconBadge(),this.setEvents()},render:function(){vc.seo_checks.analyzeContent(this.$wpbContentWrapper);var e=this.getNotificationsHtml();this.$el.html(e),this.setIconBadge()},setEvents:function(){this.debouncedRender=_.debounce(this.render,200),this.listenTo(this.model,"formData",this.debouncedRender),"admin_frontend_editor"===window.vc_mode?(vc.events.on("afterRender",this.debouncedRender,this),vc.events.on("shortcodeView:updated",this.debouncedRender,this),vc.events.on("afterLoadShortcode",this.debouncedRender,this)):(vc.events.on("shortcodes:update",this.debouncedRender,this),vc.events.on("shortcodes:add",this.debouncedRender,this),vc.events.on("undoredo:undo",this.debouncedRender,this),vc.events.on("undoredo:redo",this.debouncedRender,this)),vc.events.on("shortcodes:destroy",this.debouncedRender,this)},getNotificationsHtml:function(){var e=this,t=this.model.get("results"),a={success:[],problems:[],warnings:[]},n=(t.forEach(function(e){a[e.state].push(e)}),[]),o=["problems","warnings","success"];return Object.keys(a).sort(function(e,t){return o.indexOf(e)-o.indexOf(t)}).forEach(function(t){a[t].length&&(t=e.getResultsHtml(t,a[t]),n.push(t))}),n},setIconBadge:function(){function e(e){return a.find(function(t){return e===t.state})}var t="success",a=this.model.get("results");e("problems")?t="problems":e("warnings")&&(t="warnings"),this.$navbarIcon.removeClass(this.currentBadge),this.currentBadge="vc_ui-badge--"+t,this.$navbarIcon.addClass(this.currentBadge)},getResultsHtml:function(t,a){var t=e("<div class=\"vc_ui-seo-results-section\"><strong>"+window.i18nLocale[t]+"</strong><ul class=\"vc_ui-seo-results-list\"></ul></div>"),n=t.find("ul");return e.each(a,function(t,a){a=e("<li class=\"vc_ui-seo-results-list-item vc_ui-seo-results-list-item--"+a.state+"\">"+a.title+": "+a.description+"</li>"),n.append(a)}),t},getContentWrapper:function(){return"admin_frontend_editor"===window.vc_mode?vc.$frame.contents().find(".wpb-content-wrapper"):e("#wpbakery_content")}}),vc.events.on("app.render",function(){setTimeout(function(){vc.seo_analysis_view=new vc.SeoAnalysisView({el:"#vc_ui-seo-analysis",model:vc.seo_storage})},1e3)})}(window.jQuery),window._.isUndefined(window.vc)&&(window.vc={}),function(e,t,a){"use strict";window.vc_toTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},window.vc_convert_column_size=function(e){var e=e?e.split("/"):[1,1],a=t.range(1,13),n=!t.isUndefined(e[0])&&0<=t.indexOf(a,parseInt(e[0],10))&&parseInt(e[0],10),a=!t.isUndefined(e[1])&&0<=t.indexOf(a,parseInt(e[1],10))&&parseInt(e[1],10);return!1!==n&&!1!==a?"vc_col-sm-"+12*n/a:"vc_col-sm-12"},window.vc_convert_column_span_size=function(e){return"span12"===(e=e.replace(/^vc_/,""))?"1/1":"span11"===e?"11/12":"span10"===e?"5/6":"span9"===e?"3/4":"span8"===e?"2/3":"span7"===e?"7/12":"span6"===e?"1/2":"span5"===e?"5/12":"span4"===e?"1/3":"span3"===e?"1/4":"span2"===e?"1/6":"span1"===e&&"1/12"},window.vc_get_column_mask=function(e){var a=e.split("_"),e=a.length,n,o,s;for(n in s=0,a)!isNaN(parseFloat(a[n]))&&isFinite(a[n])&&(o=a[n].match(/(\d{1,2})(\d{1,2})/),s=t.reduce(o.slice(1),function(e,t){return e+parseInt(t,10)},s));return e+""+s},window.VCS4=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)},window.vc_guid=function(){return window.VCS4()+window.VCS4()+"-"+window.VCS4()},window.vc_button_param_target_callback=function(){var e=this.$content.find("[name=target]").parents("[data-vc-ui-element=\"panel-shortcode-param\"]:first"),n=a(".wpb-edit-form [name=href]"),o=t.debounce(function(){var t=a(this).val();0<t.length&&"http://"!==t&&"https://"!==t?e.show():e.hide()},300);n.on("keyup",o).trigger("keyup")},window.vc_cta_button_param_target_callback=function(){var e=this.$content.find("[name=target]").parents("[data-vc-ui-element=\"panel-shortcode-param\"]:first"),n=a(".wpb-edit-form [name=href]"),o=t.debounce(function(){var t=a(this).val();0<t.length&&"http://"!==t&&"https://"!==t?e.show():e.hide()},300);n.on("keyup",o).trigger("keyup")},window.vc_grid_exclude_dependency_callback=function(){var e=a(".wpb_vc_param_value[name=exclude]",this.$content).data("vc-param-object");if(!e)return!1;var t=a("select.wpb_vc_param_value[name=\"post_type\"]",this.$content),n=t.val();e.source_data=function(e){return{query:{query:n,term:e.term}}},e.source_data_val=n,t.on("change",function(){n=a(this).val(),e.source_data_val!=n&&(e.source_data=function(e){return{query:{query:n,term:e.term}}},e.$el.data("uiAutocomplete").destroy(),e.$sortable_wrapper.find(".vc_data").remove(),e.render(),e.source_data_val=n)})},window.vcGridFilterExcludeCallBack=function(){var e=a(".wpb_vc_param_value[name=filter_source]",this.$content),t=e.val(),n=a(".wpb_vc_param_value[name=exclude_filter]",this.$content).data("vc-param-object");return void 0!==n&&void e.on("change",function(){var e=a(this);t!==e.val()&&n.clearValue(),n.source_data=function(){return{vc_filter_by:e.val()}}}).trigger("change")},window.vcGridTaxonomiesCallBack=function(){var e=a(".wpb_vc_param_value[name=post_type]",this.$content),t=e.val(),n=a(".wpb_vc_param_value[name=taxonomies]",this.$content).data("vc-param-object");return void 0!==n&&void e.on("change",function(){var o=a(this);t!==o.val()&&n.clearValue(),n.source_data=function(){return{vc_filter_post_type:e.val()}}}).trigger("change")},window.vcChartCustomColorDependency=function(){var e=a(".wpb_vc_param_value[name=style]",this.$content),t=this.$content;e.on("change",function(){var e=a(this).val();t.toggleClass("vc_chart-edit-form-custom-color","custom"===e)}),e.trigger("change")},window.vc_wpnop=function(e){var t,a,n,o,i;return e=void 0===e?"":e+"",window.switchEditors&&void 0!==window.switchEditors.pre_wpautop?(e=window.switchEditors.pre_wpautop(e)).replace(/<p>(<!--(?:.*)-->)<\/p>/g,"$1"):e?(t=(a="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure")+"|div|p",a+="|pre",o=n=!1,i=[],-1!==(e=-1===e.indexOf("<script")&&-1===e.indexOf("<style")?e:e.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(e){return i.push(e),"<wp-preserve>"})).indexOf("<pre")&&(n=!0,e=e.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,function(e){return(e=(e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")})),-1!==e.indexOf("[caption")&&(o=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")})),e=(e=(e=(e=(e=-1===(e=-1===(e=-1===(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("\\s*</("+t+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+t+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,function(e,t){return t&&-1!==t.indexOf("\n")?"\n\n":"\n"})).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+a+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+a+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")?e:(e=e.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")).indexOf("<hr")?e:e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")).indexOf("<object")?e:e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")})).replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),n&&(e=e.replace(/<wp-line-break>/g,"\n")),o&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),i.length?e.replace(/<wp-preserve>/g,function(){return i.shift()}):e):""},window.vc_wpautop=function(e){var t,a,n;return e=void 0===e?"":e+"",(e=window.switchEditors&&void 0!==window.switchEditors.wpautop?window.switchEditors.wpautop(e):(a=t=!1,n="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary",-1===(e=(e=-1===(e=e.replace(/\r\n|\r/g,"\n")).indexOf("<object")?e:e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/\n+/g,"")})).replace(/<[^<>]+>/g,function(e){return e.replace(/[\n\t ]+/g," ")})).indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,function(e){return e.replace(/\n/g,"<wp-line-break>")})),-1!==(e=-1===e.indexOf("<figcaption")?e:(e=e.replace(/\s*(<figcaption[^>]*>)/g,"$1")).replace(/<\/figcaption>\s*/g,"</figcaption>")).indexOf("[caption")&&(a=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return(e=(e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>")).replace(/<[^<>]+>/g,function(e){return e.replace(/[\n\t ]+/," ")})).replace(/\s*\n\s*/g,"<wp-temp-br />")})),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="\n\n").replace(/<br \/>\s*<br \/>/gi,"\n\n")).replace(new RegExp("(<(?:"+n+")(?: [^>]*)?>)","gi"),"\n\n$1")).replace(new RegExp("(</(?:"+n+")>)","gi"),"$1\n\n")).replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n")).replace(/\s*<option/gi,"<option")).replace(/<\/option>\s*/gi,"</option>")).replace(/\n\s*\n+/g,"\n\n")).replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n")).replace(/<p>\s*?<\/p>/gi,"")).replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/<p>(<li.+?)<\/p>/gi,"$1")).replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)","gi"),"$1")).replace(new RegExp("(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/(<br[^>]*>)\s*\n/gi,"$1")).replace(/\s*\n/g,"<br />\n")).replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*<br />","gi"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1")).replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]")).replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(e,t,a){return a.match(/<p( [^>]*)?>/)?e:t+"<p>"+a+"</p>"}),t&&(e=e.replace(/<wp-line-break>/g,"\n")),a?e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>"):e)).replace(/<p>(<!--(?:.*)-->)<\/p>/g,"$1")},window.vc_regexp_shortcode=t.memoize(function(){return /\[(\[?)([\w|-]+\b)(?![\w-])([^\]\/]*(?:\/(?!\])[^\]\/]*)*?)(?:(\/)\]|\](?:([^\[]*(?:\[(?!\/\2\])[^\[]*)*)(\[\/\2\]))?)(\]?)/}),window.vcAddShortcodeDefaultParams=function(a){var n=a.get("params"),o=a.get("preset"),n=t.extend({},e.getDefaults(a.get("shortcode")),n);o&&window.vc_all_presets[o]&&(n=window.vc_all_presets[o],void 0!==e.frame_window)&&window.vc_all_presets[o].css&&e.frame_window.vc_iframe.setCustomShortcodeCss(window.vc_all_presets[o].css),a.set({params:n},{silent:!0})},window.vc_globalHashCode=function(e){return(e="string"==typeof e?e:JSON.stringify(e)).length?e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0):0},e.memoizeWrapper=function(e,a){var n={};return function(){var o=a?a.apply(this,arguments):arguments[0];return t.hasOwnProperty.call(n,o)||(n[o]=e.apply(this,arguments)),t.isObject(n[o])?window.jQuery.fn.extend(!0,{},n[o]):n[o]}},window.vcChartParamAfterAddCallback=function(e,t){if("new"!==t&&"clone"!==t||e.find(".vc_control.column_toggle").click(),"new"===t){for(var a=["white","black"],n=e.find("[name=values_color]"),o=n.find("option"),s=0,l;;){if(100<s++)break;if(l=Math.floor(Math.random()*o.length),-1===window.jQuery.inArray(o.eq(l).val(),a)){o.eq(l).prop("selected",!0),n.trigger("change");break}}t=["#5472d2","#00c1cf","#fe6c61","#8d6dc4","#4cadc9","#cec2ab","#50485b","#75d69c","#f7be68","#5aa1e3","#6dab3c","#f4524d","#f79468","#b97ebb","#ebebeb","#f7f7f7","#0088cc","#58b9da","#6ab165","#ff9900","#ff675b","#555555"],l=Math.floor(Math.random()*t.length),e.find("[name=values_custom_color]").val(t[l]).trigger("change")}},e.events.on("shortcodes:vc_row:add:param:name:parallax shortcodes:vc_row:update:param:name:parallax",function(e,t){t&&(t=e.get("params"))&&t.css&&(t.css=t.css.replace(/(background(\-position)?\s*\:\s*[\S]+(\s*[^\!\s]+)?)[\s*\!important]*/g,"$1"),e.set("params",t,{silent:!0}))}),e.events.on("shortcodes:vc_single_image:sync shortcodes:vc_single_image:add",function(e){var t=e.get("params");t.link&&!t.onclick&&(t.onclick="custom_link",e.save({params:t}))}),window.vcEscapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return null==e?"":e.replace(/[&<>"']/g,function(e){return t[e]})},window.vc_slugify=function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}}(window.vc,window._,window.jQuery),window.jQuery.expr.pseudos.containsi=function(e,t,a){return 0<=window.jQuery(e).text().toUpperCase().indexOf(a[3].toUpperCase())},_.isUndefined(window.vc)&&(window.vc={}),window.vc.filters={templates:[]},window.vc.addTemplateFilter=function(e){_.isFunction(e)&&this.filters.templates.push(e)},function(t){"use strict";function e(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape)}function a(e,a){this.el=e,this.$el=t(this.el),this.$el_wrap="",this.$block="",this.suggester="",this.selected_items=[],this.options=_.isObject(a)?a:{},_.defaults(this.options,{css_class:"vc_suggester",limit:!1,source:{},predefined:[],locked:!1,select_callback:function(){},remove_callback:function(){},update_callback:function(){},check_locked_callback:function(){return!1}}),this.init()}function n(e){this.el=e,this.$el=t(this.el),this.$data_field=this.$el.find(".wpb_vc_param_value"),this.$toolbar=this.$el.find(".vc_sorted-list-toolbar"),this.$current_control=this.$el.find(".vc_sorted-list-container"),_.defaults(this.options,{}),this.init()}window.init_textarea_html=function(a){var n=t("#wp-link"),o,i;n.parent().hasClass("wp-dialog")&&n.wpdialog("destroy"),o=a.attr("id"),i=(n=a.closest(".edit_form_line")).find(".vc_textarea_html_content");try{_.isUndefined(tinyMCEPreInit.qtInit[o])&&(window.tinyMCEPreInit.qtInit[o]=_.extend({},window.tinyMCEPreInit.qtInit[window.wpActiveEditor],{id:o})),window.tinyMCEPreInit&&window.tinyMCEPreInit.mceInit[window.wpActiveEditor]&&(window.tinyMCEPreInit.mceInit[o]=_.extend({},window.tinyMCEPreInit.mceInit[window.wpActiveEditor],{resize:"vertical",height:200,id:o,setup:function(e){void 0!==e.onLoadContent&&e.onLoadContent.add(function(){var e=setTimeout(function(){1===t("#"+o).size()&&(t(".vc_edit-form-tab *:input[type!=hidden]:first").focus(),clearTimeout(e))},100)}),void 0===e.on?e.onInit.add(function(){window.wpActiveEditor=o}):e.on("init",function(){window.wpActiveEditor=o})}}),window.tinyMCEPreInit.mceInit[o].plugins=window.tinyMCEPreInit.mceInit[o].plugins.replace(/,?wpfullscreen/,""),window.tinyMCEPreInit.mceInit[o].wp_autoresize_on=!1),vc.edit_element_block_view&&vc.edit_element_block_view.currentModelParams?a.val(vc_wpautop(vc.edit_element_block_view.currentModelParams[i.attr("name")]||"")):a.val(i.val()),quicktags(window.tinyMCEPreInit.qtInit[o]),QTags._buttonsInit(),window.tinymce&&(window.switchEditors&&window.switchEditors.go(o,"tmce"),"4"===tinymce.majorVersion)&&tinymce.execCommand("mceAddEditor",!0,o),window.wpActiveEditor=o}catch(i){a.data("vcTinyMceDisabled",!0).appendTo(n),t("#wp-"+o+"-wrap").remove(),console&&console.error&&(console.error("VC: Tinymce error! Compatibility problem with other plugins."),console.error(i))}},Color.prototype.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>e.length)for(var t=6-e.length-1;0<=t;t--)e="0"+e;return"#"+e},vc.loop_partial=function(e,a,n,o){return n=_.isObject(n)&&!_.isUndefined(n[a])?n[a]:"",vc.template(t("#_vcl-"+e).html(),vc.templateOptions.custom)({name:a,data:n,settings:o})},vc.loop_field_not_hidden=function(e,t){return!(_.isObject(t[e])&&_.isBoolean(t[e].hidden)&&!0===t[e].hidden)},vc.is_locked=function(e){return _.isObject(e)&&_.isBoolean(e.locked)&&!0===e.locked},a.prototype={constructor:a,init:function(){_.bindAll(this,"buildSource","itemSelected","labelClick","setFocus","resize"),this.$el.wrap("<ul class=\""+this.options.css_class+"\"><li class=\"input\"/></ul>"),this.$el_wrap=this.$el.parent(),this.$block=this.$el_wrap.closest("ul").append(t("<li class=\"clear\"/>")),this.$el.on("focus",this.resize).on("blur",function(){t(this).parent().width(170),t(this).val("")}),this.$block.on("click",this.setFocus),this.suggester=this.$el.data("suggest"),this.$el.autocomplete({source:this.buildSource,select:this.itemSelected,minLength:2,focus:function(){return!1}}).data("ui-autocomplete")._renderItem=function(e,a){return t("<li data-value=\""+a.value+"\">").append("<a>"+a.name+"</a>").appendTo(e)},this.$el.autocomplete("widget").addClass("vc_ui-front"),_.isArray(this.options.predefined)&&_.each(this.options.predefined,function(e){this.create(e)},this)},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position();this.$el_wrap.width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4))},setFocus:function(a){a.preventDefault(),t(a.target).hasClass(this.options.css_class)&&this.$el.trigger("focus")},itemSelected:function(e,t){return this.$el.blur(),this.create(t.item),this.$el.trigger("focus"),!1},create:function(e){var a=this.selected_items.push(e)-1,n=!0===this.options.check_locked_callback(this.$el,e)?"":" <a class=\"remove\">&times;</a>",o;_.isUndefined(this.selected_items[a].action)&&(this.selected_items[a].action="+"),o="-"===this.selected_items[a].action?" exclude":" include",(o=t("<li class=\"vc_suggest-label"+o+"\" data-index=\""+a+"\" data-value=\""+e.value+"\"><span class=\"label\">"+e.name+"</span>"+n+"</li>")).insertBefore(this.$el_wrap),_.isEmpty(n)||o.on("click",this.labelClick),this.options.select_callback(o,this.selected_items)},labelClick:function(a){a.preventDefault();var e=t(a.currentTarget),n=parseInt(e.data("index"),10);return t(a.target).is(".remove")?(this.selected_items.splice(n,1),this.options.remove_callback(e,this.selected_items),e.remove(),!1):void(this.selected_items[n].action="+"===this.selected_items[n].action?"-":"+","+"===this.selected_items[n].action?e.removeClass("exclude").addClass("include"):e.removeClass("include").addClass("exclude"),this.options.update_callback(e,this.selected_items))},buildSource:function(e,a){this.ajax&&(this.ajax.abort(),a([]),this.ajax=!1);var n=_.filter(_.map(this.selected_items,function(e){return e?e.value:void 0})).join(",");this.ajax=t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_suggestion",field:this.suggester,exclude:n,query:e.term,_vcnonce:window.vcAdminNonce}}).done(function(e){a(e)})}},t.fn.suggester=function(e){return this.each(function(){var n=t(this),o=n.data("suggester");o||n.data("suggester",o=new a(this,e)),"string"==typeof e&&o[e]()})};var o=Backbone.View.extend({className:"loop_params_holder",events:{"click input, select":"save","change input, select":"save","change :checkbox[data-input]":"updateCheckbox"},query_options:{},return_array:{},controller:"",initialize:function(){_.bindAll(this,"save","updateSuggestion","suggestionLocked")},render:function(e){var a=vc.template(t("#vcl-loop-frame").html(),_.extend({},vc.templateOptions.custom,{variable:"loop"}));return this.controller=e,this.$el.html(a(this.model)),this.controller.$el.append(this.$el),_.each(t("[data-suggest]"),function(e){var e=t(e),a=window.decodeURIComponent(t("[data-suggest-prefill="+e.data("suggest")+"]").val());e.suggester({predefined:t.parseJSON(a),select_callback:this.updateSuggestion,update_callback:this.updateSuggestion,remove_callback:this.updateSuggestion,check_locked_callback:this.suggestionLocked})},this),this.save(),this},show:function(){this.$el.slideDown()},save:function(){this.return_array={},_.each(this.model,function(e,t){e=this.getValue(t,e),_.isString(e)&&!_.isEmpty(e)&&(this.return_array[t]=e)},this),this.controller.setInputValue(this.return_array)},getValue:function(e){return t("[name="+e+"]",this.$el).val()},hide:function(){this.$el.slideUp()},toggle:function(){this.$el.is(":animated")||this.$el.slideToggle()},updateCheckbox:function(a){var a=t(a.currentTarget).data("input"),n=t("[data-name="+a+"]",this.$el),o=[];t("[data-input="+a+"]:checked").each(function(){o.push(t(this).val())}),n.val(o),this.save()},updateSuggestion:function(e,t){e=e.closest("[data-block=suggestion]"),t=_.reduce(t,function(e,t){return _.isEmpty(t)?"":e+(_.isEmpty(e)?"":",")+("-"===t.action?"-":"")+t.value},"").trim(),e.find("[data-suggest-value]").val(t).trigger("change")},suggestionLocked:function(e,t){return t=t.value,e=e.closest("[data-block=suggestion]").find("[data-suggest-value]").data("suggest-value"),this.controller.settings&&this.controller.settings[e]&&_.isBoolean(this.controller.settings[e].locked)&&1==this.controller.settings[e].locked&&_.isString(this.controller.settings[e].value)&&0<=_.indexOf(this.controller.settings[e].value.replace("-","").split(/\,/),""+t)}}),i=Backbone.View.extend({events:{"click .vc_loop-build":"showEditor"},initialize:function(){_.bindAll(this,"createEditor"),this.$input=t(".wpb_vc_param_value",this.$el),this.$button=this.$el.find(".vc_loop-build"),this.data=this.$input.val(),this.settings=t.parseJSON(window.decodeURIComponent(this.$button.data("settings")))},render:function(){return this},showEditor:function(a){return(a.preventDefault(),_.isObject(this.loop_editor_view))?(this.loop_editor_view.toggle(),!1):void t.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_settings",value:this.data,settings:this.settings,post_id:vc_post_id,_vcnonce:window.vcAdminNonce}}).done(this.createEditor)},createEditor:function(e){this.loop_editor_view=new o({model:_.isEmpty(e)?{}:e}),this.loop_editor_view.render(this).show()},setInputValue:function(e){this.$input.val(_.map(e,function(e,t){return t+":"+e}).join("|"))}}),s=Backbone.View.extend({events:{"click .vc_options-edit":"showEditor","click .vc_close-button":"showEditor","click input, select":"save","change input, select":"save","keyup input":"save"},data:{},fields:{},initialize:function(){this.$button=this.$el.find(".vc_options-edit"),this.$form=this.$el.find(".vc_options-fields"),this.$input=this.$el.find(".wpb_vc_param_value"),this.settings=this.$form.data("settings"),this.parseData(),this.render()},render:function(){var e="";return _.each(this.settings,function(a){_.isUndefined(this.data[a.name])?_.isUndefined(a.value)||(a.value=a.value.toString().split(","),this.data[a.name]=a.value):a.value=this.data[a.name],this.fields[a.name]=a;var n=t("#vcl-options-field-"+a.type);n.is("script")&&(n=vc.template(n.html(),vc.templateOptions.custom),e+=n(_.extend({},{name:"",label:"",value:[],options:"",description:""},a)))},this),this.$form.html(e+this.$form.html()),this},parseData:function(){_.each(this.$input.val().split("|"),function(e){var t;e.match(/\:/)&&(t=(e=e.split(":"))[0],e=e[1],this.data[t]=_.map(e.split(","),function(e){return window.decodeURIComponent(e)}))},this)},saveData:function(){var e=_.map(this.data,function(e,t){return t+":"+_.map(e,function(e){return window.encodeURIComponent(e)}).join(",")}).join("|");this.$input.val(e)},showEditor:function(){this.$form.slideToggle()},save:function(a){var a=t(a.currentTarget),n;a.is(":checkbox")?(n=[],this.$el.find("input[name="+a.attr("name")+"]").each(function(){this.checked&&n.push(t(this).val())}),this.data[a.attr("name")]=n):this.data[a.attr("name")]=[a.val()],this.saveData()}});n.prototype={constructor:n,init:function(){function e(e){return window.decodeURIComponent(e)}_.bindAll(this,"controlEvent","save"),this.$toolbar.on("change","input",this.controlEvent);var t=this.$data_field.val().split(","),a;for(a in t){var n=t[a].split("|"),o=n.length&&n[0].length&&this.$toolbar.find("[data-element="+decodeURIComponent(n[0])+"]");!1!==o&&o.is("input")&&(o.prop("checked",!0),this.createControl({value:o.val(),label:o.parent().text(),sub:o.data("subcontrol"),sub_value:_.map(n.slice(1),e)}))}this.$current_control.sortable({stop:this.save}).on("change","select",this.save)},createControl:function(e){var t="",a=_.isUndefined(e.sub_value)?[]:e.sub_value;_.isArray(e.sub)&&_.each(e.sub,function(e,n){t+=" <select>",_.each(e,function(e){t+="<option value=\""+e[0]+"\""+(_.isString(a[n])&&a[n]===e[0]?" selected=\"true\"":"")+">"+e[1]+"</option>"}),t+="</select>"},this),this.$current_control.append("<li class=\"vc_control-"+e.value+"\" data-name=\""+e.value+"\">"+e.label+t+"</li>")},controlEvent:function(a){a=t(a.currentTarget),a[0].checked?this.createControl({value:a.val(),label:a.parent().text(),sub:a.data("subcontrol")}):this.$current_control.find(".vc_control-"+a.val()).remove(),this.save()},save:function(){var e=_.map(this.$current_control.find("[data-name]"),function(e){var a=encodeURIComponent(t(e).data("name"));return t(e).find("select").each(function(){var e=t(this);e.is("select")&&""!==e.val()&&(a+="|"+encodeURIComponent(e.val()))}),a}).join(",");this.$data_field.val(e)}},t.fn.VcSortedList=function(e){return this.each(function(){var a=t(this),o=a.data("vc_sorted_list");_.isObject(e),o||a.data("vc_sorted_list",o=new n(this)),"string"==typeof e&&o[e]()})};var l=Backbone.View.extend({preview_el:".vc_google_fonts_form_field-preview-container > span",font_family_dropdown_el:".vc_google_fonts_form_field-font_family-container > select",font_style_dropdown_el:".vc_google_fonts_form_field-font_style-container > select",font_style_dropdown_el_container:".vc_google_fonts_form_field-font_style-container",status_el:".vc_google_fonts_form_field-status-container > span",events:{"change .vc_google_fonts_form_field-font_family-container > select":"fontFamilyDropdownChange","change .vc_google_fonts_form_field-font_style-container > select":"fontStyleDropdownChange"},initialize:function(){_.bindAll(this,"previewElementInactive","previewElementActive","previewElementLoading"),this.$preview_el=t(this.preview_el,this.$el),this.$font_family_dropdown_el=t(this.font_family_dropdown_el,this.$el),this.$font_style_dropdown_el=t(this.font_style_dropdown_el,this.$el),this.$font_style_dropdown_el_container=t(this.font_style_dropdown_el_container,this.$el),this.$status_el=t(this.status_el,this.$el),this.fontFamilyDropdownRender()},render:function(){return this},previewElementRender:function(){return this.$preview_el.css({"font-family":this.font_family,"font-style":this.font_style,"font-weight":this.font_weight}),this},previewElementInactive:function(){this.$status_el.text(window.i18nLocale.gfonts_loading_google_font_failed||"Loading google font failed.").css("color","#FF0000")},previewElementActive:function(){this.$preview_el.text("Grumpy wizards make toxic brew for the evil Queen and Jack.").css("color","inherit"),this.fontStyleDropdownRender()},previewElementLoading:function(){this.$preview_el.text(window.i18nLocale.gfonts_loading_google_font||"Loading Font...")},fontFamilyDropdownRender:function(){return this.fontFamilyDropdownChange(),this},fontFamilyDropdownChange:function(){var e=this.$font_family_dropdown_el.find(":selected");return this.font_family_url=e.val(),this.font_family=e.attr("data[font_family]"),this.font_types=e.attr("data[font_types]"),this.$font_style_dropdown_el_container.parent().hide(),this.font_family_url&&0<this.font_family_url.length&&WebFont.load({google:{families:[this.font_family_url]},inactive:this.previewElementInactive,active:this.previewElementActive,loading:this.previewElementLoading}),this},fontStyleDropdownRender:function(){var e=this.font_types.split(","),t="",a=this.$font_family_dropdown_el.attr("default[font_style]"),n;for(n in e)var o=e[n].split(":"),i="",t=t+"<option "+(i=_.isString(a)&&0<a.length&&e[n]==a?"selected":i)+" value=\""+e[n]+"\" data[font_weight]=\""+o[1]+"\" data[font_style]=\""+o[2]+"\" class=\""+o[2]+"_"+o[1]+"\" >"+o[0]+"</option>";return this.$font_style_dropdown_el.html(t),this.$font_style_dropdown_el_container.parent().show(),this.fontStyleDropdownChange(),this},fontStyleDropdownChange:function(){var e=this.$font_style_dropdown_el.find(":selected");return this.font_weight=e.attr("data[font_weight]"),this.font_style=e.attr("data[font_style]"),this.previewElementRender(),this}}),r=Backbone.View.extend({min_length:2,delay:500,auto_focus:!0,ajax_url:window.ajaxurl,source_data:function(){return{}},replace_values_on_select:!1,initialize:function(e){_.bindAll(this,"sortableChange","resize","labelRemoveHook","updateItems","sortableCreate","sortableUpdate","source","select","labelRemoveClick","createBox","focus","response","change","close","open","create","search","_renderItem","_renderMenu","_renderItemData","_resizeMenu"),e=t.extend({min_length:this.min_length,delay:this.delay,auto_focus:this.auto_focus,replace_values_on_select:this.replace_values_on_select},e),this.options=e,this.param_name=this.options.param_name,this.$el=this.options.$el,this.$el_wrap=this.$el.parent(),this.$sortable_wrapper=this.$el_wrap.parent(),this.$input_param=this.options.$param_input,this.selected_items=[],this.isMultiple=!1,this.render()},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position();this.$el.autocomplete("widget").width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4)+11)},enableMultiple:function(){this.isMultiple=!0,this.$el.show(),this.$el.trigger("focus")},enableSortable:function(){this.sortable=this.$sortable_wrapper.sortable({items:".vc_data",axis:"y",change:this.sortableChange,create:this.sortableCreate,update:this.sortableUpdate})},updateItems:function(){this.selected_items.length?this.$input_param.val(this.getSelectedItems().join(", ")):this.$input_param.val("")},sortableChange:function(){},itemsCreate:function(){var e=[];this.$block.find(".vc_data").each(function(t,a){e.push({label:a.dataset.label,value:a.dataset.value})}),this.selected_items=e},sortableCreate:function(){},sortableUpdate:function(){var e=this.$sortable_wrapper.sortable("toArray",{attribute:"data-index"}),a=[],n=(_.each(e,function(e){a.push(this.selected_items[e])},this),0);t("li.vc_data",this.$sortable_wrapper).each(function(){t(this).attr("data-index",n++)}),this.selected_items=a,this.updateItems()},getWidget:function(){return this.$el.autocomplete("widget")},render:function(){var e;return this.$el.on("focus",this.resize),this.data=this.$el.autocomplete({source:this.source,minLength:this.options.min_length,delay:this.options.delay,autoFocus:this.options.auto_focus,select:this.select,focus:this.focus,response:this.response,change:this.change,close:this.close,open:this.open,create:this.create,search:this.search}),this.data.data("ui-autocomplete")._renderItem=this._renderItem,this.data.data("ui-autocomplete")._renderMenu=this._renderMenu,this.data.data("ui-autocomplete")._resizeMenu=this._resizeMenu,0<this.$input_param.val().length&&(this.isMultiple?this.$el.trigger("focus"):this.$el.hide(),t(".vc_autocomplete-label.vc_data",(e=this).$sortable_wrapper).each(function(){e.labelRemoveHook(t(this))})),this.getWidget().addClass("vc_ui-front").addClass("vc_ui-auotocomplete"),this.$block=this.$el_wrap.closest("ul").append(t("<li class=\"clear\"/>")),this.itemsCreate(),this},close:function(){this.selected&&this.options.no_hide&&(this.getWidget().show(),this.selected++,2<this.selected)&&(this.selected=void 0)},open:function(){var e=this.getWidget().menu(),t=e.position();e.css("left",t.left-6),e.css("top",t.top+2)},focus:function(e){if(!this.options.replace_values_on_select)return e.preventDefault(),!1},create:function(){},change:function(){},response:function(){},search:function(){},select:function(e,a){var n,o,i;return this.selected=1,a.item&&(this.options.unique_values&&(n=this.getWidget().data("uiMenu").active,this.options.groups&&(o=n.prev(),i=n.next(),o.hasClass("vc_autocomplete-group"))&&!i.hasClass("vc_autocomplete-item")&&o.remove(),n.remove(),t("li.ui-menu-item",this.getWidget()).length||(this.selected=void 0)),this.createBox(a.item),this.isMultiple?this.$el.trigger("focus"):this.$el.hide()),!1},createBox:function(e){var a=this.selected_items.push(e)-1;this.updateItems(),(a=t("<li class=\"vc_autocomplete-label vc_data\" data-index=\""+a+"\" data-value=\""+e.value+"\" data-label=\""+e.label+"\"><span class=\"vc_autocomplete-label\"><a>"+e.label+"</a></span><a class=\"vc_autocomplete-remove\">&times;</a></li>")).insertBefore(this.$el_wrap),this.labelRemoveHook(a)},labelRemoveHook:function(e){this.$el.blur(),this.$el.val(""),e.on("click",this.labelRemoveClick)},labelRemoveClick:function(a){a.preventDefault();var e=t(a.currentTarget);if(t(a.target).is(".vc_autocomplete-remove"))return this.selected_items.splice(e.index(),1),e.remove(),this.updateItems(),this.$el.show(),!1},getSelectedItems:function(){var e;return!!this.selected_items.length&&(e=[],_.each(this.selected_items,function(t){e.push(t.value)}),e)},_renderMenu:function(e,a){var n=this,o=null;this.options.groups&&a.sort(function(e,t){return e.group>t.group}),t.each(a,function(t,a){n.options.groups&&a.group!=o&&(o=a.group,e.append("<li class='ui-autocomplete-group vc_autocomplete-group' aria-label='"+o+"'>"+o+"</li>")),n._renderItemData(e,a)})},_renderItem:function(e,a){return t("<li data-value=\""+a.value+"\" class=\"vc_autocomplete-item\">").append("<a>"+a.label+"</a>").appendTo(e)},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_resizeMenu:function(){},clearValue:function(){this.selected_items=[],this.updateItems(),t(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).remove()},source:function(e,a){var n=this;this.options.values&&0<this.options.values.length?this.options.unique_values?a(t.ui.autocomplete.filter(_.difference(this.options.values,this.selected_items),e.term)):a(t.ui.autocomplete.filter(this.options.values,e.term)):t.ajax({type:"POST",dataType:"json",url:this.ajax_url,data:t.extend({action:"vc_get_autocomplete_suggestion",shortcode:vc.active_panel.model.get("shortcode"),param:this.param_name,query:e.term,_vcnonce:window.vcAdminNonce},this.source_data(e,a))}).done(function(e){n.options.unique_values?a(_.filter(e,function(e){return!_.findWhere(n.selected_items,e)})):a(e)})}}),c=Backbone.View.extend({$content:{},initialize:function(){_.bindAll(this,"content"),this.$content=this.$el,this.model=vc.active_panel.model},setContent:function(e){this.$content=e},content:function(){return this.$content},render:function(){var e=this;return t("[data-vc-ui-element=\"panel-shortcode-param\"]",this.content()).each(function(){var a=t(this),n=a.data("param_settings");vc.atts.init.call(e,n,a),a.data("vcInitParam",!0)}),this}}),d=Backbone.View.extend({options:{max_items:0,sortable:!0,deletable:!0,collapsible:!0},items:0,$ul:!1,initializer:{},mappedParams:{},adminLabelParams:[],groupParamName:"",events:{"click > .edit_form_line > .vc_param_group-list > .vc_param_group-add_content":"addNew"},initialize:function(e){var a,n,o;this.$ul=this.$el.find("> .edit_form_line > .vc_param_group-list"),a=t("> .wpb_vc_row",this.$ul),this.initializer=new c({el:this.$el}),this.model=vc.active_panel.model,n=this.$ul.data("settings"),this.mappedParams={},this.adminLabelParams=[],this.options=_.defaults({},_.isObject(e.settings)?e.settings:{},n,this.options),this.groupParamName=this.options.param.param_name,_.isObject(this.options.param)&&_.isArray(this.options.param.params)&&_.each(this.options.param.params,function(e){var t=this.groupParamName+"_"+e.param_name;this.mappedParams[t]=e,_.isObject(e)&&!0===e.admin_label&&this.adminLabelParams.push(t)},this),this.items=0,o=this,a.length&&a.each(function(){a.data("vc-param-group-param",new p({el:t(this),parent:o})),o.items++,o.afterAdd(t(this),"init")}),this.options.sortable&&this.$ul.sortable({handle:".vc_control.column_move",items:"> .wpb_vc_row:not(vc_param_group-add_content-wrapper)",placeholder:"vc_placeholder"})},addNew:function(e){var a;e.preventDefault(),this.addAllowed()&&(void 0===this.options.param.callbacks||void 0===this.options.param.callbacks.before_add||"function"!=typeof(a=window[this.options.param.callbacks.before_add])||a())&&((a=t(JSON.parse(this.$ul.next(".vc_param_group-template").html()))).removeClass("vc_param_group-add_content-wrapper"),a.insertBefore(e.currentTarget),a.show(),this.initializer.setContent(a.find("> .wpb_element_wrapper")),this.initializer.render(),this.items++,a.data("vc-param-group-param",new p({el:a,parent:this})),this.afterAdd(a,"new"),vc.events.trigger("vc-param-group-add-new",e,a,this))},addAllowed:function(){return 0<this.options.max_items&&this.items+1<=this.options.max_items||0>=this.options.max_items},afterAdd:function(e,t){var a;this.addAllowed()||(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").hide(),this.$ul.find("> .vc_param_group-add_content").hide()),this.options.sortable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_control.column_move").hide(),this.options.deletable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_delete").hide(),this.options.collapsible||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_toggle").hide(),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_add&&"function"==typeof(a=window[this.options.param.callbacks.after_add])&&a(e,t)},afterDelete:function(){var e;this.addAllowed()&&(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").show(),this.$ul.find("> .vc_param_group-add_content").show()),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_delete&&"function"==typeof(e=window[this.options.param.callbacks.after_delete])&&e()}}),p=Backbone.View.extend({dependentElements:!1,mappedParams:!1,groupParamName:"",adminLabelParams:[],events:{"click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_toggle":"toggle","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_delete":"deleteParam","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_clone":"clone"},initialize:function(e){this.options=e,this.$content=this.options.parent.$ul,this.model=vc.active_panel.model,this.mappedParams=this.options.parent.mappedParams,this.groupParamName=this.options.parent.groupParamName,this.adminLabelParams=this.options.parent.adminLabelParams,this.dependentElements={},_.bindAll(this,"hookDependent"),this.initializeDependency(),_.bindAll(this,"hookAdminLabel"),this.initializeAdminLabels()},initializeAdminLabels:function(){for(var e=this.hookAdminLabel,a=function(){var a=t(this);a.data("vc_admin_labels")||(a.data("vc_admin_labels",!0),a.on("keyup change",e),e({currentTarget:this}))},n=0;n<this.adminLabelParams.length;n++)t("[name="+this.adminLabelParams[n]+"].wpb_vc_param_value",this.$el).each(a)},hookAdminLabel:function(a){for(var n="",o="",s=[],l=(p=t(a.currentTarget)).closest(".vc_param_group-wrapper"),a=p.closest(".vc_param").find(".vc_param-group-admin-labels"),r=0;r<this.adminLabelParams.length;r++){var c=this.adminLabelParams[r],d=(p=l.find("[name="+c+"]")).closest("[data-vc-ui-element=\"panel-shortcode-param\"]"),p;void 0!==this.mappedParams[c]&&(n=this.mappedParams[c].heading),o=p.is("select")?p.find("option:selected").text():!p.is("input:checkbox")||p[0].checked?p.val():"",c={type:d.data("param_type"),param_name:d.data("param_name")},""!==(o=_.isObject(vc.atts[c.type])&&_.isFunction(vc.atts[c.type].render)?vc.atts[c.type].render.call(this,c,o):o)&&s.push("<label>"+_.escape(n)+"</label>: "+_.escape(o))}a.html(s.join(", ")).toggleClass("vc_hidden-label",!s.length)},initializeDependency:function(){var e={};_.each(this.mappedParams,function(a,n){var o,i;_.isObject(a)&&_.isObject(a.dependency)&&_.isString(a.dependency.element)&&(o=t("[name="+this.groupParamName+"_"+a.dependency.element+"].wpb_vc_param_value",this.$el),(i=t("[name="+n+"].wpb_vc_param_value",this.$el)).length)&&_.each(o,function(n){var n=t(n),o=n.attr("name"),s=a.dependency;_.isArray(this.dependentElements[o])||(this.dependentElements[o]=[]),this.dependentElements[o].push(i),n.data("dependentSet")||(n.attr("data-dependent-set","true"),n.on("keyup change",this.hookDependent)),e[o]||(e[o]=n),_.isString(s.callback)&&window[s.callback].call(this)},this)},this),_.each(e,function(e){this.hookDependent({currentTarget:e})},this)},hookDependent:function(a){var a=t(a.currentTarget),n=a.closest(".vc_column"),o=this.dependentElements[a.attr("name")],i=a.is(":checkbox")?_.map(this.$el.find("[name="+a.attr("name")+"].wpb_vc_param_value:checked"),function(e){return t(e).val()}):a.val(),s=a.is(":checkbox")?!this.$el.find("[name="+a.attr("name")+"].wpb_vc_param_value:checked").length:!i.length;return n.hasClass("vc_dependent-hidden")?_.each(o,function(e){var a=t.Event("change");a.extra_type="vcHookDependedParamGroup",e.closest(".vc_column").addClass("vc_dependent-hidden"),e.trigger(a)}):_.each(o,function(e){var a=e.attr("name"),a=_.isObject(this.mappedParams[a])&&_.isObject(this.mappedParams[a].dependency)?this.mappedParams[a].dependency:{},n=e.closest(".vc_column");_.isBoolean(a.not_empty)&&!0===a.not_empty&&!s||_.isBoolean(a.is_empty)&&!0===a.is_empty&&s||a.value&&_.intersection(_.isArray(a.value)?a.value:[a.value],_.isArray(i)?i:[i]).length||a.value_not_equal_to&&!_.intersection(_.isArray(a.value_not_equal_to)?a.value_not_equal_to:[a.value_not_equal_to],_.isArray(i)?i:[i]).length?n.removeClass("vc_dependent-hidden"):n.addClass("vc_dependent-hidden"),(a=t.Event("change")).extra_type="vcHookDependedParamGroup",e.trigger(a)},this),this},deleteParam:function(e){e&&e.preventDefault&&e.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&(this.options.parent.items--,this.options.parent.afterDelete(),this.$el.remove(),this.unbind(),this.remove())},content:function(){return this.$content},clone:function(a){var n,o;a.preventDefault(),this.options.parent.addAllowed()&&(a=this.options.parent.$ul.data("settings"),n=this.$content,this.$content=this.$el,o=vc.atts.param_group.parseOne.call(this,a),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_param_group_clone",param:e(JSON.stringify(a)),shortcode:vc.active_panel.model.get("shortcode"),value:o,vc_inline:!0,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done(function(e){e=e.data||"",e=t(e),e.insertAfter(this.$el),this.$content=n,this.options.parent.initializer.$content=t("> .wpb_element_wrapper",e),this.options.parent.initializer.render(),e.data("vc-param-group-param",new p({el:e,parent:this.options.parent})),this.options.parent.items++,this.options.parent.afterAdd(e,"clone")}))},toggle:function(e){e.preventDefault(),e=this.$el,e.find("> .wpb_element_wrapper").slideToggle(),e.toggleClass("vc_param_group-collapsed").siblings(":not(.vc_param_group-collapsed)").addClass("vc_param_group-collapsed").find("> .wpb_element_wrapper").slideUp()}}),m=(window.i18nLocale,vc.edit_form_callbacks=[],vc.atts={parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),a=t.closest("[data-vc-ui-element=\"panel-shortcode-param\"]"),a=_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].parse)?t.length?t.val():null:a.data("vcInitParam")?vc.atts[e.type].parse.call(this,e):(a=this.model.get("params"),_.isUndefined(a[e.param_name])?t.length?t.val():null:a[e.param_name]);return void 0!==t.data("js-function")&&void 0!==window[t.data("js-function")]&&(0,window[t.data("js-function")])(this.$el,this,e),a},parseFrame:function(e){return vc.atts.parse.call(this,e)},init:function(e,t){_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].init)||vc.atts[e.type].init.call(this,e,t)}},vc.atts.textarea_html={parse:function(e){var t=this.window(),e=this.content().find(".textarea_html."+e.param_name);try{t.tinyMCE&&_.isArray(t.tinyMCE.editors)&&_.each(t.tinyMCE.editors,function(e){"wpb_tinymce_content"===e.id&&e.save()})}catch(e){window.console&&window.console.warn&&window.console.warn("textarea_html atts parse error",e)}return e.val()},render:function(e,t){return _.isUndefined(t)?t:vc_wpautop(t)}},vc.atts.textarea_safe={parse:function(e){return e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val(),e.match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(e)):e},render:function(e,a){return a&&a.match(/^#E\-8_/)?t("<div/>").text(rawurldecode(base64_decode(a.replace(/^#E\-8_/,"")))).html():a}},vc.atts.checkbox={parse:function(e){var a=[],n="";return t("input[name="+e.param_name+"]",this.content()).each(function(){var e=t(this);this.checked&&a.push(e.attr("value"))}),n=0<a.length?a.join(","):n},defaults:function(){return""}},vc.atts.el_id={clone:function(e,t,a){var n=e.get("params");n[a.param_name]=_.isUndefined(a)||_.isUndefined(a.settings)||_.isUndefined(a.settings.auto_generate)||!0!==a.settings.auto_generate?"":Date.now()+"-"+vc_guid(),e.set({params:n},{silent:!0})},create:function(e,t,a){return e.get("cloned")?vc.atts.el_id.clone(e,t,a):void(!_.isEmpty(t)||_.isUndefined(a)||_.isUndefined(a.settings)||_.isUndefined(a.settings.auto_generate)||1!=a.settings.auto_generate||((t=e.get("params"))[a.param_name]=Date.now()+"-"+vc_guid(),e.set({params:t},{silent:!0})))}},vc.events.on("shortcodes:add:param:type:el_id",vc.atts.el_id.create),vc.atts.posttypes={parse:function(e){var a=[],n="";return t("input[name="+e.param_name+"]",this.content()).each(function(){var e=t(this);this.checked&&a.push(e.attr("value"))}),n=0<a.length?a.join(","):n}},vc.atts.taxonomies={parse:function(e){var a=[],n="";return t("input[name="+e.param_name+"]",this.content()).each(function(){var e=t(this);this.checked&&a.push(e.attr("value"))}),n=0<a.length?a.join(","):n}},vc.atts.exploded_textarea={parse:function(e){return this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val().replace(/\n/g,",")}},vc.atts.exploded_textarea_safe={parse:function(e){return e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val(),(e=e.replace(/\n/g,",")).match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(e)):e},render:function(e,a){return a&&a.match(/^#E\-8_/)?t("<div/>").text(rawurldecode(base64_decode(a.replace(/^#E\-8_/,"")))).html():a}},vc.atts.textarea_raw_html={parse:function(e){return e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val(),base64_encode(rawurlencode(e))},render:function(e,a){return a?t("<div/>").text(rawurldecode(base64_decode(a.trim()))).html():""}},vc.atts.dropdown={render:function(e,t){return t},init:function(e,a){t(".wpb_vc_param_value.dropdown",a).on("change",function(){var e=t(this),a=e.find(":selected"),n=e.data("option"),a=a.length?a.attr("class").replace(/\s/g,"_"):"";a=a.replace("#","hash-"),void 0!==n&&e.removeClass(n),void 0!==a&&(e.data("option",a),e.addClass(a))})},defaults:function(e){var t;return _.isArray(e.value)||_.isString(e.value)?_.isArray(e.value)?(t=e.value[0],_.isArray(t)&&t.length?t[0]:t):"":(t=_.values(e.value)[0]).label?t.value:t}},vc.atts.attach_images={parse:function(e){var a=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n="";return a.parent().find("li.added").each(function(){n+="<li><img src=\""+t(this).find("img").attr("src")+"\" alt=\"\"></li>"}),t("[data-model-id="+this.model.id+"]").data("field-"+e.param_name+"-attach-images",n),a.length?a.val():null},render:function(e,a){var n=this.$el.find(".attachment-thumbnails[data-name="+e.param_name+"]");return"external_link"===this.model.getParam("source")&&(a=this.model.getParam("custom_srcs")),_.isEmpty(a)?(this.$el.removeData("field-"+e.param_name+"-attach-images"),vc.atts.attach_images.updateImages(n,"")):t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_gallery_html",content:a,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done(function(e){e=e.data,vc.atts.attach_images.updateImages(n,e)}),a},updateImages:function(e,t){e.html(t),t.length?e.removeClass("image-exists").next().addClass("image-exists"):e.addClass("image-exists").next().removeClass("image-exists")}},vc.atts.href={parse:function(e){var e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),t="";return t=e.length&&"http://"!==e.val()?e.val():t}},vc.atts.attach_image={parse:function(e){var a=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n="";return a.parent().find("li.added").length&&(n=a.parent().find("li.added img").attr("src")),t("[data-model-id="+this.model.id+"]").data("field-"+e.param_name+"-attach-image",n),a.length?a.val():null},render:function(e,a){var n=t("[data-model-id="+this.model.id+"]"),o=n.data("field-"+e.param_name+"-attach-image"),i=this.$el.find(".attachment-thumbnail[data-name="+e.param_name+"]"),s={image_src:"",image_alt:""};return"image"===e.param_name&&("external_link"===this.model.getParam("source")?(s.image_src=this.model.getParam("custom_src"),vc.atts.attach_image.updateImage(i,s)):_.isEmpty(a)&&"featured_image"!==this.model.getParam("source")?_.isUndefined(o)||(n.removeData("field-"+e.param_name+"-attach-image"),s.image_src=o,vc.atts.attach_image.updateImage(i,s)):t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_data",content:a,params:this.model.get("params"),post_id:vc_post_id,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done(function(e){var t;e.success&&(t=e.data.image_src.length||"featured_image"===this.model.getParam("source"),vc.atts.attach_image.updateImage(i,e.data,t))})),a},updateImage:function(e,t,a){var n=t.image_src,t=t.image_alt;e.length&&((a=void 0!==a&&a)||!_.isEmpty(n)?(e.attr("src",n),e.attr("alt",t),(_.isEmpty(n)?(e.hide(),e.next().removeClass("image-exists")):(e.show(),e.next().addClass("image-exists"))).next().addClass("image-exists")):e.attr("src","").hide().next().removeClass("image-exists").next().removeClass("image-exists"))}},vc.atts.google_fonts={parse:function(e){var e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").parent(),a={};return a.font_family=e.find(".vc_google_fonts_form_field-font_family-select > option:selected").val(),a.font_style=e.find(".vc_google_fonts_form_field-font_style-select > option:selected").val(),e=_.map(a,function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e)}),t.grep(e,function(e){return _.isString(e)&&0<e.length}).join("|")},init:function(e,t){var a=t;a.length&&("undefined"==typeof WebFont?a.find("> .edit_form_line").html(window.i18nLocale.gfonts_unable_to_load_google_fonts||"Unable to load Google Fonts"):t.data("vc-param-object",new l({el:a})))}},vc.atts.font_container={parse:function(e){var e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").parent(),a={};return a.tag=e.find(".vc_font_container_form_field-tag-select > option:selected").val(),a.font_size=e.find(".vc_font_container_form_field-font_size-input").val(),a.text_align=e.find(".vc_font_container_form_field-text_align-select > option:selected").val(),a.font_family=e.find(".vc_font_container_form_field-font_family-select > option:selected").val(),a.color=e.find(".vc_font_container_form_field-color-input").val(),a.line_height=e.find(".vc_font_container_form_field-line_height-input").val(),a.font_style_italic=e.find(".vc_font_container_form_field-font_style-checkbox.italic").prop("checked")?"1":"",a.font_style_bold=e.find(".vc_font_container_form_field-font_style-checkbox.bold").prop("checked")?"1":"",e=_.map(a,function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e)}),t.grep(e,function(e){return _.isString(e)&&0<e.length}).join("|")},init:function(e,t){vc.atts.colorpicker.init.call(this,e,t)}},vc.atts.param_group={parse:function(e){var a=this.content(),n=a.find(".wpb_el_type_param_group[data-vc-ui-element=\"panel-shortcode-param\"][data-vc-shortcode-param-name=\""+e.param_name+"\"]").find("> .edit_form_line > .vc_param_group-list"),e=vc.atts.param_group.extractValues.call(this,e,t(">.wpb_vc_row:not(\".vc_param_group-add_content-wrapper\")",n));return this.$content=a,encodeURIComponent(JSON.stringify(e))},extractValues:function(e,a){var n=[],o=this;return a.each(function(){var a={};o.$content=t(this),_.each(e.params,function(n){var n=t.extend({},n),i=n.param_name,s;n.param_name=e.param_name+"_"+i,((s=vc.atts.parse.call(o,n)).length||n.save_always)&&(a[i]=s)}),n.push(a)}),n},parseOne:function(t){var a=this.content(),t=vc.atts.param_group.extractValues.call(this,t,a);return this.$content=a,e(JSON.stringify(t))},init:function(e,t){t.data("vc-param-object",new d({el:t,settings:{param:e}}))}},vc.atts.colorpicker={init:function(e,a){t(".vc_color-control",a).each(function(){var e=t(this),a=e.val().replace(/\s+/g,""),n=100,o,i;a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)&&(n=100*parseFloat(a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1])),e.wpColorPicker({clear:function(){o.val(100),i.val("100%")},change:_.debounce(function(){t(this).trigger("change")},500)}),a=e.closest(".wp-picker-container"),t("<div class=\"vc_alpha-container\"><label>Alpha: <output class=\"rangevalue\">"+n+"%</output></label><input type=\"range\" min=\"1\" max=\"100\" value=\""+n+"\" name=\"alpha\" class=\"vc_alpha-field\"></div>").appendTo(a.addClass("vc_color-picker").find(".iris-picker")),o=a.find(".vc_alpha-field"),i=a.find(".vc_alpha-container output"),o.on("change keyup",function(){var t=parseFloat(o.val()),a=e.data("a8c-iris"),n=e.data("wp-wpColorPicker");i.val(o.val()+"%"),a._color._alpha=t/100,e.val(a._color.toString()),n.toggler.css({backgroundColor:e.val()})}).val(n).trigger("change")})}},vc.atts.autocomplete={init:function(e,a){a.length&&a.each(function(){var e=t(".wpb_vc_param_value",this),a=e.attr("name"),n=t(".vc_auto_complete_param",this),a=t.extend({$param_input:e,param_name:a,$el:n},e.data("settings")),n=new r(a);a.multiple&&n.enableMultiple(),a.sortable&&n.enableSortable(),e.data("vc-param-object",n)})}},vc.atts.loop={init:function(e,t){t.data("vc-param-object",new i({el:t}))}},vc.atts.vc_link={init:function(e,a){t(".vc_link-build",a).on("click",function(a){a&&a.preventDefault&&a.preventDefault(),a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),a=t(this).closest(".vc_link"),i=a.find(".wpb_vc_param_value"),s=a.find(".url-label"),l=a.find(".title-label"),a=i.data("json"),r=t("#wp-link-submit"),c=t("<input type=\"submit\" name=\"vc_link-submit\" id=\"vc_link-submit\" class=\"button-primary\" value=\"Set Link\">"),r.hide(),t("#vc_link-submit").remove(),c.insertBefore(r),d=t("<div class=\"link-target vc-link-nofollow\"><label><span></span> <input type=\"checkbox\" id=\"vc-link-nofollow\"> Add nofollow option to link</label></div>"),t("#link-options .vc-link-nofollow").remove(),d.insertAfter(t("#link-options .link-target")),setTimeout(function(){var e=t("#most-recent-results").css("top");t("#most-recent-results").css("top",parseInt(e,10)+d.height())},200),p=!window.wpLink&&t.fn.wpdialog&&t("#wp-link").length?{$link:!1,open:function(){this.$link=t("#wp-link").wpdialog({title:wpLinkL10n.title,width:480,height:"auto",modal:!0,dialogClass:"wp-dialog",zIndex:3e5}),this.$link.addClass("vc-link-wrapper")},close:function(){this.$link&&(this.$link.wpdialog("close"),this.$link.removeClass("vc-link-wrapper"))}}:window.wpLink;var n=function(a,e){jQuery(e).addClass("vc-link-wrapper");var n=t("#wp-link-cancel button");c.off("click.vcLink").on("click.vcLink",function(a){a&&a.preventDefault&&a.preventDefault(),a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),(a={}).url=(t("#wp-link-url").length?t("#wp-link-url"):t("#url-field")).val(),a.title=(t("#wp-link-text").length?t("#wp-link-text"):t("#link-title-field")).val();var o=t("#wp-link-target").length?t("#wp-link-target"):t("#link-target-checkbox"),d;return a.target=o[0].checked?"_blank":"",a.rel=t("#vc-link-nofollow")[0].checked?"nofollow":"",d=_.map(a,function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e).trim()}).filter(function(e){return e}).join("|"),i.val(d).trigger("change"),i.data("json",a),s.html(a.url+a.target),l.html(a.title),p.close("noReset"),r.show(),c.off("click.vcLink"),c.remove(),n.off("click.vcLinkCancel"),window.wpLink.textarea="",o.attr("checked",!1),t("#most-recent-results").css("top",""),t("#vc-link-nofollow").attr("checked",!1),!1}),n.off("click").on("click.vcLinkCancel",function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),p.close("noReset"),c.off("click.vcLink"),c.remove(),n.off("click.vcLinkCancel"),window.wpLink.textarea=""})},o=function(t,e){jQuery(e).removeClass("vc-link-wrapper"),jQuery(document).off("wplink-open",n),jQuery(document).off("wplink-close",o)},i,s,l,r,c,d,p;jQuery(document).off("wplink-open",n).on("wplink-open",n),jQuery(document).off("wplink-close",o).on("wplink-close",o),"admin_frontend_editor"===vc_mode?p.open("vc-hidden-editor"):p.open("content"),_.isString(a.url)&&(t("#wp-link-url").length?t("#wp-link-url"):t("#url-field")).val(a.url),_.isString(a.title)&&(t("#wp-link-text").length?t("#wp-link-text"):t("#link-title-field")).val(a.title),(t("#wp-link-target").length?t("#wp-link-target"):t("#link-target-checkbox")).prop("checked",!_.isEmpty(a.target)),t("#vc-link-nofollow").length&&t("#vc-link-nofollow").prop("checked",!_.isEmpty(a.rel))})}},vc.atts.sorted_list={init:function(e,a){t(".vc_sorted-list",a).VcSortedList()}},vc.atts.options={init:function(e,t){t.data("vc-param-object",new s({el:t}))}},vc.atts.iconpicker={change:function(e,t){t=t.find(".vc-iconpicker"),t.val(this.value),t.data("vc-no-check",!0),t.find("[value=\""+this.value+"\"]").attr("selected","selected"),t.data("vcFontIconPicker").loadIcons()},parse:function(e){return this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").parent().find(".vc-iconpicker").val()},init:function(e,a){var n=a.find(".wpb_vc_param_value"),o=t.extend({iconsPerPage:100,iconDownClass:"fip-fa fa fa-arrow-down",iconUpClass:"fip-fa fa fa-arrow-up",iconLeftClass:"fip-fa fa fa-arrow-left",iconRightClass:"fip-fa fa fa-arrow-right",iconSearchClass:"fip-fa fa fa-search",iconCancelClass:"fip-fa fa fa-remove",iconBlockClass:"fip-fa"},n.data("settings"));a.find(".vc-iconpicker").vcFontIconPicker(o).on("change",function(){var e=t(this);e.data("vc-no-check")||n.data("vc-no-check",!0).val(this.value).trigger("change"),e.data("vc-no-check",!1)}),n.on("change",function(){n.data("vc-no-check")||vc.atts.iconpicker.change.call(this,e,a),n.data("vc-no-check",!1)})}},vc.atts.animation_style={init:function(e,a){function n(e,a){t(e).removeClass().addClass(a+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).removeClass().addClass("vc_param-animation-style-preview")})}var o=a,i=t(".wpb_vc_param_value[name="+e.param_name+"]",o);t("option[value=\""+i.val()+"\"]",o).attr("selected",!0),t(".vc_param-animation-style-trigger",o).on("click",function(a){a.preventDefault(),a=t(".vc_param-animation-style",o).val(),"none"!==a&&n(this.parentNode,"vc_param-animation-style-preview "+a)}),t(".vc_param-animation-style",o).on("change",function(){var e=t(this).val();i.val(e),"none"!==e&&n(t(".vc_param-animation-style-preview",o),"vc_param-animation-style-preview "+e)})}},vc.atts.gutenberg={content:null,gutenbergParamObj:null,$frame:null,closeEditor:function(t){t&&t.preventDefault&&t.preventDefault();var e=this;_.delay(function(){e.content.find(".vc_gutenberg-modal-wrapper").html(""),e.$frame=null,e.gutenbergParamObj=null},100)},updateEditor:function(t){t&&t.preventDefault&&t.preventDefault(),this.gutenbergParamObj&&this.gutenbergParamObj.updateValueFromIframe(),this.closeEditor()},init:function(e,a){var n=vc.atts.gutenberg,o=(n.content=a,t(".wpb_vc_param_value[name="+e.param_name+"]",n.content));t("[data-vc-action=\"open\"]",n.content).on("click",function(t){t.preventDefault();var t=o.val(),a=window.wpbGutenbergEditorUrl||"/wp-admin/post-new.php?post_type=wpb_gutenberg_param";n.gutenbergParamObj=new v({onSetValue:function(e){o.val(e)},onError:n.closeEditor,value:t}),vc.createOverlaySpinner(),n.content.find(".vc_gutenberg-modal-wrapper").html("<div class=\"wpb-gutenberg-modal\"><div class=\"wpb-gutenberg-modal-inner\"><iframe style=\"width: 100%;\" data-vc-gutenberg-param-iframe></iframe></div></div>"),n.$frame=n.content.find("iframe[data-vc-gutenberg-param-iframe]"),n.$frame.attr("src",a),n.$frame.on("load",function(){vc.removeOverlaySpinner(),n.gutenbergParamObj&&(n.gutenbergParamObj.iframe=n.$frame.get(0),n.gutenbergParamObj.iframeLoaded())})})}},function(){return"<div class=\"wpb-gutenberg-controls-container\"><style>.wpb-gutenberg-controls-container {display: flex;justify-content: center;align-items: center;}.vc_gutenberg-modal-update-button {padding-top: 8px;padding-bottom: 8px;min-height: 10px;padding: 5px 10px;font-size: 12px;line-height: 1.5;border-radius: 3px;color: #fff;background-color: #00aef0;border-color: transparent;cursor: pointer;display: inline-block;text-decoration: none !important;}.vc_gutenberg-modal-update-button:hover {background-color: #0089bd;}.wpb-gutenberg-modal-close-button {display: inline-flex;justify-content: center;align-items: center;margin: 0 0 0 10px;background: transparent;border: 0;box-shadow: none;padding: 5px;cursor: pointer;outline: none;}.wpb-gutenberg-modal-close-button:hover .vc-c-icon-close {opacity: 1;}.vc-c-icon-close {position: relative;display: inline-flex;width: 13px;height: 13px;justify-content: center;align-items: center;transform: rotate(45deg);opacity: .65;transition: opacity .2s ease-in-out;}.vc-c-icon-close::before,.vc-c-icon-close::after {content: \"\";position: absolute;background: #353535;}.vc-c-icon-close::before {width: 1px;height: 100%;}.vc-c-icon-close::after {width: 100%;height: 1px;}.interface-interface-skeleton__sidebar {z-index: -1;}</style><button class=\"vc_gutenberg-modal-update-button\">"+(window.i18nLocale.gutenbergEditorUpdateButton||"Update")+"</button><button class=\"wpb-gutenberg-modal-close-button\"><i class=\"vc-composer-icon vc-c-icon-close\"></i></button></div>"}),v=function(e){return this.iframe=null,this.options=e||{},this.value=this.options&&this.options.value?this.options.value:"",this.iframeLoaded=function(){var e=!!this.iframe.contentWindow.wp&&this.iframe.contentWindow.wp.data,a=(e||(i=(i=window.i18nLocale||!1)&&i.gutenbergDoesntWorkProperly?i.gutenbergDoesntWorkProperly:"Gutenberg plugin doesn't work properly. Please check Gutenberg plugin.",window.alert(i),this.options&&this.options.onError&&this.options.onError()),parseInt(this.iframe.contentWindow.document.getElementById("post_ID").value)),n={id:a,guid:{raw:"/?",rendered:"/?"},title:{raw:""},content:{raw:this.value,rendered:this.value},type:"wpb_gutenberg_param",slug:"",status:"auto-draft",link:"/?",format:"standard",categories:[]},o=e.dispatch("core/editor"),i=e.select("core/edit-post"),s=this.iframe.contentWindow.document.querySelector(".editor-post-title"),l=this.iframe.contentWindow.document.querySelector(".components-notice-list"),r=(s&&s.classList.add("hidden"),l&&l.classList.add("hidden"),i.isPublishSidebarOpened=function(){return!0},"function"==typeof o.autosave&&(o.autosave=function(){}),this.value),c=!1,d=(e.subscribe(function(){var t=e.select("core/editor").getCurrentPost();!c&&t&&t.id===a&&(c=!0,o.setupEditor(n,{content:r}))}),this.iframe);setTimeout(function(){var e,a,n;e=t(e=d).contents(),a=e.find(".edit-post-header-toolbar"),n=m(),t(n).insertAfter(a),e.find(".vc_gutenberg-modal-update-button, .wpb-gutenberg-modal-close-button").on("click",function(){setTimeout(function(){window.sessionStorage.removeItem("wp-autosave-block-editor-post-auto-draft")},"3000")}),n=vc.atts.gutenberg,e.find(".wpb-gutenberg-modal-close-button").on("click",n.closeEditor.bind(n)),e.find(".vc_gutenberg-modal-update-button").on("click",n.updateEditor.bind(n))},"3000")},this.updateValueFromIframe=function(){var e;this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.wp&&this.iframe.contentWindow.wp.data&&(e=this.iframe.contentWindow.wp.data)&&(e=e.select("core/editor").getEditedPostContent(),this.setValue(e))},this.setValue=function(e){this.value=e,this.options.onSetValue&&this.options.onSetValue(e)},this};vc.atts.vc_grid_id={parse:function(){return"vc_gid:"+Date.now()+"-"+this.model.get("id")+"-"+Math.floor(11*Math.random())}},vc.atts.addShortcodeIdParam=function(e){var t=!1,a=e.get("params"),n=vc.map[e.get("shortcode")];_.isArray(n.params)&&_.each(n.params,function(n){n&&!_.isUndefined(n.type)&&("tab_id"===n.type&&_.isEmpty(a[n.param_name])?(t=!0,a[n.param_name]=vc_guid()+"-"+Math.floor(11*Math.random())):"vc_grid_id"===n.type&&(t=!0,a[n.param_name]=vc.atts.vc_grid_id.parse.call({model:e})))}),t&&e.save("params",a,{silent:!0})},vc.getMapped=vc.memoizeWrapper(function(e){return vc.map[e]||{}})}(window.jQuery),function(e){"use strict";vc.debug=!1,vc.map=_.isUndefined(window.vc_mapper)?{}:window.vc_mapper,vc.roles=_.isUndefined(window.vc_roles)?{}:window.vc_roles,vc.Storage=function(){this.data={}},vc.Storage.prototype={url:window.ajaxurl,checksum:!1,locked:!1,isChanged:!1,create:function(e){return e.id||(e.id=e.attributes.id=vc_guid()),this.data[e.id]=e.toJSON(),this.setModelRoot(e.id),this.save(),e},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setModelRoot:function(e){e=this.data[e],_.isString(e.parent_id)&&_.isObject(this.data[e.parent_id])&&(e.root_id=this.data[e.parent_id].root_id),_.isObject(this.data[e.root_id])&&(this.data[e.root_id].html=!1)},update:function(e){return this.data[e.id]=e.toJSON(),this.setModelRoot(e.id),this.save(),e},destroy:function(e){return _.isUndefined(this.data[e.id])||_.isUndefined(this.data[e.id].root_id)||!_.isObject(this.data[this.data[e.id].root_id])||(this.data[this.data[e.id].root_id].html=!1),_.isUndefined(this.data[e.id])||delete this.data[e.id],this.save(),e},find:function(e){return this.data[e]},findAll:function(){return this.fetch(),_.values(this.data)},findAllRootSorted:function(){var e=_.filter(_.values(this.data),function(e){return!1===e.parent_id});return _.sortBy(e,function(e){return e.order})},escapeParam:function(t){return"array"===e.type(t)?t:_.isUndefined(t)||_.isNull(t)||!t.toString?"":t.toString().replace(/"/g,"``").replace(/\[/g,"`{`").replace(/\]/g,"`}`")},unescapeParam:function(e){return e=e.replace(/\`{\`/g,"[").replace(/\`}\`/g,"]").replace(/(\`{2})/g,"\""),e=vc_wpnop(e)},storageCreateShortcodeString:function(e){var t=e.get("shortcode"),a=_.extend({},e.get("params")),n={},a=vc.getMergedParams(t,a),o;return _.each(a,function(e,t){n[t]=this.escapeParam(e)},this),a=vc.getMapped(t),a=_.isObject(a)&&(_.isBoolean(a.is_container)&&!0===a.is_container||!_.isEmpty(a.as_parent)),o=this._storageGetShortcodeContent(e),o={tag:t,attrs:n,content:o,type:_.isUndefined(vc.getParamSettings(t,"content"))&&!a?"single":""},e.trigger("stringify",e,o),wp.shortcode.string(o)},save:function(){var e;return this.locked?this.locked=!1:(e=_.reduce(this.findAllRootSorted(),function(e,t){return t=vc.shortcodes.get(t),e+this.storageCreateShortcodeString(t)},"",this),this.setContent(e),this.checksum=vc_globalHashCode(e),this)},_storageGetShortcodeContent:function(e){var t=_.sortBy(_.filter(this.data,function(t){return t.parent_id===e.get("id")}),function(e){return e.order});return t.length?_.reduce(t,function(e,t){return t=vc.shortcodes.get(t),e+this.storageCreateShortcodeString(t)},"",this):(t=_.extend({},e.get("params")),_.isUndefined(t.content)?"":t.content)},getContent:function(){return _.isObject(window.tinymce)&&tinymce.editors.content&&tinymce.editors.content.save(),window.vc_wpnop(e("#content").val()||"")},addUndo:_.debounce(function(e){vc.undoRedoApi&&vc.undoRedoApi.add(e)},100),setContent:function(t){this.addUndo(t);var a=window.tinyMCE&&window.tinyMCE.get&&window.tinyMCE.get("content");t=vc_wpautop(t),this.isChanged||window.jQuery(window).on("beforeunload.vcSave",function(){return window.i18nLocale.confirm_to_leave}),this.isChanged=!0,e("#content").val(t),a&&a.setContent&&(a.setContent(t),a.fire("change"))},parseContent:function(e,t,a){var n=_.keys(vc.map).join("|"),o=window.wp.shortcode.regexp(n),t=t.trim().match(o);return _.isNull(t)||_.each(t,function(t){var o=t.match(this.regexp(n)),i=o[5],s=new RegExp("^[\\s]*\\[\\[?("+_.keys(vc.map).join("|")+")(?![\\w-])"),l=window.vc_guid(),r=window.wp.shortcode.attrs(o[3]),c={},d;_.each(r.named,function(e,t){c[t]=this.unescapeParam(e)},this),r={id:l,shortcode:o[2],order:this.order,params:_.extend({},c),parent_id:!!_.isObject(a)&&a.id,root_id:_.isObject(a)?a.root_id:l},d=vc.map[r.shortcode],this.order+=1,_.isArray(e)?(e.push(r),l=e.length-1):e[l]=r,l==r.root_id&&(e[l].html=t),_.isString(i)&&i.match(s)&&(_.isBoolean(d.is_container)&&!0===d.is_container||!_.isEmpty(d.as_parent)&&!1!==d.as_parent)?e=this.parseContent(e,i,e[l]):_.isString(i)&&i.length&&"vc_row"===o[2]?e=this.parseContent(e,"[vc_column width=\"1/1\"][vc_column_text]"+i+"[/vc_column_text][/vc_column]",e[l]):_.isString(i)&&i.length&&"vc_column"===o[2]?e=this.parseContent(e,"[vc_column_text]"+i+"[/vc_column_text]",e[l]):_.isString(i)&&(e[l].params.content=i)},this),e},isContentChanged:function(){return!1===this.checksum||this.checksum!==vc_globalHashCode(this.getContent())},wrapData:function(e){var t=_.keys(vc.map).join("|"),a=this.regexp_split("vc_row"),n=new RegExp("^\\[(\\[?)("+t+")","g"),o=this,s={},l=0,t=(e=wp.shortcode.replace("vc_section",e,function(e){var e={attrs:e.attrs.named,content:o.wrapData(e.content)},t="vc_pseudo_section_"+ ++l+"_"+VCS4()+VCS4();return s[t]={tag:t,data:e},"[vc_row][vc_pseudo_section id=\""+t+"\"][/vc_pseudo_section][/vc_row]"}),_.filter(e.trim().split(a),function(e){if(!_.isEmpty(e))return e}));return e=_.reduce(t,function(e,t){var a=(t=-1!==t.trim().indexOf("vc_pseudo_section_")||t.trim().match(n)?t:"[vc_row][vc_column][vc_column_text]"+t+"[/vc_column_text][/vc_column][/vc_row]").match(vc_regexp_shortcode());return e+(t=!_.isArray(a)||_.isUndefined(a[2])||-1!==a[2].indexOf("vc_pseudo_section_")||_.isUndefined(vc.map[a[2]])||!_.isUndefined(vc.map[a[2]].is_container)&&vc.map[a[2]].is_container||!_.isEmpty(vc.map[a[2]].as_parent)?t:"[vc_row][vc_column]"+t+"[/vc_column][/vc_row]")},""),0<Object.keys(s).length&&(e=(e=e.replace(/\[vc_row\]\[vc_pseudo_section/g,"[vc_pseudo_section")).replace(/\[\/vc_pseudo_section\]\[\/vc_row\]/g,"[/vc_pseudo_section]"),e=wp.shortcode.replace("vc_pseudo_section",e,function(e){return e=s[e.attrs.named.id],wp.shortcode.string({tag:"vc_section",attrs:e.data.attrs,content:e.data.content})})),e},fetch:function(){if(!this.isContentChanged())return this;this.order=0;var e=this.getContent();this.checksum=vc_globalHashCode(e),e=this.wrapData(e),this.data=this.parseContent({},e)},append:function(e){this.data={},this.order=0;try{var t=this.getContent();this.setContent(t+""+e)}catch(t){window.console&&window.console.warn&&window.console.warn("storage.append error",t)}},regexp_split:_.memoize(function(e){return new RegExp("(\\[(\\[?)["+e+"]+(?![\\w-])[^\\]\\/]*[\\/(?!\\])[^\\]\\/]*]?(?:\\/]\\]|\\](?:[^\\[]*(?:\\[(?!\\/"+e+"\\])[^\\[]*)*\\[\\/"+e+"\\])?)\\]?)","g")}),regexp:_.memoize(function(e){return new RegExp("\\[(\\[?)("+e+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")})},vc.storage=new vc.Storage}(window.jQuery),function(){"use strict";var e=vc.storage;vc.shortcode=Backbone.Model.extend({settings:!1,defaults:function(){var e=window.vc_guid();return{id:e,shortcode:"vc_text_block",order:vc.shortcodes.getNextOrder(),params:{},parent_id:!1,root_id:e,cloned:!1,html:!1,view:!1}},initialize:function(){this.bind("remove",this.removeChildren,this),this.bind("remove",this.removeEvents,this)},removeEvents:function(e){vc.events.triggerShortcodeEvents("destroy",e)},sync:function(t,a,n){if(n&&n.silent)return n.success(a);var o;"read"===t?o=a.id?e.find(a):e.findAll():"create"===t?o=e.create(a):"update"===t?o=e.update(a):"delete"===t?o=e.destroy(a):void 0;o?n.success(o):n.error("Record not found")},getParam:function(e){return _.isObject(this.get("params"))&&!_.isUndefined(this.get("params")[e])?this.get("params")[e]:""},removeChildren:function(e){e=vc.shortcodes.where({parent_id:e.id}),_.each(e,function(e){vc.storage.lock(),e.destroy(),this.removeChildren(e)},this),e.length&&vc.storage.save()},setting:function(e){return!1===this.settings&&(this.settings=vc.getMapped(this.get("shortcode"))||{}),this.settings[e]}}),vc.shortcodes_collection=Backbone.Collection.extend({model:vc.shortcode,last_index:0,getNextOrder:function(){return this.last_index++},comparator:function(e){return e.get("order")},initialize:function(){},createFromString:function(e,t){e=vc.storage.parseContent({},e,!!_.isObject(t)&&t.toJSON()),_.each(_.values(e),function(e){vc.shortcodes.create(e)},this)},sync:function(t,a,n){var o;"read"===t?o=a.id?e.find(a):e.findAll():"create"===t?o=e.create(a):"update"===t?o=e.update(a):"delete"===t?o=e.destroy(a):void 0;o?n.success(o):n.error("Record not found")},stringify:function(e){var t=_.sortBy(vc.shortcodes.where({parent_id:!1}),function(e){return e.get("order")});return this.modelsToString(t,e)},singleStringify:function(e,t){return this.modelsToString([vc.shortcodes.get(e)],t)},createShortcodeString:function(e,t){var a=e.get("shortcode"),n=_.extend({},e.get("params")),o={},n=vc.getMergedParams(a,n),i;return _.each(n,function(e,t){o[t]=vc.storage.escapeParam(e)},this),n=vc.getMapped(a),n=_.isObject(n)&&(_.isBoolean(n.is_container)&&!0===n.is_container||!_.isEmpty(n.as_parent)),i=this._getShortcodeContent(e,t),i={tag:a,attrs:o,content:i,type:_.isUndefined(vc.getParamSettings(a,"content"))&&!n?"single":""},_.isUndefined(t)?e.trigger("stringify",e,i):e.trigger("stringify:"+t,e,i),i.remove?"":wp.shortcode.string(i)},modelsToString:function(e,t){return _.reduce(e,function(e,a){return e+this.createShortcodeString(a,t)},"",this)},_getShortcodeContent:function(e,t){var a=_.sortBy(vc.shortcodes.where({parent_id:e.get("id")}),function(e){return e.get("order")});return a.length?_.reduce(a,function(e,a){return e+this.createShortcodeString(a,t)},"",this):(a=_.extend({},e.get("params")),_.isUndefined(a.content)?"":a.content)}}),vc.shortcodes=new vc.shortcodes_collection,vc.getDefaults=vc.memoizeWrapper(function(e){var t={},e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[];return _.each(e,function(e){_.isObject(e)&&(_.isUndefined(e.std)?vc.atts[e.type]&&vc.atts[e.type].defaults?t[e.param_name]=vc.atts[e.type].defaults(e):_.isUndefined(e.value)||(_.isObject(e.value)?t[e.param_name]=_.values(e.value)[0]:_.isArray(e.value)?t[e.param_name]=e.value[0]:t[e.param_name]=e.value):t[e.param_name]=e.std)}),t}),vc.getDefaultsAndDependencyMap=vc.memoizeWrapper(function(e){var t={},a={},e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[];return _.each(e,function(e){_.isObject(e)&&"content"!==e.param_name&&(_.isUndefined(e.std)?_.isUndefined(e.value)||(vc.atts[e.type]&&vc.atts[e.type].defaults?a[e.param_name]=vc.atts[e.type].defaults(e):_.isObject(e.value)?a[e.param_name]=_.values(e.value)[0]:_.isArray(e.value)?a[e.param_name]=e.value[0]:a[e.param_name]=e.value):a[e.param_name]=e.std,_.isUndefined(e.dependency)||_.isUndefined(e.dependency.element)||(t[e.param_name]=e.dependency))}),{defaults:a,dependencyMap:t}}),vc.getMergedParams=function(e,t){var a=vc.getDefaultsAndDependencyMap(e),n={},o;return t=_.extend({},a.defaults,t),o=_.extend({},a.dependencyMap),_.each(t,function(i,s){if("content"!==s){if(!_.isUndefined(o[s])){if(!_.isUndefined(o[o[s].element])&&_.isBoolean(o[o[s].element].failed)&&!0===o[o[s].element].failed)return void(o[s].failed=!0);var l=o[s].element,r=t[l],c=_.isEmpty(r),d=!1;if("string"==typeof r&&(d=t[l].split(",").map(function(e){return e.trim()}).filter(function(e){return e})),l=_.omit(o[s],"element"),_.isBoolean(l.not_empty)&&!0===l.not_empty&&c||_.isBoolean(l.is_empty)&&!0===l.is_empty&&!c||l.value&&!_.intersection(_.isArray(l.value)?l.value:[l.value],_.isArray(r)?r:[r]).length&&d&&l.value&&!_.intersection(_.isArray(l.value)?l.value:[l.value],_.isArray(d)?d:[d]).length||l.value_not_equal_to&&_.intersection(_.isArray(l.value_not_equal_to)?l.value_not_equal_to:[l.value_not_equal_to],_.isArray(r)?r:[r]).length&&d&&l.value_not_equal_to&&_.intersection(_.isArray(l.value_not_equal_to)?l.value_not_equal_to:[l.value_not_equal_to],_.isArray(d)?d:[d]).length)return void(o[s].failed=!0)}c=vc.getParamSettings(e,s),(_.isUndefined(c)||!_.isUndefined(a.defaults[s])&&a.defaults[s]!==i||_.isUndefined(a.defaults[s])&&""!==i||!_.isUndefined(c.save_always)&&!0===c.save_always)&&(n[s]=i)}}),n},vc.getParamSettings=vc.memoizeWrapper(function(e,t){return e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],_.find(e,function(e){return _.isObject(e)&&e.param_name===t},this)},function(){return arguments[0]+","+arguments[1]}),vc.getParamSettingsByType=vc.memoizeWrapper(function(e,t){return e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],_.find(e,function(e){return _.isObject(e)&&e.type===t},this)},function(){return arguments[0]+","+arguments[1]}),vc.shortcodeHasIdParam=vc.memoizeWrapper(function(e){return vc.getParamSettingsByType(e,"el_id")})}(window.jQuery),function(t){"use strict";vc.clone_index=1,vc.shortcode_view=Backbone.View.extend({tagName:"div",$content:"",use_default_content:!1,params:{},events:{"click .column_delete,.vc_control-btn-delete":"deleteShortcode","click .column_add,.vc_control-btn-prepend":"addElement","click .column_edit,.vc_control-btn-edit, .column_edit_trigger":"editElement","click .column_clone,.vc_control-btn-clone":"clone","click .column_copy,.vc_control-btn-copy":"copy","click .column_paste,.vc_control-btn-paste":"paste",mousemove:"checkControlsPosition"},removeView:function(){vc.closeActivePanel(this.model),this.remove()},checkControlsPosition:function(){var e,a;this.$controls_buttons&&(a=this.$el.height(),t(window).height()<a)&&(40<(e=t(window).scrollTop()-this.$el.offset().top+t(window).height()/2)&&e<a?this.$controls_buttons.css("top",e):a<e?this.$controls_buttons.css("top",a-40):this.$controls_buttons.css("top",40))},initialize:function(){this.model.bind("destroy",this.removeView,this),this.model.bind("change:params",this.changeShortcodeParams,this),this.model.bind("change_parent_id",this.changeShortcodeParent,this),this.createParams()},hasUserAccess:function(){var e=this.model.get("shortcode");return-1<_.indexOf(["vc_row","vc_column","vc_row_inner","vc_column_inner"],e)||!!_.every(vc.roles.current_user,function(t){return _.isUndefined(vc.roles[t])||_.isUndefined(vc.roles[t].shortcodes)||!_.isUndefined(vc.roles[t].shortcodes[e])})},canCurrentUser:function(e){var t=this.model.get("shortcode");return void 0===e||"all"===e?vc_user_access().shortcodeAll(t):vc_user_access().shortcodeEdit(t)},createParams:function(){var e=this.model.get("shortcode"),e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[];this.model.get("params"),this.params={},_.each(e,function(e){this.params[e.param_name]=e},this)},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_container_for_children, > .vc_element-wrapper > .vc_container_for_children")},setEmpty:function(){},unsetEmpty:function(){},checkIsEmpty:function(){this.model.get("parent_id")&&vc.app.views[this.model.get("parent_id")].checkIsEmpty()},html2element:function(e){var a={},e=vc.template(e),e=t(e(this.model.toJSON()).trim());_.each(e.get(0).attributes,function(e){a[e.name]=e.value}),this.$el.attr(a).html(e.html()),this.setContent(),this.renderContent()},render:function(){var e=t("#vc_shortcode-template-"+this.model.get("shortcode"));return e.is("script")&&this.html2element(e.html()),(this.model.view=this).$controls_buttons=this.$el.find(".vc_controls > :first"),this},renderContent:function(){return this.$el.attr("data-model-id",this.model.get("id")),this.$el.data("model",this.model),this},changedContent:function(){},_loadDefaults:function(){var e=this.model.get("shortcode");!!!vc.shortcodes.where({parent_id:this.model.get("id")}).length&&!0===this.use_default_content&&_.isObject(vc.map[e])&&_.isString(vc.map[e].default_content)&&vc.map[e].default_content.length&&(this.use_default_content=!1,vc.shortcodes.createFromString(vc.map[e].default_content,this.model))},_callJsCallback:function(){var e=this.model.get("shortcode");_.isObject(vc.map[e])&&_.isObject(vc.map[e].js_callback)&&!_.isUndefined(vc.map[e].js_callback.init)&&(e=vc.map[e].js_callback.init,window[e](this.$el))},ready:function(){return this._loadDefaults(),this._callJsCallback(),this.model.get("parent_id")&&_.isObject(vc.app.views[this.model.get("parent_id")])&&vc.app.views[this.model.get("parent_id")].changedContent(this),_.defer(_.bind(function(){vc.events.trigger("shortcodeView:ready",this),vc.events.trigger("shortcodeView:ready:"+this.model.get("shortcode"),this)},this)),this},addShortcode:function(e,t){var a=_.last(vc.shortcodes.filter(function(e){return e.get("parent_id")===this.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))},e.model));a?e.render().$el.insertAfter("[data-model-id="+a.id+"]"):"append"===t?this.$content.append(e.render().el):this.$content.prepend(e.render().el)},changeShortcodeParams:function(e){var a=e.get("shortcode"),n=e.get("params"),o=vc.map[a];_.defer(function(){vc.events.trigger("backend.shortcodeViewChangeParams:"+a)}),(_.isArray(o.params)||_.isObject(o.params))&&_.each(o.params,function(e){var a=e.param_name,o=n[a],i=this.$el.find("> .wpb_element_wrapper, > .vc_element-wrapper"),s=o,a=i.children(".admin_label_"+a),l,r;_.isObject(vc.atts[e.type])&&_.isFunction(vc.atts[e.type].render)&&(o=vc.atts[e.type].render.call(this,e,o)),i.children("."+e.param_name).is("input,textarea,select")?i.children("[name="+e.param_name+"]").val(o):i.children("."+e.param_name).is("iframe")?i.children("[name="+e.param_name+"]").attr("src",o):i.children("."+e.param_name).is("img")?(l=i.children("[name="+e.param_name+"]"),o&&o.match(/^\d+$/)?t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:o,size:"thumbnail",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){l.attr("src",e)}):o&&l.attr("src",o)):i.children("[name="+e.param_name+"]").html(o?vc_wpautop(o):""),a.length&&(""===o||_.isUndefined(o)?a.hide().addClass("hidden-label"):(_.isObject(e.value)&&!_.isArray(e.value)&&"checkbox"===e.type?(r=_.invert(e.value),s=_.map(o.split(/[\s]*\,[\s]*/),function(e){return _.isString(r[e])?r[e]:e}).join(", ")):_.isObject(e.value)&&!_.isArray(e.value)&&(r=_.invert(e.value),s=_.isString(r[o])?r[o]:o),a.html("<label>"+a.find("label").text()+"</label>: "+_.escape(s)),a.show().removeClass("hidden-label")))},this),o=vc.app.views[e.get("parent_id")],!1!==e.get("parent_id")&&_.isObject(o)&&o.checkIsEmpty()},changeShortcodeParent:function(e){var a;return!1===this.model.get("parent_id")?e:void(e=t("[data-model-id="+this.model.get("parent_id")+"]"),a=vc.app.views[this.model.get("parent_id")],this.$el.appendTo(e.find("> .wpb_element_wrapper > .wpb_column_container, > .vc_element-wrapper > .wpb_column_container")),a.checkIsEmpty())},deleteShortcode:function(t){_.isObject(t)&&t.preventDefault(),this.model.destroy()},addElement:function(a){_.isObject(a)&&a.preventDefault(),vc.add_element_block_view.render(this.model,!_.isObject(a)||!t(a.currentTarget).closest(".bottom-controls").hasClass("bottom-controls"))},editElement:function(t){_.isObject(t)&&t.preventDefault(),vc.active_panel&&vc.active_panel.model&&this.model&&(!vc.active_panel.model||!this.model||vc.active_panel.model.get("id")===this.model.get("id"))||(vc.closeActivePanel(),vc.edit_element_block_view.render(this.model))},clone:function(t){return _.isObject(t)&&t.preventDefault(),vc.clone_index/=10,this.cloneModel(this.model,this.model.get("parent_id"))},copy:function(t){return _.isObject(t)&&(t.preventDefault(),t.currentTarget.focus()),vc.copyShortcode(this.model)},paste:function(t){return _.isObject(t)&&t.preventDefault(),vc.clone_index/=10,vc.pasteShortcode(this.model)},cloneModel:function(e,t,a){var a=_.isBoolean(a)&&!0===a?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,n=_.extend({},e.get("params")),o=e.get("shortcode"),i=vc.shortcodes.create({shortcode:o,id:window.vc_guid(),parent_id:t,order:a,cloned:!0,cloned_from:e.toJSON(),params:n});return _.each(vc.shortcodes.where({parent_id:e.id}),function(e){this.cloneModel(e,i.get("id"),!0)},this),i},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.vc.shortcode_view.__super__.remove.call(this)}}),vc.shortcodes.on("sync",function(e){_.isObject(e)&&!_.isEmpty(e.models)&&_.each(e.models,function(e){vc.events.triggerShortcodeEvents("sync",e)})}),vc.shortcodes.on("add",function(e){_.isObject(e)&&vc.events.triggerShortcodeEvents("add",e)})}(window.jQuery),function(e){vc.showMessage=function(t,a,n,o){vc.message_timeout&&(e(".vc_message").remove(),window.clearTimeout(vc.message_timeout)),a=a||"success",n=n||1e4;var i=window.vc_mode&&"admin_page"===window.vc_mode?".metabox-composer-content":"body",o=o||i,s=e("<div class=\"vc_message "+a+"\" style=\"z-index: 999;\">"+t+"</div>").prependTo(e(o));s.fadeIn(500),vc.message_timeout=window.setTimeout(function(){s.slideUp(500,function(){e(this).remove()}),vc.message_timeout=!1},n)},window.vc_user_access&&!window.vc_user_access().partAccess("unfiltered_html")&&vc.showMessage(window.i18nLocale.unfiltered_html_access,"type-error",15e3)}(window.jQuery),function(t){"use strict";vc.saved_custom_css=!1,vc.createPreLoader=function(){t("#vc_preloader").show()},vc.removePreLoader=function(){t("#vc_preloader").hide()},vc.createOverlaySpinner=function(){vc.$overlaySpinner=t("#vc_overlay_spinner").show()},vc.removeOverlaySpinner=function(){vc.$overlaySpinner&&vc.$overlaySpinner.hide()},vc.visualComposerView=Backbone.View.extend({el:t("#wpb_wpbakery"),views:{},isEditorInFocus:!1,isKeydownEventAssigned:!1,disableFixedNav:!1,events:{"click #wpb-add-new-row":"createRow","click #vc_post-settings-button":"editSettings",'click #vc_add-new-element, [data-vc-element="add-element-action"]':"addElement","click #vc_fullscreen-button":"enterFullscreen","click #vc_windowed-button":"leaveFullscreen","click #vc_seo-button":"openSeo",'click [data-vc-element="add-text-block-action"]':"addTextBlock","click .wpb_switch-to-composer":"switchComposer","click #vc_templates-editor-button":"openTemplatesWindow","click #vc_templates-more-layouts":"openTemplatesWindow","click .vc_template[data-template_id] > .wpb_wrapper":"loadDefaultTemplate","click #wpb-save-post":"save","click .vc_control-preview":"preview","click .vc_post-custom-layout":"changePostCustomLayout"},initializeAccessPolicy:function(){this.accessPolicy={be_editor:vc_user_access().editor("backend_editor"),fe_editor:vc_frontend_enabled&&vc_user_access().editor("frontend_editor"),classic_editor:!vc_user_access().check("backend_editor","disabled_ce_editor",void 0,!0)}},accessPolicyActions:function(){var e="",a="",n;this.accessPolicy.fe_editor&&(e="<a class=\"wpb_switch-to-front-composer\" href=\""+t("#wpb-edit-inline").attr("href")+"\">"+window.i18nLocale.main_button_title_frontend_editor+"</a>"),this.accessPolicy.classic_editor?this.accessPolicy.be_editor&&(a="<a class=\"wpb_switch-to-composer\" href=\"#\">"+window.i18nLocale.main_button_title_backend_editor+"</a>"):(t("#postdivrich").addClass("vc-disable-editor"),this.accessPolicy.be_editor&&(n=this,_.defer(function(){n.show(),n.status="shown"}))),(e||a||gutenberg)&&(this.$buttonsContainer=t("<div class=\"composer-switch\"><div class=\"composer-inner-switch\"><span class=\"logo-icon\"></span>"+a+e+"</div></div>").insertAfter("div#titlediv"),this.accessPolicy.classic_editor)&&(this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),this.$switchButton.on("click",this.switchComposer))},initialize:function(){var a=this;_.bindAll(this,"switchComposer","dropButton","processScroll","updateRowsSorting","updateElementsSorting"),this.accessPolicy=vc.accessPolicy,this.buildRelevance(),vc.events.on("shortcodes:add",vcAddShortcodeDefaultParams,this),vc.events.on("shortcodes:add",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:sync",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:add",this.addShortcode,this),vc.events.on("shortcodes:destroy",this.checkEmpty,this),vc.shortcodes.on("change:params",this.changeParamsEvents,this),vc.shortcodes.on("reset",this.addAll,this),t(document).on("wp-collapse-menu",function(t,e){"open"===e.state&&a.leaveFullscreen()}),this.render()},changeParamsEvents:function(e){vc.events.triggerShortcodeEvents("update",e)},render:function(){return this.$buttonsContainer=t(".composer-switch"),this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),this.$vcStatus=t("#wpb_vc_js_status"),this.$metablock_content=t(".metabox-composer-content"),this.$content=t("#wpbakery_content"),this.$post=t("#postdivrich"),this.$loading_block=t("#vc_logo"),vc.add_element_block_view=new vc.AddElementUIPanelBackendEditor({el:"#vc_ui-panel-add-element"}),vc.edit_element_block_view=new vc.EditElementUIPanel({el:"#vc_ui-panel-edit-element"}),vc.templates_panel_view=new vc.TemplateWindowUIPanelBackendEditor({el:"#vc_ui-panel-templates"}),vc.post_settings_view=new vc.PostSettingsUIPanelBackendEditor({el:"#vc_ui-panel-post-settings"}),vc.preset_panel_view=new vc.PresetSettingsUIPanelFrontendEditor({el:"#vc_ui-panel-preset"}),vc.post_seo_view=new vc.PostSettingsSeoUIPanel({el:"#vc_ui-panel-post-seo"}),this.setSortable(),vc.is_mobile=0<t("body.mobile").length,vc.saved_custom_css=t("#wpb_custom_post_css_field").val(),vc.updateSettingsBadge(),_.defer(function(){vc.events.trigger("app.render")}),t("body").on("click",t.proxy(this.handleBodyClick,this)),this},addAll:function(){this.views={},this.$content.removeClass("loading").empty(),this.addChild(!1),this.checkEmpty(),this.$loading_block.removeClass("vc_ui-wp-spinner"),this.$metablock_content.removeClass("vc_loading-shortcodes"),_.defer(function(){vc.events.trigger("app.addAll")})},addChild:function(e){_.each(vc.shortcodes.where({parent_id:e}),function(e){this.appendShortcode(e),this.addChild(e.get("id"))},this),this.setSortable()},getView:function(e){var t=new(_.isObject(vc.map[e.get("shortcode")])&&_.isString(vc.map[e.get("shortcode")].js_view)&&vc.map[e.get("shortcode")].js_view.length&&!_.isUndefined(window[window.vc.map[e.get("shortcode")].js_view])?window[window.vc.map[e.get("shortcode")].js_view]:vc.shortcode_view)({model:e});return e.set({view:t}),t},setDraggable:function(){t("#wpb-add-new-element, #wpb-add-new-row").draggable({helper:function(){return t("<div id=\"drag_placeholder\"></div>").appendTo("body")},zIndex:99999,cursor:"move",revert:"invalid",start:function(){t("#drag_placeholder").addClass("column_placeholder").html(window.i18nLocale.drag_drop_me_in_column)}})},setDropable:function(){this.$content.droppable({greedy:!0,accept:".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton})},dropButton:function(e,t){t.draggable.is("#wpb-add-new-element")?this.addElement():t.draggable.is("#wpb-add-new-row")&&this.createRow()},appendShortcode:function(e){var t=this.getView(e),a=_.extend(vc.getDefaults(e.get("shortcode")),e.get("params"));e.set("params",a,{silent:!0}),a=!1!==e.get("parent_id")&&this.views[e.get("parent_id")],this.views[e.id]=t,e.get("parent_id")&&this.views[e.get("parent_id")].unsetEmpty(),a?a.addShortcode(t,"append"):this.$content.append(t.render().el),t.ready(),t.changeShortcodeParams(e),t.checkIsEmpty(),this.setNotEmpty()},addShortcode:function(e){var t=_.extend(vc.getDefaults(e.get("shortcode")),e.get("params")),a,n;e.set("params",t,{silent:!0}),a=this.getView(e),t=!1!==e.get("parent_id")&&this.views[e.get("parent_id")],a.use_default_content=!0!==e.get("cloned"),this.views[e.id]=a,t?(t.addShortcode(a),t.checkIsEmpty(),n=this,_.defer(function(){a.changeShortcodeParams&&a.changeShortcodeParams(e),a.ready(),a.checkIsEmpty(),n.setSortable(),n.setNotEmpty()})):(this.addRow(a),_.defer(function(){a.changeShortcodeParams&&a.changeShortcodeParams(e),a.ready(),a.checkIsEmpty()}))},addRow:function(e){var t=_.last(vc.shortcodes.filter(function(e){return!1===e.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))},e.model));t?e.render().$el.insertAfter("[data-model-id="+t.id+"]"):this.$content.append(e.render().el)},addTextBlock:function(t){var a,n;return t&&t.preventDefault&&t.preventDefault(),t=vc.shortcodes.create({shortcode:"vc_row",params:{}}),a=vc.shortcodes.create({shortcode:"vc_column",params:{width:"1/1"},parent_id:t.id,root_id:t.id}),n=vc.getDefaults("vc_column_text"),vc.shortcodes.create({shortcode:"vc_column_text",parent_id:a.id,root_id:t.id,params:n})},createRow:function(){var e=vc.shortcodes.create({shortcode:"vc_row",params:{}});return vc.shortcodes.create({shortcode:"vc_column",params:{width:"1/1"},parent_id:e.id,root_id:e.id}),e},addElement:function(t){t&&t.preventDefault&&t.preventDefault(),vc.add_element_block_view.render(!1)},openTemplatesWindow:function(a){a&&a.preventDefault&&a.preventDefault(),t(a.currentTarget).is("#vc_templates-more-layouts")&&vc.templates_panel_view.once("show",function(){t("[data-vc-ui-element-target=\"[data-tab=default_templates]\"]").click()}),vc.templates_panel_view.render().show()},loadDefaultTemplate:function(t){t&&t.preventDefault&&t.preventDefault(),vc.templates_panel_view.loadTemplate(t)},editSettings:function(t){t&&t.preventDefault&&t.preventDefault(),vc.post_settings_view.render().show()},enterFullscreen:function(){var e=t("body");e.hasClass("folded")?(e.data("vcKeepMenuFolded",!0),e.addClass("vc_fullscreen")):e.addClass("vc_fullscreen folded"),t("#vc_windowed-button").show(),t("#vc_fullscreen-button").hide()},leaveFullscreen:function(){var e=t("body");e.hasClass("vc_fullscreen")&&(e.data("vcKeepMenuFolded")?(e.removeClass("vc_fullscreen"),e.removeData("vcKeepMenuFolded")):e.removeClass("vc_fullscreen folded"),t("#vc_windowed-button").hide(),t("#vc_fullscreen-button").show())},sortingStarted:function(){t("#wpbakery_content").addClass("vc_sorting-started")},sortingStopped:function(e,a){var n=a.item.data("element_type"),o=a.placeholder.closest("[data-element_type]").data("element_type")||"";vc.check_relevance(o,n)&&o!=n||(a.placeholder.addClass("vc_hidden-placeholder"),t(e.target).sortable("cancel")),t("#wpbakery_content").removeClass("vc_sorting-started")},updateElementsSorting:function(e,a){_.defer(function(e){var n=a.item.parent().closest("[data-model-id]").data("model"),o=a.item.data("model"),s=e.views[n.id].$content.find("> [data-model-id]"),l=0,r;_.isNull(a.sender)||(r=o.get("parent_id"),vc.storage.lock(),o.save({parent_id:n.id}),r&&e.views[r].checkIsEmpty(),e.views[n.id].checkIsEmpty()),s.each(function(){var e=t(this).data("model");vc.storage.lock(),e.save({order:l++})}),o.save()},this)},updateRowsSorting:function(a,e){_.defer(function(n){var o=e.item.parent(),i=o.closest("[data-model-id]"),i=!!i.length&&i.data("model").get("id"),s=e.item.data("model"),l=e.item.data("element_type"),r=e.item.parent().closest("[data-element_type]").data("element_type")||"";vc.check_relevance(r,l)&&r!=l?(r=s.get("parent_id"),o.find(n.rowSortableSelector).each(function(){var e=t(this).index();vc.storage.lock(),t(this).data("model").save({order:e})}),s.save({parent_id:i}),r&&n.views[r].checkIsEmpty(),i&&n.views[i].checkIsEmpty()):t(a.target).sortable("cancel")},this)},renderPlaceholder:function(e,a){var a=t(a).data("element_type"),n=_.isObject(vc.map[a])&&(_.isBoolean(vc.map[a].is_container)&&!0===vc.map[a].is_container||!_.isEmpty(vc.map[a].as_parent));return t("<div class=\"vc_helper vc_helper-"+a+"\"><i class=\"vc_general vc_element-icon"+(vc.map[a].icon?" "+vc.map[a].icon:"")+"\""+(n?" data-is-container=\"true\"":"")+"></i> "+vc.map[a].name+"</div>").prependTo("body")},rowSortableSelector:"> .wpb_vc_row, > .vc_main-sortable-element",setSortable:function(){if(vc_user_access().partAccess("dragndrop"))return t(".wpb_main_sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",connectWith:".vc_section_container",items:this.rowSortableSelector,handle:".vc_column-move",cancel:".vc-non-draggable-row",distance:.5,start:this.sortingStarted,stop:this.sortingStopped,update:this.updateRowsSorting,tolerance:"intersect",over:function(e,t){var a=t.item.data("element_type"),n=t.placeholder.closest("[data-element_type]").data("element_type")||"";return vc.check_relevance(n,a)&&n!=a?void t.placeholder.css({maxWidth:t.placeholder.parent().width()}):(t.placeholder.addClass("vc_hidden-placeholder"),!1)},out:function(e,t){t.placeholder.removeClass("vc_hidden-placeholder"),t.placeholder.css({maxWidth:t.placeholder.parent().width()})}}),t(".wpb_column_container").sortable({forcePlaceholderSize:!0,forceHelperSize:!1,connectWith:".wpb_column_container",placeholder:"vc_placeholder",items:"> div.wpb_sortable,> div.vc-non-draggable",helper:this.renderPlaceholder,distance:3,cancel:".vc-non-draggable",scroll:!0,scrollSensitivity:70,cursor:"move",cursorAt:{top:20,left:16},tolerance:"intersect",start:function(){t("#wpbakery_content").addClass("vc_sorting-started"),t(".vc_not_inner_content").addClass("dragging_in")},stop:function(e,a){t("#wpbakery_content").removeClass("vc_sorting-started"),t(".dragging_in").removeClass("dragging_in");var n=a.item.data("element_type"),o=a.item.parent().closest("[data-element_type]").data("element_type")||"",i=!!_.isUndefined(vc.map[o].allowed_container_element)||vc.map[o].allowed_container_element;vc.check_relevance(o,n)&&o!=n||t(this).sortable("cancel"),_.isObject(vc.map[n])&&(_.isBoolean(vc.map[n].is_container)&&!0===vc.map[n].is_container||!_.isEmpty(vc.map[n].as_parent))&&!0!==i&&i!==a.item.data("element_type").replace(/_inner$/,"")&&t(this).sortable("cancel"),t(".vc_sorting-empty-container").removeClass("vc_sorting-empty-container")},update:this.updateElementsSorting,over:function(e,t){var a=t.item.data("element_type"),n=t.placeholder.closest("[data-element_type]").data("element_type"),o=!!_.isUndefined(vc.map[n].allowed_container_element)||vc.map[n].allowed_container_element;vc.check_relevance(n,a)&&n!=a||t.placeholder.addClass("vc_hidden-placeholder"),_.isObject(vc.map[a])&&(_.isBoolean(vc.map[a].is_container)&&!0===vc.map[a].is_container||!_.isEmpty(vc.map[a].as_parent))&&!0!==o&&o!==t.item.data("element_type").replace(/_inner$/,"")&&t.placeholder.addClass("vc_hidden-placeholder"),_.isNull(t.sender)||!t.sender.length||t.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||t.sender.addClass("vc_sorting-empty-container"),t.placeholder.css({maxWidth:t.placeholder.parent().width()})},out:function(e,t){t.placeholder.removeClass("vc_hidden-placeholder"),t.placeholder.css({maxWidth:t.placeholder.parent().width()})}}).disableSelection(),this},setNotEmpty:function(){t("#vc_no-content-helper").addClass("vc_not-empty"),t("#vc_navbar").addClass("vc_not-empty")},setIsEmpty:function(){vc.views={},t("#vc_no-content-helper").removeClass("vc_not-empty"),t("#vc_navbar").removeClass("vc_not-empty")},checkEmpty:function(e){if(_.isObject(e)&&!1!==e.get("parent_id")&&e.get("parent_id")!=e.id){if(e=this.views[e.get("parent_id")],!e)return;e.checkIsEmpty()}0===vc.shortcodes.length?this.setIsEmpty():this.setNotEmpty()},switchComposer:function(t){t&&t.preventDefault&&t.preventDefault(),"shown"===this.status?(this.accessPolicy.can("classic_editor")&&(_.isUndefined(this.$switchButton)||this.$switchButton.text(window.i18nLocale.main_button_title_backend_editor),_.isUndefined(this.$buttonsContainer)||this.$buttonsContainer.removeClass("vc_backend-status")),this.close(),this.status="closed"):(this.accessPolicy.can("classic_editor")&&(_.isUndefined(this.$switchButton)||this.$switchButton.text(window.i18nLocale.main_button_title_revert),_.isUndefined(this.$buttonsContainer)||this.$buttonsContainer.addClass("vc_backend-status")),this.show(),this.status="shown")},show:function(){this.$el.show(),this.$post.addClass("vc-disable-editor"),this.$vcStatus.val("true"),this.navOnScroll(),vc.storage.isContentChanged()&&(vc.undoRedoApi&&vc.undoRedoApi.add(vc.storage.getContent()),vc.app.setLoading(),vc.app.views={},_.defer(function(){vc.shortcodes.fetch({reset:!0}),vc.events.trigger("backendEditor.show")}))},setLoading:function(){this.setNotEmpty(),this.$loading_block.addClass("vc_ui-wp-spinner"),this.$metablock_content.addClass("vc_loading-shortcodes")},close:function(){this.$vcStatus.val("false"),this.$el.hide(),_.isObject(window.editorExpand)&&(_.delay(function(){window.scrollBy(0,-1)},17),_.delay(function(){window.scrollBy(0,1)},17)),this.$post.removeClass("vc-disable-editor"),_.defer(function(){vc.events.trigger("backendEditor.close")})},checkVcStatus:function(){var e=new URL(window.location.href).searchParams.has("wpb-backend-editor");vc.accessPolicy.can("be_editor")&&(!vc.accessPolicy.can("classic_editor")||"true"===this.$vcStatus.val()||e)&&this.switchComposer()},setNavTop:function(){this.navTop=this.$nav.length&&this.$nav.offset().top-28},save:function(){t("#wpb-save-post").text(window.i18nLocale.loading),t("#publish").click()},preview:function(){t("#post-preview").click()},navOnScroll:function(){this.$nav=t("#vc_navbar"),this.setNavTop(),this.processScroll(),t(window).off("scroll.composer").on("scroll.composer",this.processScroll)},processScroll:function(){!0===this.disableFixedNav?this.$nav.removeClass("vc_subnav-fixed"):((!this.navTop||0>this.navTop)&&this.setNavTop(),this.scrollTop=t(window).scrollTop()+80,0<this.navTop&&this.scrollTop>=this.navTop&&!this.isFixed?(this.isFixed=1,this.$nav.addClass("vc_subnav-fixed")):this.scrollTop<=this.navTop&&this.isFixed&&(this.isFixed=0,this.$nav.removeClass("vc_subnav-fixed")))},buildRelevance:function(){vc.shortcode_relevance={},_.map(vc.map,function(e){_.isObject(e.as_parent)&&_.isString(e.as_parent.only)&&(vc.shortcode_relevance["parent_only_"+e.base]=e.as_parent.only.replace(/\s/,"").split(",")),_.isObject(e.as_parent)&&_.isString(e.as_parent.except)&&(vc.shortcode_relevance["parent_except_"+e.base]=e.as_parent.except.replace(/\s/,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.only)&&(vc.shortcode_relevance["child_only_"+e.base]=e.as_child.only.replace(/\s/,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.except)&&(vc.shortcode_relevance["child_except_"+e.base]=e.as_child.except.replace(/\s/,"").split(","))}),vc.check_relevance=function(e,t){return!(_.isArray(vc.shortcode_relevance["parent_only_"+e])&&!_.contains(vc.shortcode_relevance["parent_only_"+e],t)||_.isArray(vc.shortcode_relevance["parent_except_"+e])&&_.contains(vc.shortcode_relevance["parent_except_"+e],t)||_.isArray(vc.shortcode_relevance["child_only_"+t])&&!_.contains(vc.shortcode_relevance["child_only_"+t],e)||_.isArray(vc.shortcode_relevance["child_except_"+t])&&_.contains(vc.shortcode_relevance["child_except"+t],e))}},changePostCustomLayout:function(a){var n,o;a&&a.preventDefault&&(a.preventDefault(),a=t(a.currentTarget).attr("data-post-custom-layout"),n=t("#wpb_wpbakery"),(o=t("#vc_ui-panel-post-settings .vc_post-custom-layout[data-post-custom-layout="+a+"]")).addClass("vc-active-post-custom-layout"),o.siblings().removeClass("vc-active-post-custom-layout"),t("input[name=vc_post_custom_layout]").val(a),n.find(".vc_navbar").addClass("vc_post-custom-layout-selected"),n.find(".metabox-composer-content").addClass("vc_post-custom-layout-selected"))},handleEditorPaste:function(e){e=e.originalEvent.clipboardData.getData("text/plain")||"",vc.pasteShortcode(!1,!1,e)},handleBodyClick:function(a){this.isEditorInFocus=!!t(a.target).closest("#wpb_wpbakery, .vc_ui-panel-window").length,this.isEditorInFocus&&!this.isKeydownEventAssigned?(t("body").on("paste",this.handleEditorPaste),this.isKeydownEventAssigned=!0):!this.isEditorInFocus&&this.isKeydownEventAssigned&&(t("body").off("paste",this.handleEditorPaste),this.isKeydownEventAssigned=!1)},openSeo:function(t){t&&t.preventDefault&&t.preventDefault(),vc.post_seo_view.render()}}),t(function(){var e=t("#wpb_wpbakery");e.is("div")&&(vc.app=new vc.visualComposerView({el:e}),vc.accessPolicy.can("be_editor")&&!vc_user_access().isBlockEditorIsEnabled()&&vc.app.checkVcStatus(),t("#post").on("submit",function(){vc.storage.isChanged&&(vc.storage.isChanged=!1,window.jQuery(window).off("beforeunload.vcSave"))}),vc.events.on("vc:backend_editor:show",function(){vc.app.show(),vc.app.status="shown"}),vc.events.on("vc:backend_editor:switch",function(){vc.app.switchComposer()}))})}(window.jQuery),function(t){"use strict";var a=vc.shortcodes;window.VcRowView=vc.shortcode_view.extend({change_columns_layout:!1,events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode","click > .vc_controls .set_columns":"setColumns",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="copy"]':"copy",'click > .vc_controls [data-vc-control="paste"]':"paste",'click > .vc_controls [data-vc-control="move"]':"moveElement",'click > .vc_controls [data-vc-control="toggle"]':"toggleElement","click > .wpb_element_wrapper .vc_controls":"openClosedRow"},convertRowColumns:function(e){var t=e.toString().split(/_/),n=a.where({parent_id:this.model.id}),o=[],s=[],l="";return _.each(t,function(e,t){var e=_.map(e.toString().split(""),function(e){return parseInt(e,10)}),i;l=3<e.length?e[0]+""+e[1]+"/"+e[2]+e[3]:2<e.length?e[0]+"/"+e[1]+e[2]:e[0]+"/"+e[1],s.push(l),e=_.extend(_.isUndefined(n[t])?{}:n[t].get("params"),{width:l}),vc.storage.lock(),i=a.create({shortcode:this.getChildTag(),params:e,parent_id:this.model.id}),_.isObject(n[t])&&_.each(a.where({parent_id:n[t].id}),function(e){vc.storage.lock(),e.save({parent_id:i.id}),vc.storage.lock(),e.trigger("change_parent_id")}),o.push(i)},this),t.length<n.length&&_.each(n.slice(t.length),function(e){_.each(a.where({parent_id:e.id}),function(e){vc.storage.lock(),e.save({parent_id:_.last(o).id}),vc.storage.lock(),e.trigger("change_parent_id")})}),_.each(n,function(e){vc.storage.lock(),e.destroy()},this),this.model.save(),this.setActiveLayoutButton(""+e),s},changeShortcodeParams:function(e){window.VcRowView.__super__.changeShortcodeParams.call(this,e),this.buildDesignHelpers(),this.setRowClasses()},setRowClasses:function(){var e=this.model.getParam("disable_element");this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(e)||(this.$el.addClass("vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg"),this.disable_element_class="vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg")},designHelpersSelector:"> .vc_controls .column_toggle",buildDesignHelpers:function(){var e=this.model.getParam("css"),a=this.$el.find(this.designHelpersSelector),n,o,i;this.$el.find("> .vc_controls .vc_row_color").remove(),this.$el.find("> .vc_controls .vc_row_image").remove(),(i=e.match(/background\-image:\s*url\(([^\)]+)\)/))&&!_.isUndefined(i[1])&&(n=i[1]),(i=e.match(/background\-color:\s*([^\s\;]+)\b/))&&!_.isUndefined(i[1])&&(o=i[1]),(i=e.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/))&&!_.isUndefined(i[1])&&(o=i[1],n=i[2]),e=this.model.getParam("el_id"),this.$el.find("> .vc_controls .vc_row-hash-id").remove(),_.isEmpty(e)||t("<span class=\"vc_row-hash-id\"></span>").text("#"+e).insertAfter(a),n&&t("<span class=\"vc_row_image\" style=\"background-image: url("+n+");\" title=\""+window.i18nLocale.row_background_image+"\"></span>").insertAfter(a),o&&t("<span class=\"vc_row_color\" style=\"background-color: "+o+"\" title=\""+window.i18nLocale.row_background_color+"\"></span>").insertAfter(a)},addElement:function(t){t&&t.preventDefault&&t.preventDefault(),a.create({shortcode:this.getChildTag(),params:{},parent_id:this.model.id}),this.setActiveLayoutButton(),this.$el.removeClass("vc_collapsed-row")},getChildTag:function(){return"vc_row_inner"===this.model.get("shortcode")?"vc_column_inner":"vc_column"},sortingSelector:"> [data-element_type=vc_column], > [data-element_type=vc_column_inner]",sortingSelectorCancel:".vc-non-draggable-column",setSorting:function(){var e;vc_user_access().partAccess("dragndrop")&&(1<(e=this).$content.find(this.sortingSelector).length?this.$content.removeClass("wpb-not-sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-column",tolerance:"pointer",cursor:"move",items:this.sortingSelector,cancel:this.sortingSelectorCancel,distance:.5,start:function(e,a){t("#wpbakery_content").addClass("vc_sorting-started"),a.placeholder.width(a.item.width())},stop:function(){t("#wpbakery_content").removeClass("vc_sorting-started")},update:function(){var a=t(e.sortingSelector,e.$content);a.each(function(){var e=t(this).data("model"),n=t(this).index();e.set("order",n),a.length-1>n&&vc.storage.lock(),e.save()})},over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},beforeStop:function(){}}):(this.$content.hasClass("ui-sortable")&&this.$content.sortable("destroy"),this.$content.addClass("wpb-not-sortable")))},validateCellsList:function(e){var t=[],e=e.replace(/\s/g,"").split("+"),a;return 12===_.reduce(_.map(e,function(e){var n;return e.match(/^(vc_)?span\d?$/)?!1===(n=vc_convert_column_span_size(e))?1e3:(a=n.split(/\//),t.push(a[0]+""+a[1]),12*parseInt(a[0],10)/parseInt(a[1],10)):e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(a=e.split(/\//),t.push(a[0]+""+a[1]),12*parseInt(a[0],10)/parseInt(a[1],10)):1e4}),function(e,t){return t+=e},0)&&t.join("_")},setActiveLayoutButton:function(e){e=e||_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),function(e){return e=e.getParam("width"),e?e.replace(/\//,""):"11"}).join("_"),this.$el.find("> .vc_controls .vc_active").removeClass("vc_active"),e=this.$el.find("> .vc_ [data-cells-mask=\""+vc_get_column_mask(e)+"\"] [data-cells=\""+e+"\"], > .vc_controls [data-cells-mask=\""+vc_get_column_mask(e)+"\"][data-cells=\""+e+"\"]"),(e.length?e:this.$el.find("> .vc_controls [data-cells-mask=custom]")).addClass("vc_active")},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutUIPanelBackendEditor({el:t("#vc_ui-panel-row-layout")})),vc.row_layout_editor},setColumns:function(a){_.isObject(a)&&a.preventDefault();var a=t(a.currentTarget),n;"custom"===a.data("cells")?this.layoutEditor().render(this.model).show():(vc.is_mobile&&!(n=a.parent()).hasClass("vc_visible")&&(n.addClass("vc_visible"),t(document).off("click.vcRowColumnsControl").on("click.vcRowColumnsControl",function(){n.removeClass("vc_visible")})),a.is(".vc_active")||(this.change_columns_layout=!0,_.defer(function(e,t){e.convertRowColumns(t)},this,a.data("cells")))),this.$el.removeClass("vc_collapsed-row")},sizeRows:function(){var e=45;t("> .wpb_vc_column, > .wpb_vc_column_inner",this.$content).each(function(){var a=t(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:0}).height();e<a&&(e=a)}).each(function(){t(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:e})})},ready:function(t){return window.VcRowView.__super__.ready.call(this,t),this},checkIsEmpty:function(){window.VcRowView.__super__.checkIsEmpty.call(this),this.setSorting()},changedContent:function(){return this.change_columns_layout?this:void this.setActiveLayoutButton()},moveElement:function(t){t&&t.preventDefault&&t.preventDefault()},toggleElement:function(t){t&&t.preventDefault&&t.preventDefault(),this.$el.toggleClass("vc_collapsed-row")},openClosedRow:function(){this.$el.removeClass("vc_collapsed-row")},remove:function(){this.$content&&(this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content.data("uiDroppable"))&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcRowView.__super__.remove.call(this)}}),window.VcColumnView=vc.shortcode_view.extend({events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode",'click > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="copy"]':"copy",'click > .vc_controls [data-vc-control="paste"]':"paste","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},current_column_width:!1,initialize:function(e){window.VcColumnView.__super__.initialize.call(this,e),_.bindAll(this,"setDropable","dropButton")},render:function(){return window.VcColumnView.__super__.render.call(this),this.current_column_width=this.model.get("params").width||"1/1",this.$el.attr("data-width",this.current_column_width),this.setEmpty(),this},changeShortcodeParams:function(e){window.VcColumnView.__super__.changeShortcodeParams.call(this,e),this.setColumnClasses(),this.buildDesignHelpers()},designHelpersSelector:"> .vc_controls .column_add",buildDesignHelpers:function(){var e=this.model.getParam("css"),a=this.$el.find(this.designHelpersSelector).get(0),n,o,i;this.$el.find("> .vc_controls .vc_column_color").remove(),this.$el.find("> .vc_controls .vc_column_image").remove(),(n=e.match(/background\-image:\s*url\(([^\)]+)\)/))&&!_.isUndefined(n[1])&&(o=n[1]),(n=e.match(/background\-color:\s*([^\s\;]+)\b/))&&!_.isUndefined(n[1])&&(i=n[1]),(n=e.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/))&&!_.isUndefined(n[1])&&(i=n[1],o=n[2]),o&&t("<span class=\"vc_column_image\" style=\"background-image: url("+o+");\" title=\""+i18nLocale.column_background_image+"\"></span>").insertBefore(a),i&&t("<span class=\"vc_column_color\" style=\"background-color: "+i+"\" title=\""+i18nLocale.column_background_color+"\"></span>").insertBefore(a)},setColumnClasses:function(){var e=this.model.getParam("offset")||"",t=this.model.getParam("width")||"1/1",a=this.convertSize(t),n;this.current_offset_class&&this.$el.removeClass(this.current_offset_class),this.current_column_width!==t&&(n=this.convertSize(this.current_column_width),this.$el.attr("data-width",t).removeClass(n).addClass(a),this.current_column_width=t),e.match(/vc_col\-sm\-\d+/)&&this.$el.removeClass(a),_.isEmpty(e)||this.$el.addClass(e),this.current_offset_class=e},addToEmpty:function(a){a&&a.preventDefault&&a.preventDefault(),t(a.target).hasClass("vc_empty-container")&&this.addElement(a)},setDropable:function(){return this.$content.droppable({greedy:!0,accept:"vc_column_inner"===this.model.get("shortcode")?".dropable_el":".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton}),this},dropButton:function(e,t){t.draggable.is("#wpb-add-new-element")?vc.add_element_block_view({model:{position_to_add:"end"}}).show(this):t.draggable.is("#wpb-add-new-row")&&this.createRow()},setEmpty:function(){this.$el.addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){this.$el.removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")},checkIsEmpty:function(){a.where({parent_id:this.model.id}).length?this.unsetEmpty():this.setEmpty(),window.VcColumnView.__super__.checkIsEmpty.call(this)},createRow:function(){var e=a.create({shortcode:"vc_row_inner",params:{},parent_id:this.model.id});return a.create({shortcode:"vc_column_inner",params:{width:"1/1"},parent_id:e.id}),e},convertSize:function(e){var e=e?e.split("/"):[1,1],t=_.range(1,13),a=!_.isUndefined(e[0])&&0<=_.indexOf(t,parseInt(e[0],10))&&parseInt(e[0],10),t=!_.isUndefined(e[1])&&0<=_.indexOf(t,parseInt(e[1],10))&&parseInt(e[1],10);return!1!==a&&!1!==t?"vc_col-sm-"+12*a/t:"vc_col-sm-12"},deleteShortcode:function(t){var e=this.model.get("parent_id"),a;return(t&&t.preventDefault&&t.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section))&&void(this.model.destroy(),e&&!vc.shortcodes.where({parent_id:e}).length?(a=vc.shortcodes.get(e),_.contains(["vc_column","vc_column_inner"],a.get("shortcode"))||a.destroy()):e&&(a=vc.shortcodes.get(e))&&a.view&&a.view.setActiveLayoutButton&&a.view.setActiveLayoutButton())},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcColumnView.__super__.remove.call(this)}}),window.VcSectionView=VcColumnView.extend({designHelpersSelector:"> .vc_controls-row .vc_column-edit",setColumnClasses:function(){var e=this.model.getParam("disable_element");this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(e)||(this.$el.addClass("vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg"),this.disable_element_class="vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg")},buildDesignHelpers:function(){var e=this.model.getParam("css"),a=this.$el.find(this.designHelpersSelector),n,o,i;this.$el.find("> .vc_controls-row .vc_row_color").remove(),this.$el.find("> .vc_controls-row .vc_row_image").remove(),(i=e.match(/background\-image:\s*url\(([^\)]+)\)/))&&!_.isUndefined(i[1])&&(n=i[1]),(i=e.match(/background\-color:\s*([^\s\;]+)\b/))&&!_.isUndefined(i[1])&&(o=i[1]),(i=e.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/))&&!_.isUndefined(i[1])&&(o=i[1],n=i[2]),e=this.model.getParam("el_id"),this.$el.find("> .vc_controls-row .vc_row-hash-id").remove(),_.isEmpty(e)||t("<span class=\"vc_row-hash-id\"></span>").text("#"+e).insertAfter(a),n&&t("<span class=\"vc_row_image\" style=\"background-image: url("+n+");\" title=\""+window.i18nLocale.row_background_image+"\"></span>").insertAfter(a),o&&t("<span class=\"vc_row_color\" style=\"background-color: "+o+"\" title=\""+window.i18nLocale.row_background_color+"\"></span>").insertAfter(a)},checkIsEmpty:function(){window.VcSectionView.__super__.checkIsEmpty.call(this),this.setSorting()},setSorting:function(){var e;vc_user_access().partAccess("dragndrop")&&(e=this).$content.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",connectWith:".wpb_main_sortable,.wpb_vc_section .vc_section_container",cursor:"move",items:"> .wpb_vc_row",handle:".vc_column-move",cancel:".vc-non-draggable-row",distance:.5,scroll:!0,scrollSensitivity:70,tolerance:"intersect",update:function(a,n){var o=n.item.data("element_type"),i=n.item.parent().closest("[data-element_type]").data("element_type"),s;vc.check_relevance(i,o)&&i!=o&&(s=t("> div.wpb_sortable,> div.vc-non-draggable",e.$content)).each(function(){var e=t(this).data("model"),a=t(this).index(),o;e.set("order",a),s.length-1>a&&vc.storage.lock(),_.isNull(n.sender)||(a=n.item.parent().closest("[data-model-id]").data("model"),o=e.get("parent_id"),vc.storage.lock(),e.save({parent_id:a.id}),o&&vc.app.views[o].checkIsEmpty(),vc.app.views[a.id].checkIsEmpty()),e.save()})},stop:function(e,a){t("#wpbakery_content").removeClass("vc_sorting-started"),t(".dragging_in").removeClass("dragging_in");var n=a.item.data("element_type"),a=a.item.parent().closest("[data-element_type]").data("element_type");vc.check_relevance(a,n)&&a!=n||t(this).sortable("cancel"),t(".vc_sorting-empty-container").removeClass("vc_sorting-empty-container")},over:function(e,t){var a=t.item.data("element_type"),n=t.placeholder.closest("[data-element_type]").data("element_type")||"",o=!!_.isUndefined(vc.map[n].allowed_container_element)||vc.map[n].allowed_container_element;return!vc.check_relevance(n,a)||n==a||_.isObject(vc.map[a])&&(_.isBoolean(vc.map[a].is_container)&&!0===vc.map[a].is_container||!_.isEmpty(vc.map[a].as_parent))&&!0!==o&&o!==t.item.data("element_type").replace(/_inner$/,"")?(t.placeholder.addClass("vc_hidden-placeholder"),!1):(_.isNull(t.sender)||!t.sender.length||t.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||t.sender.addClass("vc_sorting-empty-container"),void t.placeholder.css({maxWidth:t.placeholder.parent().width()}))},out:function(e,t){t.placeholder.removeClass("vc_hidden-placeholder"),t.placeholder.css({maxWidth:t.placeholder.parent().width()}),_.isNull(t.sender)||!t.sender.length||t.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||t.sender.addClass("vc_sorting-empty-container")}})}}),window.VcAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{'click .tab_controls:not(".nested_tab_controls") .add_tab':"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcAccordionView.__super__.render.call(this),vc_user_access().shortcodeAll("vc_accordion_tab")?vc_user_access().partAccess("dragndrop")&&this.$content.sortable({axis:"y",handle:"h3",stop:function(e,a){a.item.prev().triggerHandler("focusout"),t(this).find("> .wpb_sortable").each(function(){t(this).data("model").save({order:t(this).index()})})}}):this.$el.find(".tab_controls").hide(),this},changeShortcodeParams:function(e){window.VcAccordionView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),e=_.isString(e.collapsible)&&"yes"===e.collapsible,this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",e)},changedContent:function(e){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var t=_.isString(this.model.get("params").collapsible)&&"yes"===this.model.get("params").collapsible;this.$content.accordion({header:"h3:not('.wpb_vc_accordion_tab h3')",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:t,active:!1===this.adding_new_tab&&!0!==e.model.get("cloned")?0:e.$el.index()}),this.adding_new_tab=!1},addTab:function(t){return(t&&t.preventDefault&&t.preventDefault(),!!vc_user_access().shortcodeAll("vc_accordion_tab"))&&void(this.adding_new_tab=!0,vc.shortcodes.create({shortcode:"vc_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id}))},_loadDefaults:function(){window.VcAccordionView.__super__._loadDefaults.call(this)}}),window.VcAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(e){window.VcAccordionTabView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&_.isString(e.title)&&this.$el.find("> h3 .tab-label").text(e.title)},setEmpty:function(){t("> [data-element_type]",this.$el).addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){t("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcNestedAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{"click .nested_tab_controls .add_tab":"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcNestedAccordionView.__super__.render.call(this),this.$content.sortable({axis:"y",handle:"h3",stop:function(e,a){a.item.prev().triggerHandler("focusout"),t(this).find("> .wpb_sortable").each(function(){var e=t(this).data("model");e.save({order:t(this).index()})})}}),this},changeShortcodeParams:function(e){window.VcNestedAccordionView.__super__.changeShortcodeParams.call(this,e);var t=!!(_.isString(this.model.get("params").collapsible)&&"yes"===this.model.get("params").collapsible);this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",t)},changedContent:function(e){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var t=!!(_.isString(this.model.get("params").collapsible)&&"yes"===this.model.get("params").collapsible);this.$content.accordion({header:"h3",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:t,active:!1===this.adding_new_tab&&!0!==e.model.get("cloned")?0:e.$el.index()}),this.adding_new_tab=!1},addTab:function(t){this.adding_new_tab=!0,t.preventDefault(),vc.shortcodes.create({shortcode:"vc_nested_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id})},_loadDefaults:function(){window.VcNestedAccordionView.__super__._loadDefaults.call(this)}}),window.VcNestedAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(e){var t=e.get("params");window.VcNestedAccordionTabView.__super__.changeShortcodeParams.call(this,e),_.isObject(t)&&_.isString(t.title)&&this.$el.find("> h3 .tab-label").text(t.title)},setEmpty:function(){t("> [data-element_type]",this.$el).addClass("vc_empty-column"),this.$content.addClass("vc_empty-container")},unsetEmpty:function(){t("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcMessageView=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t;window.VcMessageView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),t=this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.color.value).join(" ")),_.isObject(e)&&_.isString(e.color)&&t.addClass(e.color)}}),window.VcMessageView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(e){var a,n,o,i;switch(window.VcMessageView_Backend.__super__.changeShortcodeParams.call(this,e),a=e.get("params"),e=this.$el.find("> .wpb_element_wrapper"),n=["vc_message_box"],_.isUndefined(a.message_box_style)&&(a.message_box_style="classic"),_.isUndefined(a.message_box_color)&&(a.message_box_color="alert-info"),a.style?"3d"===a.style?(a.message_box_style="3d",a.style="rounded"):"outlined"===a.style?(a.message_box_style="outline",a.style="rounded"):"square_outlined"===a.style&&(a.message_box_style="outline",a.style="square"):a.style="rounded",n.push("vc_message_box-"+a.style),a.message_box_style&&n.push("vc_message_box-"+a.message_box_style),e.attr("class","wpb_element_wrapper"),e.find(".vc_message_box-icon").remove(),o=_.isUndefined(a["icon_"+a.icon_type])?"fa fa-info-circle":a["icon_"+a.icon_type],i=a.color,a.color){case"info":o="fa fa-info-circle";break;case"alert-info":o="vc_pixel_icon vc_pixel_icon-info";break;case"success":o="fa fa-check";break;case"alert-success":o="vc_pixel_icon vc_pixel_icon-tick";break;case"warning":o="fa fa-exclamation-triangle";break;case"alert-warning":o="vc_pixel_icon vc_pixel_icon-alert";break;case"danger":o="fa fa-times";break;case"alert-danger":o="vc_pixel_icon vc_pixel_icon-explanation";break;default:i=a.message_box_color;}n.push("vc_color-"+i),e.addClass(n.join(" ")),e.prepend(t("<div class=\"vc_message_box-icon\"><i class=\""+o+"\"></i></div>"))}}),window.VcTextSeparatorView=vc.shortcode_view.extend({changeShortcodeParams:function(e){window.VcTextSeparatorView.__super__.changeShortcodeParams.call(this,e),e=e.get("params");var a=this.$el.find("> .wpb_element_wrapper");_.isObject(e)&&_.isString(e.title_align)&&a.removeClass(_.values(this.params.title_align.value).join(" ")).addClass(e.title_align),_.isObject(e)&&_.isString(e.add_icon)&&"true"===e.add_icon&&((e=t("<i class=\""+e["i_icon_"+e.i_type]+"\" ></i>")).prependTo(a.find("[name=title]")),e.after(" "))}}),window.VcCallToActionView=vc.shortcode_view.extend({changeShortcodeParams:function(e){window.VcCallToActionView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&_.isString(e.position)&&this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.position.value).join(" ")).addClass(e.position)}}),window.VcCallToActionView3=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t;window.VcCallToActionView3.__super__.changeShortcodeParams.call(this,e),e=_.extend({add_icon:"",i_type:""},e.get("params")),t=this.$el.find(".vc_admin_label.admin_label_i_type"),_.isEmpty(e.add_icon)?t.addClass("hidden-label").hide():_.isEmpty(e.i_type)||_.isEmpty(e["i_icon_"+e.i_type])||(e=vc_toTitleCase(e.i_type)+" - <i class=\""+e["i_icon_"+e.i_type]+"\"></i>",t.html("<label>"+t.find("label").text()+"</label>: "+e),t.show().removeClass("hidden-label"))}}),window.VcToggleView=vc.shortcode_view.extend({events:function(){return _.extend({"click .vc_toggle_title":"toggle","click .toggle_title":"toggle"},window.VcToggleView.__super__.events)},toggle:function(a){a&&a.preventDefault&&a.preventDefault(),t(a.currentTarget).toggleClass("vc_toggle_title_active"),t(".vc_toggle_content",this.$el).slideToggle(500)},changeShortcodeParams:function(e){window.VcToggleView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&_.isString(e.open)&&"true"===e.open&&t(".vc_toggle_title",this.$el).addClass("vc_toggle_title_active").next().show()}}),window.VcButtonView=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(t){t&&t.preventDefault&&t.preventDefault()},changeShortcodeParams:function(e){var t;window.VcButtonView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&(t=e.color+" "+e.size+" "+e.icon,this.$el.find(".wpb_element_wrapper").removeClass(t),this.$el.find("button.title").attr({class:"title textfield wpb_button "+t}),"none"!==e.icon&&0===this.$el.find("button i.icon").length?this.$el.find("button.title").append("<i class=\"icon\"></i>"):this.$el.find("button.title i.icon").remove())}}),window.VcButton2View=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(t){t&&t.preventDefault&&t.preventDefault()},changeShortcodeParams:function(e){window.VcButton2View.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&(e=(e.color?"vc_btn_"+e.color:"")+" "+(e.color?"vc_btn-"+e.color:"")+" "+(e.size?"vc_btn-"+e.size:"")+" "+(e.size?"vc_btn_"+e.size:"")+" "+(e.style?"vc_btn_"+e.style:""),this.$el.find(".wpb_element_wrapper").removeClass(e),this.$el.find("button.title").attr({class:"title textfield vc_btn  "+e}))}}),window.VcButton3View=vc.shortcode_view.extend({buttonTemplate:!1,buttonTemplateCompiled:!1,$wrapper:!1,events:function(){return _.extend({"click .vc_btn3":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(t){t&&t.preventDefault&&t.preventDefault()},changeShortcodeParams:function(e){var a;window.VcButton3View.__super__.changeShortcodeParams.call(this,e),a=_.extend({},e.get("params")),this.buttonTemplate||(this.buttonTemplate=this.$el.find(".vc_btn3-container").html(),this.buttonTemplateCompiled=vc.template(this.buttonTemplate,vc.templateOptions.custom)),this.$wrapper||(this.$wrapper=this.$el.find(".wpb_element_wrapper")),_.isObject(a)&&(a.title&&_.isEmpty(a.title.trim())&&(a.title="<span class=\"vc_btn3-placeholder\">&nbsp;</span>"),"custom"===a.style?(a.color=void 0,_.isEmpty(a.custom_background)&&_.isEmpty(a.custom_text)&&(a.color="grey")):"outline-custom"===a.style&&(a.color=void 0,_.isEmpty(a.outline_custom_color))&&_.isEmpty(a.outline_custom_hover_background)&&_.isEmpty(a.outline_custom_hover_text)&&(a.style="outline",a.color="grey"),e=t(this.buttonTemplateCompiled({params:a})),"custom"===a.style?("undefined"!==a.custom_background&&e.css("background-color",a.custom_background),"undefined"!==a.custom_text&&e.css("color",a.custom_text)):"outline-custom"===a.style&&e.css({"background-color":"transparent","border-color":a.outline_custom_color,color:a.outline_custom_color}).hover(function(){t(this).css({"background-color":a.outline_custom_hover_background,"border-color":a.outline_custom_hover_background,color:a.outline_custom_hover_text})},function(){t(this).css({"background-color":"transparent","border-color":a.outline_custom_color,color:a.outline_custom_color})}),this.$wrapper.find(".vc_btn3-container").html(e))}}),window.VcTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{'click .tabs_controls .add_tab:not(".nested_tab_controls .add_tab")':"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(e){window.VcTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_tabs_holder"),this.createAddTabButton(),this},ready:function(t){window.VcTabsView.__super__.ready.call(this,t)},createAddTabButton:function(){var e=Date.now()+"-"+Math.floor(11*Math.random());this.$tabs.append("<div id=\"new-tab-"+e+"\" class=\"new_element_button\"></div>"),this.$add_button=t("<li class=\"add_tab_block\"><a href=\"#new-tab-"+e+"\" class=\"add_tab\" title=\""+window.i18nLocale.add_tab+"\"></a></li>").appendTo(this.$tabs.find(".tabs_controls")),vc_user_access().shortcodeAll("vc_tab")||this.$add_button.hide()},addTab:function(t){var a;return t&&t.preventDefault&&t.preventDefault(),vc_user_access().shortcodeAll("vc_tab")&&(this.new_tab_adding=!0,t=window.i18nLocale.tab,a=this.$tabs.find("[data-element_type=vc_tab]").length,a=Date.now()+"-"+a+"-"+Math.floor(11*Math.random()),vc.shortcodes.create({shortcode:"vc_tab",params:{title:t,tab_id:a},parent_id:this.model.id})),!1},stopSorting:function(){var e;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each(function(){t(this).find("a").attr("href").replace("#",""),e=vc.shortcodes.get(t("[id="+t(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),e.save({order:t(this).index()})}),e&&e.save()},changedContent:function(e){var a=e.model.get("params");this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(e,a){var n=t(":first-child",a.newTab).attr("href").substr(1),o=t(":first-child",a.oldTab).attr("href").substr(1);"http"==n.substr(4,4)&&t("[id='"+n+"']").css("display","block"),"http"==o.substr(4,4)&&t("[id='"+o+"']").css("display","none")},select:function(e,a){return!t(a.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),vc_user_access().shortcodeAll("vc_tab")&&this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"===this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),!0===e.model.get("cloned")?(e.model.get("cloned_from"),e=t(".tabs_controls > .add_tab_block",this.$content),e=t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertBefore(e),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",e.index())):(t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?t(".ui-tabs-nav li",this.$content).length-2:0)),this.new_tab_adding=!1},cloneModel:function(e,t,n){var n=_.isBoolean(n)&&!0===n?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,o=_.extend({},e.get("params")),i=e.get("shortcode"),s;return"vc_tab"===i&&_.extend(o,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element-type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),s=a.create({shortcode:i,id:vc_guid(),parent_id:t,order:n,cloned:"vc_tab"!==i,cloned_from:e.toJSON(),params:o}),_.each(a.where({parent_id:e.id}),function(e){this.cloneModel(e,s.get("id"),!0)},this),s}}),window.VcNestedTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(e){window.VcNestedTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcNestedTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_nested_tabs_holder"),this.createAddTabButton(),this},ready:function(t){window.VcNestedTabsView.__super__.ready.call(this,t)},createAddTabButton:function(){var e=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append("<div id=\"new-tab-"+e+"\" class=\"new_element_button\"></div>"),this.$add_button=t("<li class=\"add_tab_block\"><a href=\"#new-tab-"+e+"\" class=\"add_tab\" title=\""+window.i18nLocale.add_tab+"\"></a></li>").appendTo(this.$tabs.find(".nested_tabs_controls"))},addTab:function(t){t.preventDefault(),this.new_tab_adding=!0;var e=window.i18nLocale.tab,a=this.$tabs.find("[data-element_type=vc_nested_tab]").length,n=+new Date+"-"+a+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_nested_tab",params:{title:e,tab_id:n},parent_id:this.model.id}),!1},stopSorting:function(){var e;this.$tabs.find("ul.nested_tabs_controls li:not(.add_tab_block)").each(function(){t(this).find("a").attr("href").replace("#","");e=vc.shortcodes.get(t("[id="+t(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),e.save({order:t(this).index()})}),e.save()},changedContent:function(e){var a=e.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(e,a){var n=t(":first-child",a.newTab).attr("href").substr(1),o=t(":first-child",a.oldTab).attr("href").substr(1);"http"==n.substr(4,4)&&t("[id='"+n+"']").css("display","block"),"http"==o.substr(4,4)&&t("[id='"+o+"']").css("display","none")},select:function(e,a){return!t(a.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),!0===e.model.get("cloned")){var n=e.model.get("cloned_from"),o=t("[href=\"#tab-"+n.params.tab_id+"\"]",this.$content).parent(),i;i="undefined"==typeof o.prop("tagName")?t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertBefore(this.$add_button):t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertAfter(o),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",i.index())}else t("<li><a href='#tab-"+a.tab_id+"'>"+a.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?t(".nested_tabs_controls li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(e,t,n){var o=_.isBoolean(n)&&!0===n?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,i=_.extend({},e.get("params")),s;return"vc_nested_tab"===e.get("shortcode")&&_.extend(i,{tab_id:+new Date+"-"+this.$tabs.find("[data-element-type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())}),s=a.create({shortcode:e.get("shortcode"),id:vc_guid(),parent_id:t,order:o,cloned:"vc_nested_tab"!==e.get("shortcode"),cloned_from:e.toJSON(),params:i}),_.each(a.where({parent_id:e.id}),function(e){this.cloneModel(e,s.get("id"),!0)},this),s}}),window.VcTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var e=this.model.get("params");return window.VcTabView.__super__.render.call(this),e.tab_id||(e.tab_id=Date.now()+"-"+Math.floor(11*Math.random()),this.model.save("params",e)),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(t){return window.VcTabView.__super__.ready.call(this,t),this.$tabs=this.$el.closest(".wpb_tabs_holder"),this.model.get("params"),this},changeShortcodeParams:function(e){window.VcTabView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&_.isString(e.title)&&_.isString(e.tab_id)&&t(".ui-tabs-nav [href=\"#tab-"+e.tab_id+"\"]").text(e.title)},deleteShortcode:function(a){a&&a.preventDefault&&a.preventDefault();var a=confirm(window.i18nLocale.press_ok_to_delete_section),n=this.model.get("parent_id"),o;return!0===a&&(this.model.destroy(),vc.shortcodes.where({parent_id:n}).length?(a=this.model.get("params"),o=t("[href=\"#tab-"+a.tab_id+"\"]",this.$tabs).parent().index(),t("[href=\"#tab-"+a.tab_id+"\"]").parent().remove(),0<(a=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length)&&this.$tabs.tabs("refresh"),void(o<a?this.$tabs.tabs("option","active",o):0<a&&this.$tabs.tabs("option","active",a-1))):(vc.shortcodes.get(n).destroy(),!1))},cloneModel:function(e,t,n){var n=_.isBoolean(n)&&!0===n?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,o=_.extend({},e.get("params")),i=e.get("shortcode"),s;return"vc_tab"===i&&_.extend(o,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element_type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),s=a.create({shortcode:i,parent_id:t,order:n,cloned:!0,cloned_from:e.toJSON(),params:o}),_.each(a.where({parent_id:e.id}),function(e){this.cloneModel(e,s.get("id"),!0)},this),s}}),window.VcNestedTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var e=this.model.get("params");return window.VcNestedTabView.__super__.render.call(this),e.tab_id&&-1==e.tab_id.indexOf("def")||(e.tab_id=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",e)),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(t){window.VcNestedTabView.__super__.ready.call(this,t),this.$tabs=this.$el.closest(".wpb_nested_tabs_holder");this.model.get("params");return this},changeShortcodeParams:function(e){var a=e.get("params");window.VcNestedTabView.__super__.changeShortcodeParams.call(this,e),_.isObject(a)&&_.isString(a.title)&&_.isString(a.tab_id)&&t(".ui-tabs-nav [href=\"#tab-"+a.tab_id+"\"]").text(a.title)},deleteShortcode:function(a){_.isObject(a)&&a.preventDefault();var e=confirm(window.i18nLocale.press_ok_to_delete_section),n=this.model.get("parent_id");if(!0!==e)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:n}).length)return vc.shortcodes.get(n).destroy(),!1;var o=this.model.get("params"),i=t("[href=\"#tab-"+o.tab_id+"\"]",this.$tabs).parent().index();t("[href=\"#tab-"+o.tab_id+"\"]").parent().remove();var s=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;0<s&&this.$tabs.tabs("refresh"),i<s?this.$tabs.tabs("option","active",i):0<s&&this.$tabs.tabs("option","active",s-1)},cloneModel:function(e,t,n){var o=_.isBoolean(n)&&!0===n?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,i=_.extend({},e.get("params"));"vc_nested_tab"===e.get("shortcode")&&_.extend(i,{tab_id:+new Date+"-"+this.$tabs.find("[data-element_type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())});var s=a.create({shortcode:e.get("shortcode"),parent_id:t,order:o,cloned:!0,cloned_from:e.toJSON(),params:i});return _.each(a.where({parent_id:e.id}),function(e){this.cloneModel(e,s.id,!0)},this),s}}),window.VcIconElementView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t=e.get("shortcode"),a=e.get("params"),t=vc.map[t];_.isArray(t.params)&&_.each(t.params,function(e){var t,n;!_.isUndefined(e.admin_label)&&e.admin_label&&(e=e.param_name,t=a[e],(n=this.$el.find("> .wpb_element_wrapper").children(".admin_label_"+e)).length)&&(""===t||_.isUndefined(t)?n.hide().addClass("hidden-label"):("type"!==e||_.isUndefined(a["icon_"+t])||(t=vc_toTitleCase(t)+" - <i class='"+a["icon_"+t]+"'></i>"),n.html("<label>"+n.find("label").text()+"</label>: "+t),n.show().removeClass("hidden-label")))},this),t=vc.app.views[this.model.get("parent_id")],!1!==e.get("parent_id")&&_.isObject(t)&&t.checkIsEmpty()}}),window.VcBackendTtaViewInterface=vc.shortcode_view.extend({sortableSelector:!1,$sortable:!1,$navigation:!1,defaultSectionTitle:window.i18nLocale.tab,sortableUpdateModelIdSelector:"data-vc-target-model-id",activeClass:"vc_active",sortingPlaceholder:"vc_placeholder",events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .vc_controls .vc_control-btn-copy":"copy","click > .vc_controls .vc_control-btn-paste":"paste","click > .vc_controls .vc_control-btn-prepend":"clickPrependSection","click .vc_tta-section-append":"clickAppendSection"},initialize:function(e){window.VcBackendTtaViewInterface.__super__.initialize.call(this,e),_.bindAll(this,"updateSorting")},render:function(){return window.VcBackendTtaViewInterface.__super__.render.call(this),this.$el.addClass("vc_tta-container vc_tta-o-non-responsive"),this},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper .vc_tta-panels")},clickAppendSection:function(t){t&&t.preventDefault&&t.preventDefault(),this.addSection()},clickPrependSection:function(t){t&&t.preventDefault&&t.preventDefault(),this.addSection(!0)},addSection:function(e){return e={shortcode:"vc_tta_section",params:{title:this.defaultSectionTitle},parent_id:this.model.get("id"),order:_.isBoolean(e)&&e?vc.add_element_block_view.getFirstPositionIndex():vc.shortcodes.getNextOrder(),prepend:e},vc.shortcodes.create(e)},findSection:function(e){return this.$content.children("[data-model-id=\""+e+"\"]")},getIndex:function(e){return e.index()},buildSortable:function(e){return"edit"!==vc_user_access().getState("shortcodes")&&vc_user_access().shortcodeAll("vc_tta_section")&&e.sortable({forcePlaceholderSize:!0,placeholder:this.sortingPlaceholder,helper:this.renderSortingPlaceholder,scroll:!0,cursor:"move",cursorAt:{top:20,left:16},start:function(){},over:function(){},stop:function(e,t){t.item.attr("style","")},update:this.updateSorting,items:this.sortableSelector})},updateSorting:function(){var e;return!!vc_user_access().shortcodeAll("vc_tta_section")&&void((e=this).$sortable.find(this.sortableSelector).each(function(){var a=t(this),n=a.attr(e.sortableUpdateModelIdSelector),n=vc.shortcodes.get(n);vc.storage.lock(),n.save({order:e.getIndex(a)})}),vc.storage.unlock(),vc.storage.save())},makeFirstSectionActive:function(){this.$content.children(":first-child").addClass(this.activeClass)},checkForActiveSection:function(){this.$content.children("."+this.activeClass).length||this.makeFirstSectionActive()},changeActiveSection:function(e){this.$content.children(".vc_tta-panel."+this.activeClass).removeClass(this.activeClass),this.findSection(e).addClass(this.activeClass)},changedContent:function(e){return e=window.VcBackendTtaViewInterface.__super__.changedContent.call(this,e),this.checkForActiveSection(),this.buildSortable(this.$sortable),e},notifySectionChanged:function(e){var t=e.get("view");_.isObject(t)&&(e=e.getParam("title"),_.isString(e)&&e.length||(e=this.defaultSectionTitle),t.$el.find(".vc_tta-panel-title a .vc_tta-title-text").text(e))},notifySectionRendered:function(){},getNextTab:function(e){var t=this.$navigation.children(),a=t.length-2,e=e.index(),a=e===a?t.eq(e-1):t.eq(e+1);return a},renderSortingPlaceholder:function(e,t){return vc.app.renderPlaceholder(e,t)}}),window.VcBackendTtaTabsView=window.VcBackendTtaViewInterface.extend({sortableSelector:"> [data-vc-tab]",sortableSelectorCancel:".vc-non-draggable-container",sortablePlaceholderClass:"vc_placeholder-tta-tab",navigationSectionTemplate:null,navigationSectionTemplateParsed:null,$navigationSectionAdd:null,sortingPlaceholder:"vc_placeholder-tab vc_tta-tab",render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$el.find("> .wpb_element_wrapper .vc_tta-tabs-list"),this.$sortable=this.$navigation,this.$navigationSectionAdd=this.$navigation.children(".vc_tta-tab:first-child"),this.setNavigationSectionTemplate(this.$navigationSectionAdd.prop("outerHTML")),vc_user_access().shortcodeAll("vc_tta_section")?(this.$navigationSectionAdd.addClass("vc_tta-section-append").removeAttr("data-vc-target-model-id").removeAttr("data-vc-tab").find("[data-vc-target]").html("<i class=\"vc_tta-controls-icon vc_tta-controls-icon-plus\"></i>").removeAttr("data-vc-tabs").removeAttr("data-vc-target").removeAttr("data-vc-target-model-id").removeAttr("data-vc-toggle"),"true"===this.$navigationSectionAdd.attr("data-hide-add-control")&&this.$navigationSectionAdd.css("display","none")):this.$navigationSectionAdd.hide(),this},setNavigationSectionTemplate:function(e){this.navigationSectionTemplate=e,this.navigationSectionTemplateParsed=vc.template(this.navigationSectionTemplate,vc.templateOptions.custom)},getNavigationSectionTemplate:function(){return this.navigationSectionTemplate},getParsedNavigationSectionTemplate:function(e){return this.navigationSectionTemplateParsed(e)},changeNavigationSectionTitle:function(e,t){this.findNavigationTab(e).find("[data-vc-target]").text(t)},changeActiveSection:function(e){window.VcBackendTtaTabsView.__super__.changeActiveSection.call(this,e),this.$navigation.children("."+this.activeClass).removeClass(this.activeClass),this.findNavigationTab(e).addClass(this.activeClass)},notifySectionRendered:function(e){var a,n;window.VcBackendTtaTabsView.__super__.notifySectionRendered.call(this,e),a=e.getParam("title"),a=t(this.getParsedNavigationSectionTemplate({model_id:e.get("id"),section_title:_.isString(a)&&0<a.length?a:this.defaultSectionTitle})),e.get("cloned")?(n=e.get("cloned_from"),_.isObject(n)&&((n=this.$navigation.children("[data-vc-target-model-id=\""+n.id+"\"]")).length?a.insertAfter(n):a.insertBefore(this.$navigation.children(".vc_tta-section-append")))):e.get("prepend")?a.insertBefore(this.$navigation.children(":first-child")):a.insertBefore(this.$navigation.children(":last-child"))},notifySectionChanged:function(e){var t;window.VcBackendTtaTabsView.__super__.notifySectionChanged.call(this,e),t=e.getParam("title"),_.isString(t)&&t.length||(t=this.defaultSectionTitle),this.changeNavigationSectionTitle(e.get("id"),t),e.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name").removeClass("vc_element-move"),e.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name .vc-c-icon-dragndrop").hide()},makeFirstSectionActive:function(){var e=this.$navigation.children(":first-child:not(.vc_tta-section-append)").addClass(this.activeClass);e.length&&this.findSection(e.data("vc-target-model-id")).addClass(this.activeClass)},findNavigationTab:function(e){return this.$navigation.children("[data-vc-target-model-id=\""+e+"\"]")},removeSection:function(e){var e=this.findNavigationTab(e.get("id")),t;e.hasClass(this.activeClass)&&((t=this.getNextTab(e)).addClass(this.activeClass),this.changeActiveSection(t.data("vc-target-model-id"))),e.remove()},renderSortingPlaceholder:function(e,t){var a=t,n=t.width()+1,t=t.height();return a.width(n),a.height(t),a}}),window.VcBackendTtaAccordionView=VcBackendTtaViewInterface.extend({sortableSelector:"> .vc_tta-panel:not(.vc_tta-section-append)",sortableSelectorCancel:".vc-non-draggable",sortableUpdateModelIdSelector:"data-model-id",defaultSectionTitle:window.i18nLocale.section,render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$content,this.$sortable=this.$content,vc_user_access().shortcodeAll("vc_tta_section")||this.$content.find(".vc_tta-section-append").hide(),this},removeSection:function(e){e=this.findSection(e.get("id")),e.hasClass(this.activeClass)&&this.getNextTab(e).addClass(this.activeClass)},addShortcode:function(e){var t=_.last(vc.shortcodes.filter(function(e){return e.get("parent_id")===this.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))},e.model));t?e.render().$el.insertAfter("[data-model-id="+t.id+"]"):this.$content.prepend(e.render().el)}}),window.VcBackendTtaTourView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaPageableView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaSectionView=window.VcColumnView.extend({parentObj:null,events:{"click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-prepend":"addElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-edit":"editElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-copy":"copy","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-paste":"paste","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_container_for_children")},render:function(){var e;return window.VcBackendTtaSectionView.__super__.render.call(this),e=vc.shortcodes.get(this.model.get("parent_id")),_.isObject(e)&&!_.isUndefined(e.view)&&(this.parentObj=e),this.$el.addClass("vc_tta-panel"),this.$el.attr("style",""),this.$el.attr("data-vc-toggle","tab"),this.replaceTemplateVars(),this},replaceTemplateVars:function(){var e=this.model.getParam("title"),t=(_.isEmpty(e)&&(e=this.parentObj&&this.parentObj.defaultSectionTitle&&this.parentObj.defaultSectionTitle.length?this.parentObj.defaultSectionTitle:window.i18nLocale.section),this.$el.find(".vc_tta-panel-heading")),a=vc.template(t.html(),vc.templateOptions.custom);t.html(a({model_id:this.model.get("id"),section_title:e}))},getIndex:function(){return this.$el.index()},ready:function(){this.updateParentNavigation(),window.VcBackendTtaSectionView.__super__.ready.call(this)},updateParentNavigation:function(){_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionRendered&&this.parentObj.view.notifySectionRendered(this.model)},deleteShortcode:function(t){return t&&t.preventDefault&&t.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&(1===vc.shortcodes.where({parent_id:this.model.get("parent_id")}).length?(this.model.destroy(),this.parentObj&&this.parentObj.destroy()):(this.parentObj&&this.parentObj.view&&this.parentObj.view.removeSection&&this.parentObj.view.removeSection(this.model),this.model.destroy()),!0)},changeShortcodeParams:function(e){window.VcBackendTtaSectionView.__super__.changeShortcodeParams.call(this,e),_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionChanged&&this.parentObj.view.notifySectionChanged(e)}}),vc.addTemplateFilter(function(e){var t=VCS4()+"-"+VCS4();return e.replace(/tab\_id\=\"([^\"]+)\"/g,"tab_id=\"$1"+t+"\"")})}(window.jQuery),function(e,t){"use strict";function a(t,a){var n=t.models?t.pluck("id"):t;e.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:n,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(n){var o,l,r;if("function"==typeof a){for(o=[],r=0;r<n.data.ids.length;r++)l=(l="function"==typeof l?t.get(n.data.ids[r]):t[n.data.ids[r]])||s.model.Attachment.get(n.data.ids[r]),o.push(l);var c=function(e){for(var t=[],a=0;a<e.length;a++)e[a].get("url")||t.push(e[a].fetch());return t}(o);e.when.apply(e,c).done(function(){a(o)})}}).fail(function(t){e(".media-modal-close").click(),o=[],window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&window.vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.warn&&window.console.warn("processImages failed",t)}).always(function(){e(".media-modal").removeClass("processing-media")})}function n(t){var a=e(".media-frame:visible [data-vc-preview-image-filter="+t+"]"),n,o;a.length&&(n=e(".media-frame:visible .attachment-info .thumbnail-image").eq(-1),o=n.find("img"),n.addClass("loading"),o.data("original-src")||o.data("original-src",o.attr("src")),a.val().length?e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"vc_media_editor_preview_image",filter:a.val(),attachment_id:t,preferred_size:window.getUserSetting("imgsize","medium"),_vcnonce:window.vcAdminNonce}}).done(function(e){e.success&&e.data.src.length&&o.attr("src",e.data.src)}).fail(function(e,t,a){window.console.warn("Filter preview failed:",t,a)}).always(function(){n.removeClass("loading")}):(o.attr("src",o.data("original-src")),n.removeClass("loading")))}var o=[],s=wp.media,l=s.featuredImage.set,r=s.editor.send.attachment,c=i18nLocale,d={},p;p=t.extend(s.view.AttachmentCompat.prototype.render),s.view.AttachmentCompat.prototype.render=function(){var a=this,o=this.model.get("id");return p.call(this),t.defer(function(){var t=a.controller.$el.find(".attachment-info"),i=a.controller.$el.find("[data-vc-preview-image-filter]"),s;t.length&&i.length&&(s="<div class=\"vc-filter-wrapper\"><label class=\"setting vc-image-filter-setting\">",s=(s+="<span class=\"name\">"+i.parent().find(".vc-filter-label").text()+"</span>")+i[0].outerHTML+"</label></div>",e(".vc-filter-wrapper").length||t.before(s),i.parents("tr").remove()),void 0!==window.vc_selectedFilters&&void 0!==window.vc_selectedFilters[o]&&(t=e(".media-frame:visible [data-vc-preview-image-filter="+o+"]")).length&&t.val(window.vc_selectedFilters[o]).trigger("change"),n(o)}),this},s.editor.send.attachment=function(e,t){o.push(t.id),a([t.id],function(t){var a=t.slice(0).pop().attributes;r(e,a).done(function(e){!function e(t,a){o&&o[0]!==a?setTimeout(function(){e(t,a)},50):(o.shift(),s.editor.insert(t))}(e,a.id)})})},s.featuredImage.set=function(t){-1===t?l(t):e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:[t],_vcnonce:window.vcAdminNonce}}).done(function(e){!0===e.success&&e.data.ids.length?(e=e.data.ids.pop(),l(e)):l(t)}).fail(function(){l(t)})},s.controller.VcSingleImage=s.controller.FeaturedImage.extend({defaults:t.defaults({id:"vc_single-image",filterable:"uploaded",multiple:!1,toolbar:"vc_single-image",title:c.set_image,priority:60,syncSelection:!1},s.controller.Library.prototype.defaults),updateSelection:function(){var e=this.get("selection"),a=s.vc_editor.getData(),n;void 0!==a&&""!==a&&-1!==a&&(n=t.map(a.toString().split(/,/),function(e){return e=s.model.Attachment.get(e),e.get("url")&&e.get("url").length||e.fetch(),e})),e.reset(n)}}),s.controller.VcGallery=s.controller.VcSingleImage.extend({defaults:t.defaults({id:"vc_gallery",title:c.add_images,toolbar:"main-insert",filterable:"uploaded",library:s.query({type:"image"}),multiple:"add",editable:!0,priority:60,syncSelection:!1},s.controller.Library.prototype.defaults)}),s.VcSingleImage={getData:function(){return this.$hidden_ids.val()},set:function(t){var a=vc.template(e("#vc_settings-image-block").html(),vc.templateOptions.custom);return this.$img_ul.html(a(t)),this.$clear_button.show(),this.$hidden_ids.val(t.id).trigger("change"),!1},frame:function(t){return window.vc_selectedFilters={},this.element=t,this.$button=e(this.element),this.$block=this.$button.closest(".edit_form_line"),this.$hidden_ids=this.$block.find(".gallery_widget_attached_images_ids"),this.$img_ul=this.$block.find(".gallery_widget_attached_images_list"),this.$clear_button=this.$img_ul.next(),this._frame||(this._frame=s({state:"vc_single-image",states:[new s.controller.VcSingleImage]}),this._frame.on("toolbar:create:vc_single-image",function(e){this.createSelectToolbar(e,{text:c.set_image,close:!1})},this._frame),this._frame.state("vc_single-image").on("select",this.select)),this._frame},select:function(){var e=this.get("selection");vc.events.trigger("click:media_editor:add_image",e,"single")}},s.view.MediaFrame.VcGallery=s.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new s.controller.VcGallery])},bindHandlers:function(){s.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:create:main-insert",this.createToolbar,this),t.each({content:{embed:"embedContent","edit-selection":"editSelectionContent"},toolbar:{"main-insert":"mainInsertToolbar"}},function(e,a){t.each(e,function(e,t){this.on(a+":render:"+t,this[e],this)},this)},this)},mainInsertToolbar:function(e){var t=this;this.selectionStatusToolbar(e),e.set("insert",{style:"primary",priority:80,text:c.add_images,requires:{selection:!0},click:function(){var e=t.state(),a=e.get("selection");vc.events.trigger("click:media_editor:add_image",a,"gallery"),e.trigger("insert",a)}})}}),s.vc_editor=t.clone(s.editor),t.extend(s.vc_editor,{$vc_editor_element:null,getData:function(){return s.vc_editor.$vc_editor_element.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val()},insert:function(a){var n=s.vc_editor.$vc_editor_element.closest(".edit_form_line"),o=n.find(".gallery_widget_attached_images_ids"),n=n.find(".gallery_widget_attached_images_list"),i="",l=vc.template(e("#vc_settings-image-block").html(),vc.templateOptions.custom);t.each(a,function(e){i+=l(e)}),o.val(t.map(a,function(e){return e.id}).join(",")).trigger("change"),n.html(i)},open:function(e){var t;return e=this.id(e),t=(t=this.get(e))||this.add(e),window.vc_selectedFilters={},window.setTimeout(function(){t.state().get("library").more()},50),t.open()},add:function(e,a){var n=this.get(e);if(!n){if(d[e])return d[e];n=d[e]=new s.view.MediaFrame.VcGallery(t.defaults(a||{},{state:"vc_gallery",title:c.add_images,library:{type:"image"},multiple:!0}))}return n},init:function(){e("body").off("click.vcGalleryWidget").on("click.vcGalleryWidget",".gallery_widget_add_images",function(t){t.preventDefault(),t=e(this),s.vc_editor.$vc_editor_element=e(this),"true"===t.attr("use-single")?s.VcSingleImage.frame(this).open("vc_editor"):(t.blur(),s.vc_editor.open("wpbakery"))})}}),t.bindAll(s.vc_editor,"open"),e(document).ready(function(){s.vc_editor.init()}),vc.events.on("click:media_editor:add_image",function(n,o){e(".media-modal").addClass("processing-media"),a(n,function(a){var a=t.map(a,function(e){return e.attributes}),i;switch(n.reset(a),i=t.map(n.models,function(e){return e.attributes}),o=void 0===o?"":o){case"gallery":s.vc_editor.insert(i);break;case"single":s.VcSingleImage.set(i[0]);}e(".media-modal").removeClass("processing-media"),e(".media-modal-close").click()})}),e("body").on("change","[data-vc-preview-image-filter]",function(){var t=e(this).data("vcPreviewImageFilter");void 0===window.vc_selectedFilters&&(window.vc_selectedFilters={}),window.vc_selectedFilters[t]=e(this).val(),n(t)})}(window.jQuery,window._),function(e){"use strict";var t=function(e,t,a){this.target=e,this.$pointer=null,this.texts=a,this.pointerOptions=t,this.init()};t.prototype={init:function(){_.bindAll(this,"openedEvent","reposition")},show:function(){this.$pointer=e(this.target),this.$pointer.data("vcPointerMessage",this),this.pointerOptions.opened=this.openedEvent,this.$pointer.addClass("vc-with-vc-pointer").pointer(this.pointerOptions).pointer("open"),e(window).on("resize.vcPointer",this.reposition)},domButtonsWrapper:function(){return e("<div class=\"vc_wp-pointer-controls\" />")},domCloseBtn:function(){return e("<a class=\"vc_pointer-close close\">"+this.texts.finish+"</a>")},domNextBtn:function(){return e("<button class=\"button button-primary button-large vc_wp-pointers-next\">"+this.texts.next+"<i class=\"vc_pointer-icon\"></i></button>")},domPrevBtn:function(){return e("<button class=\"button button-primary button-large vc_wp-pointers-prev\"><i class=\"vc_pointer-icon\"></i>"+this.texts.prev+"</button> ")},openedEvent:function(t,a){var n=a.pointer.offset();a.pointer.css("z-index",1e5),n&&n.top&&e("body").scrollTop(80<n.top?n.top-80:0)},reposition:function(){this.$pointer.pointer("reposition")},close:function(){this.$pointer&&this.$pointer.removeClass("vc-with-vc-pointer").pointer("close"),e(window).off("resize.vcPointer")}},window.vcPointerMessage=t}(window.jQuery),function(e){"use strict";var t=function(e,t){this.pointers=e&&e.messages||[],this._texts=t,this.pointerId=e&&e.pointer_id?e.pointer_id:"",this.pointerData={},this._index=0,this.messagesDismissed=!1,this.init()};t.prototype={init:function(){_.bindAll(this,"show","clickEventClose","clickEventNext","clickEventPrev","buttonsEvent"),this.build()},getPointer:function(t){return this.pointerData=this.pointers[t]&&this.pointers[t].target?this.pointers[t]:null,e("body").hasClass("vc_editor")&&"#vc_ui-panel-post-custom-layout"===this.pointerData.target&&"none"===e(this.pointerData.target).css("display")&&this.next(),this.pointerData&&this.pointerData.options?new vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts):null},buildOptions:function(e){return e.buttons=e.buttonsEvent&&_.isFunction(window[e.buttonsEvent])?_.bind(window[e.buttonsEvent],this):this.buttonsEvent,e.vcPointerController=this,e},build:function(){return(this.pointer=this.getPointer(this._index),vc.events.once("backendEditor.close",this.close,this),!!this.pointer)&&void this.setShowEventHandler()},show:function(){this.pointer.show(),this.setCloseEventHandler(),vc.events.trigger("vcPointer:show")},setShowEventHandler:function(){var t;this.pointerData.showCallback&&window[this.pointerData.showCallback]?window[this.pointerData.showCallback].call(this):this.pointerData.showEvent?this.pointerData.showEvent.match(/\s/)?1<(t=this.pointerData.closeEvent.split(/\s+(.+)?/)).length&&e(t[1]).one(t[0],this.show):vc.events.once(this.pointerData.showEvent,this.show):this.show()},setCloseEventHandler:function(){var t;this.pointerData.closeCallback&&window[this.pointerData.closeCallback]?window[this.pointerData.closeCallback].call(this):this.pointerData.closeEvent?this.pointerData.closeEvent.match(/\s/)?(t=this.pointerData.closeEvent.split(/\s+(.+)?/),e(t[1]||this.$pointer).one(t[1]&&t[0]?t[0]:"click",this.clickEventNext)):vc.events.once(this.pointerData.closeEvent,this.nextOnEvent,this):this.pointer.$pointer&&0<this.pointer.$pointer.length&&e(this.pointer.$pointer).one("click",this.clickEventNext)},nextOnEvent:function(){this.close(),this.next()},next:function(){this._index++,this.build()},prev:function(){this._index--,this.build()},close:function(){this.pointer&&(this.pointer.close(),this.pointerData=null,this.pointer=null,vc.events.trigger("vcPointer:close",this))},buttonsEvent:function(){var e=this.pointer.domCloseBtn(),t=this.pointer.domNextBtn(),a=this.pointer.domPrevBtn();return e.bind("click.vcPointer",this.clickEventClose),e=this.pointer.domButtonsWrapper().append(e),0<this._index&&(a.bind("click.vcPointer",this.clickEventPrev),e.addClass("vc_wp-pointer-controls-prev").append(a)),this._index+1<this.pointers.length&&(t.bind("click.vcPointer",this.clickEventNext),e.addClass("vc_wp-pointer-controls-next").append(t)),e},clickEventClose:function(){this.close(),this.dismissMessages()},clickEventNext:function(){this.close(),this.next()},clickEventPrev:function(){this.close(),this.prev()},dismissMessages:function(){return!this.messagesDismissed&&void(e.post(window.ajaxurl,{pointer:this.pointerId,action:"dismiss-wp-pointer"}),this.messagesDismissed=!0)}},window.vcPointersController=t}(window.jQuery),function(e){"use strict";vc.events.on("app.render",function(){window.vcPointer&&window.vcPointer.pointers&&window.vcPointer.pointers.length&&_.each(vcPointer.pointers,function(e){new vcPointersController(e,vcPointer.texts)},this)}),vc.events.on("vcPointer:show",function(){vc.app.disableFixedNav=!0}),vc.events.on("vcPointer:close",function(){vc.app.disableFixedNav=!1}),window.vcPointersEditorsTourEvents=function(){var e=this.pointer.domCloseBtn();return e.bind("click.vcPointer",this.clickEventClose),e},window.vcPointersShowOnContentElementControls=function(){this.pointer&&e(this.pointer.target).length?(e(this.pointer.target).parent().addClass("vc-with-vc-pointer-controls"),this.show(),e("#wpb_wpbakery").one("click",function(){e(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls")})):vc.events.once("shortcodes:add",vcPointersShowOnContentElementControls,this)},window.vcPointersSetInIFrame=function(){this.pointerData&&vc.frame_window.jQuery(this.pointerData.target).length?(this.pointer=new vc.frame_window.vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts),this.show(),this.pointer.$pointer.closest(".vc_controls").addClass("vc-with-vc-pointer-controls")):vc.events.once("shortcodeView:ready",vcPointersSetInIFrame,this)},window.vcPointersCloseInIFrame=function(){var e=this,t=vc.frame_window.jQuery;t("body").one("click",function(){t(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls"),e.nextOnEvent()})}}(window.jQuery),function(){"use strict";var e={stack:[],stackPosition:0,stackHash:JSON.stringify(""),zeroState:null,locked:!1,add:function(e){null===this.zeroState&&this.setZeroState(e),this.stackHash!==JSON.stringify(e)&&(this.can("redo")&&(this.stack=this.stack.slice(0,this.stackPosition)),this.stack.push(e),this.stackPosition=this.stack.length,this.stackHash=JSON.stringify(this.get()))},can:function(e){var t=!1;return"undo"===e?t=0<this.stack.length&&0<this.stackPosition:"redo"==e&&(t=0<this.stack.length&&this.stackPosition<this.stack.length),t},undo:function(){this.can("undo")&&(--this.stackPosition,this.stackHash=JSON.stringify(this.get()))},redo:function(){this.can("redo")&&(this.stackPosition+=1,this.stackHash=JSON.stringify(this.get()))},set:function(e){return this.stackPosition<e&&(this.stack=this.stack.slice(e-this.stackPosition),this.stackHash=JSON.stringify(this.get()),!0)},get:function(){return 1>this.stackPosition?this.zeroState:this.stack[this.stackPosition-1]},setZeroState:function(e){this.zeroState=e,this.stackHash=JSON.stringify(this.get())}},t={add:function(t){!0!==e.locked&&(e.add(t),window.vc.events.trigger("undoredo:add",t))},getCurrentPosition:function(){return e.stackPosition},undo:function(){return e.undo(),window.vc.events.trigger("undoredo:undo"),t.get()},redo:function(){return e.redo(),window.vc.events.trigger("undoredo:redo"),t.get()},get:function(){return e.get()},canUndo:function(){return!this.isLocked()&&e.can("undo")},canRedo:function(){return!this.isLocked()&&e.can("redo")},setZeroState:function(t){null===e.zeroState?this.add(t):e.setZeroState(t)},lock:function(){e.locked=!0,window.vc.events.trigger("undoredo:lock")},unlock:function(){e.locked=!1,window.vc.events.trigger("undoredo:unlock")},isLocked:function(){return!0===e.locked}};void 0===window.vc&&(window.vc={}),window.vc.undoRedoApi=t}(),function(t){"use strict";t(function(){var e,a,n;window.vc&&window.vc.events&&(e=t("#vc_navbar-undo"),a=t("#vc_navbar-redo"),n=function(e){vc.storage.setContent(e),vc.shortcodes.fetch({reset:!0}),_.delay(function(){window.vc.undoRedoApi.unlock()},50)},window.vc.events.on("undoredo:add undoredo:undo undoredo:redo undoredo:lock undoredo:unlock",_.debounce(function(){e.attr("disabled",!window.vc.undoRedoApi.canUndo()),a.attr("disabled",!window.vc.undoRedoApi.canRedo())},150)),e.on("click.vc-undo",function(a){t(this).is("[disabled]")||window.vc.undoRedoApi.isLocked()?a&&a.preventDefault&&a.preventDefault():(vc.closeActivePanel(),window.vc.undoRedoApi.lock(),a=window.vc.undoRedoApi.undo(),n(a))}),a.on("click.vc-redo",function(a){t(this).is("[disabled]")||window.vc.undoRedoApi.isLocked()?a&&a.preventDefault&&a.preventDefault():(vc.closeActivePanel(),window.vc.undoRedoApi.lock(),a=window.vc.undoRedoApi.redo(),n(a))}))})}(window.jQuery),window.vc||(window.vc={}),function(){"use strict";function e(e,n,o){"fromLocalStorage"===o&&(o=JSON.parse(localStorage.getItem("copiedShortcode")));for(var s=!1,l=(e&&(s=e.get("id")),Object.values(n?vc.ShortcodesBuilder.prototype.parse({},o,s):vc.storage.parseContent({},o,s))),r=0,c;r<l.length&&(c=l[r],!t(e,c,l));r++)a(0==r&&e,c,l,n);n&&n.render()}vc.pasteShortcode=function(t,a,n){n?e(t,a,n):navigator.clipboard?navigator.permissions.query({name:"clipboard-read"}).then(function(n){"granted"===n.state?navigator.clipboard.readText().then(function(n){e(t,a,n)}):e(t,a,"fromLocalStorage")}).catch(function(){e(t,a,"fromLocalStorage")}):e(t,a,"fromLocalStorage")},vc.copyShortcode=function(e){var e=vc.shortcodes.createShortcodeString(e);localStorage.setItem("copiedShortcode",JSON.stringify(e)),e=e,navigator.clipboard?navigator.clipboard.writeText(e):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.error("Unable to copy",e)}document.body.removeChild(t)}(e)};var t=function(e,t,a){var o=!0,i,s,l,r,c,d,p,m,v,u,g;return e?(t=(e=n(e,t,a)).isModelRow,i=e.isModelSection,s=e.isModelColumn,l=e.isModelColumnInner,r=e.isModelRowInner,c=e.isModelTtaSection,d=e.isTopShortcodeRow,p=e.isTopShortcodeRowInner,m=e.isTopShortcodeSection,v=e.containerPreventsShortcode,u=e.isShortcodeContainer,g=e.shortcodeRejectsAsChild,e=e.containerRejectsAsParent,o=u&&(v&&!(c&&p)||!v&&c&&d||t&&!(d||m)||r&&!p||s&&d||l&&(p||d))||!u&&(t||r)||(g||e)&&!(m&&(i||t))):"vc_row"===a[0].shortcode&&(o=!1),o},a=function(e,t,a,o){var i=Object.assign({},t),s,l,r,c,d;return e&&(a=(t=n(e,t,a)).isModelRow,s=t.isModelRowInner,l=t.isModelSection,r=t.isTopShortcodeRow,c=t.isTopShortcodeRowInner,d=t.isTopShortcodeSection,t=t.isModelContainer,i.params.tab_id&&(i.params.tab_id=Date.now()+"-"+vc_guid()),s&&c||a&&r||!e.get("parent_id")&&(!l||!r)?(o&&(i.place_after_id=e.get("id")),i.parent_id=e.get("parent_id")):t&&!a&&(i.parent_id=e.get("id")),(a||s)&&(r||c)||(a||l)&&d)&&(i.order=parseFloat(e.get("order"))+vc.clone_index),o?(o.create(i),o.last()):vc.shortcodes.create(i)},n=function(e,t,a){var e=e.get("shortcode"),n=vc.map[e].allowed_container_element,o=vc.map[e].as_parent&&vc.map[e].as_parent.only,i=vc.map[a[0].shortcode].as_child&&vc.map[a[0].shortcode].as_child.only;return{isModelRow:"vc_row"===e,isModelSection:"vc_section"===e,isModelColumn:"vc_column"===e,isModelColumnInner:"vc_column_inner"===e,isModelRowInner:"vc_row_inner"===e,isModelTtaSection:"vc_tta_section"===e,isModelContainer:vc.map[e].is_container,isTopShortcodeRow:"vc_row"===a[0].shortcode,isTopShortcodeRowInner:"vc_row_inner"===a[0].shortcode,isTopShortcodeSection:"vc_section"===a[0].shortcode,containerPreventsShortcode:"string"==typeof n&&!n.includes(a[0].shortcode)||!1===n,isShortcodeContainer:vc.map[a[0].shortcode].is_container,shortcodeRejectsAsChild:"string"==typeof i&&!i.includes(e),containerRejectsAsParent:"string"==typeof o&&!o.includes(a[0].shortcode)}}}(),function(t){"use strict";function e(e){window.vc.showMessage(e,"error",1e4,"#vc_ui-helper-modal-ai .vc_ui-panel-window-inner")}function a(o){t(o.target).closest("[data-vc-ui-element=\"button-close\"]").length&&(n.removeClass("vc_active"),n.off("click",a),n.removeData(),n.find(" .vc_ui-panel-content-container").addClass("vc_ui-hidden"),n.find(" .vc_ui-helper-modal-ai-placeholder").addClass("vc_ui-hidden"),i.hide())}var n=t("#vc_ui-helper-modal-ai"),o=t("#wpwrap"),i=n.find("[data-vc-ui-element=\"button-save\"]");o.on("click",".vc_ui-icon-ai",function(o){var o=t(o.currentTarget),i=o.closest(".vc_shortcode-param"),s=null,l=o.data();i.length&&(s=i.data());var r=l.wpbAiElementType||"textarea",c=l.fieldId||r;n.find(".vc_ui-helper-modal-ai-preloader").length||n.find(".vc_ui-post-settings-header-container").after("<div class=\"vc_ui-helper-modal-ai-preloader\"><div class=\"vc_ui-wp-spinner vc_ui-wp-spinner-dark vc_ui-wp-spinner-lg\"></div></div>"),function(a,o){a={action:"wpb_ai_get_modal_data",data:{ai_element_type:a,ai_element_id:o},_vcnonce:window.vcAdminNonce},t.ajax({type:"POST",url:window.ajaxurl,data:a}).done(function(t){!0===t.success?(void 0===window.vc.ai_modal_view?window.vc.ai_modal_view=new vc.AiFormView({el:"#vc_ui-helper-modal-ai",data:t.data}):window.vc.ai_modal_view.render(t.data),n.find(" .vc_ui-panel-content-container").scrollTop(0),n.find(".vc_ui-helper-modal-ai-preloader").remove(),n.find(" .vc_ui-panel-content-container").removeClass("vc_ui-hidden")):t&&t.data&&t.data[0]&&t.data[0].code&&t.data[0].message?(console.error(t.data[0].message),e(t.data[0].message)):(console.error(window.i18nLocale.ai_response_error),e(window.i18nLocale.ai_response_error))}).fail(function(){console.error(window.i18nLocale.ai_response_error),_this.resetButton(),e(window.i18nLocale.ai_response_error)})}(r,c),s?(r=i.find("."+s.param_type),n.data("element",r),t.each(s,function(e,t){n.data(e,t)})):l.fieldId&&(c=o.closest(".edit_form_line"),i=o.closest(".vc_ui-settings-text-wrapper"),r=null,c.length?r=c.find("#"+l.fieldId):i.length&&(r=i.siblings("#"+l.fieldId)),n.data("fieldId",l.fieldId),n.data("element",r)),n.addClass("vc_active"),n.on("click",a)})}(window.jQuery),function(t){"use strict";window.vc.AiFormView=Backbone.View.extend({events:{"click .vc_ai-generate-button":"generateContent",'change [name="contentType"]':"changeContentType",'input [name="prompt"]':"changePrompt",'click [data-vc-ui-element="button-save"]':"insertContent"},seconds:0,minutes:0,timerInterval:null,isGenerating:!1,maxWaitingCacheInterval:9e5,maxPromptLength:2e3,initialize:function(e){this.toggleModalPromoClass(e.data.type),this.$el.find(".vc_ui-helper-modal-ai-preloader").after(e.data.content),this.setFormElements()},render:function(e){return this.timerInterval&&this.clearTimer(),this.toggleModalPromoClass(e.type),this.$form.after(e.content),this.$form.remove(),this.setFormElements(),this},setFormElements:function(){this.$form=this.$el.find(".vc_ui-panel-content-container"),this.$generate_button=this.$el.find(".vc_ai-generate-button"),this.$close_button=this.$el.find("[data-vc-ui-element=\"button-close\"]"),this.$insert_button=this.$el.find("[data-vc-ui-element=\"button-save\"]"),this.$generated_content=this.$el.find(".wpb_ai-generated-content"),this.$prompt_field=this.$el.find("[name=\"prompt\"]"),this.$generate_placeholder=this.$el.find(".vc_ui-helper-modal-ai-placeholder"),this.$generate_placeholder_timer=this.$generate_placeholder.find(".vc_ai-timer"),this.initialButtonText=this.$generate_button.text().trim(),this.contentType=this.$el.find("[name=\"contentType\"]").val(),"new_content"!==this.contentType||this.$prompt_field.val().trim()||this.disableButton()},generateContent:function(a){a.preventDefault();var n=this,a=this.$prompt_field.val().split(" "),a=(this.maxPromptLength<a.length&&this.$prompt_field.val(a.slice(0,this.maxPromptLength).join(" ")),this.$form.find(":visible:not([style*=\"display: none\"]), [name=\"prompt\"], input[type=\"hidden\"]").serializeArray()),o=this.getUniqueCacheId(),a=(a.push({name:"cacheId",value:o}),this.$generated_content.val(""),{action:"wpb_ai_api_get_response",data:a,_vcnonce:window.vcAdminNonce});this.isGenerating=!0,this.$generate_placeholder.removeClass("vc_ui-hidden"),this.timerInterval=setInterval(this.updateTimer.bind(this),1e3),t.ajax({type:"POST",url:window.ajaxurl,timeout:2e4,data:a}).done(function(e){return!!n.isGenerating&&void(!0===e.success?(n.$generated_content.val(e.data),n.resetButton(!0),n.$insert_button.show()):e&&e.data&&e.data[0]&&e.data[0].code&&e.data[0].message?(console.error(e.data[0].code,e.data[0].message),n.resetButton(!1),e=e.data[0].message.replace(/\\/g,""),n.showErrorMessage(e)):(console.error(window.i18nLocale.ai_response_error),n.resetButton(!1),n.showErrorMessage(window.i18nLocale.ai_response_error)))}).fail(function(e){if(!n.isGenerating)return!1;if(e&&!e.statusText)console.error(window.i18nLocale.ai_response_error),n.resetButton(!1),n.showErrorMessage(window.i18nLocale.ai_response_error);else if("timeout"!==e.statusText)console.error(window.i18nLocale.ai_response_error),n.resetButton(!1),n.showErrorMessage(window.i18nLocale.ai_response_error);else for(var t={action:"wpb_ai_generate_content_check_cache",data:{type:"generate-text",messaged_data:!0,cacheId:o},_vcnonce:window.vcAdminNonce},a=[],i=1e4;i<=n.maxWaitingCacheInterval;i+=1e4)!function(e){a.push(setTimeout(function(){var o=n.$generated_content.val();if(o)for(var s=0;s<a.length;s++)"stop_cache_timeouts"===o&&n.$generated_content.val(""),clearTimeout(a[s]);else n.processCachedRequest(n,t,e)},e))}(i)})},processCachedRequest:function(e,a,n){this.maxWaitingCacheInterval===n?(console.error(window.i18nLocale.ai_response_error),e.resetButton(!1),e.showErrorMessage(window.i18nLocale.ai_response_error)):t.ajax({type:"POST",url:window.ajaxurl,timeout:1e4,data:a}).done(function(t){return!!e.isGenerating&&void(!0===t.success&&t.data&&"cache_in_process"!==t.data&&(e.$generated_content.val(t.data),e.resetButton(!0),e.$insert_button.show()),!1===t.success&&t&&t.data&&t.data[0]&&t.data[0].code&&t.data[0].message&&(e.$generated_content.val("stop_cache_timeouts"),e.resetButton(!1),t=t.data[0].message.replace(/\\/g,""),e.showErrorMessage(t)))})},getUniqueCacheId:function(){return Date.now().toString(36)+Math.random().toString(36).slice(2)},disableButton:function(){this.$generate_button.prop("disabled",function(e,t){return!t}),this.isGenerateDisabled=!0},resetButton:function(e){e=e?"Regenerate":this.initialButtonText,this.$generate_button.removeAttr("disabled style"),this.$generate_button.text(e),this.$generate_button.blur(),this.clearTimer()},clearTimer:function(){this.$generate_placeholder.addClass("vc_ui-hidden"),this.$generate_placeholder_timer.text("00:00"),clearInterval(this.timerInterval),this.seconds=0,this.minutes=0,this.isGenerating=!1},updateTimer:function(){this.seconds++,60===this.seconds&&(this.seconds=0,this.minutes++);var e=(this.minutes+"").padStart(2,"0"),t=(this.seconds+"").padStart(2,"0");this.$generate_placeholder_timer.text(e+":"+t)},changeContentType:function(a){this.contentType=a.target.value;var e=this.$el.data(),n=(n=t(a.target).find("option:selected").attr("data-form-fields-optionality"))?n.split("|"):[];this.hideFormFields(n),this.$form.trigger("reset"),this.$form.find("[name=\"contentType\"]").val(this.contentType),"improve_existing"===a.target.value||"translate"===a.target.value?(this.$generate_button.text(window.i18nLocale.regenerate),n=e.element.val(),"textarea_raw_html"===e.param_type?n=rawurldecode(base64_decode(n.trim())):"textarea_html"===e.param_type&&(n=window.tinymce.get(e.element.attr("id")).getContent()),this.$form.find("[name=\"prompt\"]").val(n),this.resetButton(!0)):(this.$generate_button.text(window.i18nLocale.generate),this.$form.find("[name=\"prompt\"]").val(""),this.disableButton())},changePrompt:function(t){this.isGenerateDisabled&&t.target.value?(this.resetButton(!1),this.isGenerateDisabled=!1):t.target.value||this.isGenerateDisabled||this.disableButton();var e=t.target.value.split(" ");e.length>this.maxPromptLength&&(t.target.value=e.slice(0,this.maxPromptLength).join(" "))},showErrorMessage:function(e){window.vc.showMessage(e,"error",1e4,"#vc_ui-helper-modal-ai .vc_ui-panel-window-inner")},insertContent:function(){var e=this.$el.find(".wpb_ai-generated-content").val();if(!e)return!1;var t=this.$el.data(),a,n;"textarea_html"===t.param_type?(n=(a=t.element).attr("id"),"new_content"===this.contentType&&(e=a.val()+" "+e),window.tinymce.get(n).setContent(e),a.val(e)):["textarea","textfield","textarea_raw_html"].includes(t.param_type)?(n=t.element,"new_content"===this.contentType&&(e=n.val()+" "+e),n.val(e)):t.fieldId&&("vc_page-title-field"===t.fieldId?("new_content"===this.contentType&&(e=t.element.val()+" "+e),t.element.val(e)):["wpb_css_editor","wpb_js_header_editor","wpb_js_footer_editor"].includes(t.fieldId)&&(e=window.ace.edit(t.fieldId).getValue()+"\n\n"+e,window.ace.edit(t.fieldId).setValue(e))),this.$close_button.click()},toggleModalPromoClass:function(e){"promo"===e?this.$el.addClass("vc_modal-ai-container--promo"):this.$el.removeClass("vc_modal-ai-container--promo")},hideFormFields:function(e){this.$form.find("div[data-optional-form-field]").each(function(){var a=t(this),n=a.attr("data-optional-form-field");e.includes(n)?a.show():a.hide()})}})}(window.jQuery);