(function($){"use strict";var defaults={formula:{},currency:"$",currencyAfter:"",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,mathFunction:"",notNumber:1,negative:0,updateHidden:""},methods={init:function(a){return this.each(function(){a=$.extend(!1,defaults,a),$(this).data("cost-calculator-options",a),$(this).costCalculator("calculate")})},calculate:function(options){return this.each(function(){if(options=$(this).data("cost-calculator-options"),"undefined"!=typeof options){var tempFormula=options.formula,array=$.grep(tempFormula.split(/\(|\)|\+|{\+}|\*|{\*}|\/|{\/}|\^|{\^}|{-}/g),function(a){return""!=a}),currentSelector="";if(0<=options.formula.indexOf("power")){var powerstart=0,powerend=0;for(var i in array)"{powerstart}"!=array[i]&&"{powerend}"!=array[i]&&(powerstart=0,powerend=0,0<=array[i].indexOf("{powerstart}")&&(powerstart=1),0<=array[i].indexOf("{powerend}")&&(powerend=1),currentSelector=$("[name=\""+array[i].replace(/{powerstart}|{powerend}/g,"")+"\"][type=\"radio\"]:checked").length?"[name=\""+array[i].replace(/{powerstart}|{powerend}/g,"")+"\"][type=\"radio\"]:checked":"#"+array[i].replace(/{powerstart}|{powerend}/g,""),tempFormula=tempFormula.replace(array[i],(powerstart?"Math.pow(":"")+(isNaN(parseFloat($(currentSelector).val()))?isNaN(parseFloat(array[i].replace(/{powerstart}|{powerend}/g,"")))?0:parseFloat(array[i].replace(/{powerstart}|{powerend}/g,"")):parseFloat($(currentSelector).val()))+(powerend?")":"")));tempFormula=tempFormula.replace(/{powerstart}/g,"Math.pow("),tempFormula=tempFormula.replace(/{powerend}/g,")"),tempFormula=tempFormula.replace(/\^/g,",")}else for(var i in array)currentSelector=$("[name=\""+array[i]+"\"][type=\"radio\"]:checked").length?"[name=\""+array[i]+"\"][type=\"radio\"]:checked":"#"+array[i],tempFormula=tempFormula.replace(array[i],isNaN(parseFloat($(currentSelector).val()))?isNaN(parseFloat(array[i]))?0:parseFloat(array[i]):parseFloat($(currentSelector).val()));tempFormula=tempFormula.replace(/{|}/g,"");var sum=eval(tempFormula);(parseInt(options.notNumber,10)&&!isFinite(sum)||parseInt(options.negative,10)&&0>sum)&&(sum=0);var regex=new RegExp("\\d(?=(\\d{3})+"+(0<parseInt(options.decimalPlaces,10)?"\\"+options.decimalSeparator:"$")+")","g"),sumFormatted=sum.toFixed(parseInt(options.decimalPlaces,10)).replace(".",options.decimalSeparator).replace(regex,"$&"+options.thousandsSeparator),sumValue=sum.toFixed(parseInt(options.decimalPlaces,10));"ceil"==options.mathFunction?(sumFormatted=Math.ceil(sumFormatted),sumValue=Math.ceil(sumValue)):"floor"==options.mathFunction&&(sumFormatted=Math.floor(sumFormatted),sumValue=Math.floor(sumValue)),$(this).html((""==options.currency?"":"<span class=\"cost-calculator-currency\">"+options.currency+"</span>")+sumFormatted+(""==options.currencyAfter?"":"<span class=\"cost-calculator-currency\">"+options.currencyAfter+"</span>")),"object"==jQuery.type(options.updateHidden)&&(options.updateHidden.val((""==options.currency?"":options.currency)+sumFormatted+(""==options.currencyAfter?"":options.currencyAfter)),$("#"+options.updateHidden.attr("id")+"-value").val(sumValue),("ceil"==options.mathFunction||"floor"==options.mathFunction)&&$("#"+options.updateHidden.attr("id")+"-plain").val(sum.toFixed(parseInt(options.decimalPlaces,10))))}})}};jQuery.fn.costCalculator=function(a){if(methods[a])return methods[a].apply(this,arguments);return"object"!=typeof a&&a||""==arguments[0].formula?void 0:methods.init.apply(this,arguments)}})(jQuery);